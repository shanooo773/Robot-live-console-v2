{"version":3,"file":"vendors-node_modules_theia_scm_lib_browser_merge-editor_merge-editor_js-node_modules_theia_sc-59ad23.js","mappings":"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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,IAAI;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,sDAAS;AAChC,EAAE,kDAAqB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mGAA6B;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,yCAAY;AAC3B,YAAY,4DAAc;AAC1B,kBAAkB,yCAAY;AAC9B,6BAA6B,yCAAY;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,kDAAqB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,wBAAwB,gDAAmB,aAAa,8EAAQ,GAAG;AACnE;AACA;AACA,KAAK;AACL;AACA;AACA,2BAA2B,6CAAgB;;AAEf;;;;;;;;;;;;;;;;;ACjOF;;AAE1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mDAAY;AAChC,SAAS,wDAAiB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEqC;;;;;;;;;;;;;;;;;AC1BG;;AAExC,YAAY,kDAAe;;AAEC;;;;;;;;;;;;;;;;;;ACJF;AAC2C;;AAErE;AACA,YAAY,mDAAY;AACxB,EAAE,wEAAyB;AAC3B;AACA,GAAG;AACH;AACA;;AAEgC","sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/extends.js?","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js?","webpack:///./node_modules/@theia/core/src/browser/widgets/alert-message.tsx?","webpack:///./node_modules/@theia/monaco/src/browser/monaco-editor-peek-view-widget.ts?","webpack:///./node_modules/@theia/scm/src/browser/decorations/scm-decorations-service.ts?","webpack:///./node_modules/@theia/scm/src/browser/dirty-diff/content-lines.ts?","webpack:///./node_modules/@theia/scm/src/browser/dirty-diff/diff-computer.ts?","webpack:///./node_modules/@theia/scm/src/browser/dirty-diff/dirty-diff-decorator.ts?","webpack:///./node_modules/@theia/scm/src/browser/dirty-diff/dirty-diff-navigator.ts?","webpack:///./node_modules/@theia/scm/src/browser/dirty-diff/dirty-diff-widget.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/merge-editor.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/model/line-range.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/model/live-diff.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/model/merge-editor-model.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/model/merge-range.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/model/range-editing.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/model/range-mapping.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/model/range-utils.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/view/diff-spacers.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/view/merge-editor-panes/index.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/view/merge-editor-panes/merge-editor-base-pane.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/view/merge-editor-panes/merge-editor-pane-header.tsx?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/view/merge-editor-panes/merge-editor-pane.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/view/merge-editor-panes/merge-editor-result-pane.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/view/merge-editor-panes/merge-editor-side-pane.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/view/merge-editor-scroll-sync.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/view/merge-editor-view-zones.ts?","webpack:///./node_modules/@theia/scm/src/browser/merge-editor/view/merge-range-actions.ts?","webpack:///./node_modules/@theia/scm/src/browser/scm-amend-component.tsx?","webpack:///./node_modules/@theia/scm/src/browser/scm-amend-widget.tsx?","webpack:///./node_modules/@theia/scm/src/browser/scm-avatar-service.ts?","webpack:///./node_modules/@theia/scm/src/browser/scm-colors.ts?","webpack:///./node_modules/@theia/scm/src/browser/scm-commit-widget.tsx?","webpack:///./node_modules/@theia/scm/src/browser/scm-context-key-service.ts?","webpack:///./node_modules/@theia/scm/src/browser/scm-contribution.ts?","webpack:///./node_modules/@theia/scm/src/browser/scm-input.ts?","webpack:///./node_modules/@theia/scm/src/browser/scm-no-repository-widget.tsx?","webpack:///./node_modules/@theia/scm/src/browser/scm-preferences.ts?","webpack:///./node_modules/@theia/scm/src/browser/scm-quick-open-service.ts?","webpack:///./node_modules/@theia/scm/src/browser/scm-repository.ts?","webpack:///./node_modules/@theia/scm/src/browser/scm-service.ts?","webpack:///./node_modules/@theia/scm/src/browser/scm-tree-model.ts?","webpack:///./node_modules/@theia/scm/src/browser/scm-tree-widget.tsx?","webpack:///./node_modules/@theia/scm/src/browser/scm-widget.tsx?","webpack:///./node_modules/@theia/scm/src/browser/style/scm-amend-component.css?","webpack:///./node_modules/@theia/scm/src/browser/style/scm-amend-component.css?./node_modules/css-loader/dist/cjs.js","webpack:///./node_modules/diff/src/convert/dmp.js?","webpack:///./node_modules/diff/src/convert/xml.js?","webpack:///./node_modules/diff/src/diff/array.js?","webpack:///./node_modules/diff/src/diff/base.js?","webpack:///./node_modules/diff/src/diff/character.js?","webpack:///./node_modules/diff/src/diff/css.js?","webpack:///./node_modules/diff/src/diff/json.js?","webpack:///./node_modules/diff/src/diff/line.js?","webpack:///./node_modules/diff/src/diff/sentence.js?","webpack:///./node_modules/diff/src/diff/word.js?","webpack:///./node_modules/diff/src/index.js?","webpack:///./node_modules/diff/src/patch/apply.js?","webpack:///./node_modules/diff/src/patch/create.js?","webpack:///./node_modules/diff/src/patch/merge.js?","webpack:///./node_modules/diff/src/patch/parse.js?","webpack:///./node_modules/diff/src/patch/reverse.js?","webpack:///./node_modules/diff/src/util/array.js?","webpack:///./node_modules/diff/src/util/distance-iterator.js?","webpack:///./node_modules/diff/src/util/params.js?","webpack:///./node_modules/react-textarea-autosize/dist/react-textarea-autosize.browser.development.esm.js?","webpack:///./node_modules/use-composed-ref/dist/use-composed-ref.esm.js?","webpack:///./node_modules/use-isomorphic-layout-effect/dist/use-isomorphic-layout-effect.browser.esm.js?","webpack:///./node_modules/use-latest/dist/use-latest.esm.js?"],"sourcesContent":["function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (-1 !== e.indexOf(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","// *****************************************************************************\n// Copyright (C) 2018 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport React = require('react');\nimport { codicon } from './widget';\n\nexport type MessageType = keyof AlertMessageIcon;\n\ninterface AlertMessageIcon {\n    INFO: string;\n    SUCCESS: string;\n    WARNING: string;\n    ERROR: string;\n}\n\nconst AlertMessageIcon = {\n    INFO: codicon('info'),\n    SUCCESS: codicon('pass'),\n    WARNING: codicon('warning'),\n    ERROR: codicon('error')\n};\n\nexport interface AlertMessageProps {\n    type: MessageType;\n    header: string;\n    children?: React.ReactNode\n}\n\nexport class AlertMessage extends React.Component<AlertMessageProps> {\n\n    override render(): React.ReactNode {\n        return <div className='theia-alert-message-container'>\n            <div className={`theia-alert theia-${this.props.type.toLowerCase()}-alert`}>\n                <div className='theia-message-header'>\n                    <i className={AlertMessageIcon[this.props.type]}></i>\n                    {this.props.header}\n                </div>\n                <div className='theia-message-content'>{this.props.children}</div>\n            </div>\n        </div>;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2024 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Position, Range } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { DisposableCollection } from '@theia/core';\nimport { MonacoEditor } from './monaco-editor';\nimport * as monaco from '@theia/monaco-editor-core';\nimport { PeekViewWidget, IPeekViewOptions, IPeekViewStyles } from '@theia/monaco-editor-core/esm/vs/editor/contrib/peekView/browser/peekView';\nimport { ICodeEditor } from '@theia/monaco-editor-core/esm/vs/editor/browser/editorBrowser';\nimport { ActionBar } from '@theia/monaco-editor-core/esm/vs/base/browser/ui/actionbar/actionbar';\nimport { Action } from '@theia/monaco-editor-core/esm/vs/base/common/actions';\nimport { StandaloneServices } from '@theia/monaco-editor-core/esm/vs/editor/standalone/browser/standaloneServices';\nimport { IInstantiationService } from '@theia/monaco-editor-core/esm/vs/platform/instantiation/common/instantiation';\nimport { IThemeService } from '@theia/monaco-editor-core/esm/vs/platform/theme/common/themeService';\nimport { Color } from '@theia/monaco-editor-core/esm/vs/base/common/color';\n\nexport { peekViewBorder, peekViewTitleBackground, peekViewTitleForeground, peekViewTitleInfoForeground }\n    from '@theia/monaco-editor-core/esm/vs/editor/contrib/peekView/browser/peekView';\n\nexport namespace MonacoEditorPeekViewWidget {\n    export interface Styles {\n        frameColor?: string;\n        arrowColor?: string;\n        headerBackgroundColor?: string;\n        primaryHeadingColor?: string;\n        secondaryHeadingColor?: string;\n    }\n    export interface Options {\n        showFrame?: boolean;\n        showArrow?: boolean;\n        frameWidth?: number;\n        className?: string;\n        isAccessible?: boolean;\n        isResizeable?: boolean;\n        keepEditorSelection?: boolean;\n        allowUnlimitedHeight?: boolean;\n        ordinal?: number;\n        showInHiddenAreas?: boolean;\n        supportOnTitleClick?: boolean;\n    }\n    export interface Action {\n        readonly id: string;\n        label: string;\n        tooltip: string;\n        class: string | undefined;\n        enabled: boolean;\n        checked?: boolean;\n        run(...args: unknown[]): unknown;\n    }\n    export interface ActionOptions {\n        icon?: boolean;\n        label?: boolean;\n        keybinding?: string;\n        index?: number;\n    }\n}\n\nexport class MonacoEditorPeekViewWidget {\n\n    protected readonly toDispose = new DisposableCollection();\n\n    readonly onDidClose = this.toDispose.onDispose;\n\n    private readonly themeService = StandaloneServices.get(IThemeService);\n\n    private readonly delegate;\n\n    constructor(\n        readonly editor: MonacoEditor,\n        options: MonacoEditorPeekViewWidget.Options = {},\n        protected styles: MonacoEditorPeekViewWidget.Styles = {}\n    ) {\n        const that = this;\n        this.toDispose.push(this.delegate = new class extends PeekViewWidget {\n\n            get actionBar(): ActionBar | undefined {\n                return this._actionbarWidget;\n            }\n\n            fillContainer(container: HTMLElement): void {\n                super._fillContainer(container);\n            }\n\n            protected override _fillContainer(container: HTMLElement): void {\n                that.fillContainer(container);\n            }\n\n            fillHead(container: HTMLElement, noCloseAction?: boolean): void {\n                super._fillHead(container, noCloseAction);\n            }\n\n            protected override _fillHead(container: HTMLElement, noCloseAction?: boolean): void {\n                that.fillHead(container, noCloseAction);\n            }\n\n            fillBody(container: HTMLElement): void {\n                // super._fillBody is an abstract method\n            }\n\n            protected override _fillBody(container: HTMLElement): void {\n                that.fillBody(container);\n            };\n\n            doLayoutHead(heightInPixel: number, widthInPixel: number): void {\n                super._doLayoutHead(heightInPixel, widthInPixel);\n            }\n\n            protected override _doLayoutHead(heightInPixel: number, widthInPixel: number): void {\n                that.doLayoutHead(heightInPixel, widthInPixel);\n            }\n\n            doLayoutBody(heightInPixel: number, widthInPixel: number): void {\n                super._doLayoutBody(heightInPixel, widthInPixel);\n            }\n\n            protected override _doLayoutBody(heightInPixel: number, widthInPixel: number): void {\n                that.doLayoutBody(heightInPixel, widthInPixel);\n            }\n\n            onWidth(widthInPixel: number): void {\n                super._onWidth(widthInPixel);\n            }\n\n            protected override _onWidth(widthInPixel: number): void {\n                that.onWidth(widthInPixel);\n            }\n\n            doRevealRange(range: monaco.Range, isLastLine: boolean): void {\n                super.revealRange(range, isLastLine);\n            }\n\n            protected override revealRange(range: monaco.Range, isLastLine: boolean): void {\n                that.doRevealRange(that.editor['m2p'].asRange(range), isLastLine);\n            }\n\n            getBodyElement(): HTMLDivElement | undefined {\n                return this._bodyElement;\n            }\n\n            setBodyElement(element: HTMLDivElement | undefined): void {\n                this._bodyElement = element;\n            }\n\n            getHeadElement(): HTMLDivElement | undefined {\n                return this._headElement;\n            }\n\n            setHeadElement(element: HTMLDivElement | undefined): void {\n                this._headElement = element;\n            }\n\n            override setCssClass(className: string, classToReplace?: string | undefined): void {\n                super.setCssClass(className, classToReplace);\n            }\n        }(\n            editor.getControl() as unknown as ICodeEditor,\n            Object.assign(<IPeekViewOptions>{}, options, this.convertStyles(styles)),\n            StandaloneServices.get(IInstantiationService)\n        ));\n        this.toDispose.push(this.themeService.onDidColorThemeChange(() => this.style(this.styles)));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    create(): void {\n        this.delegate.create();\n    }\n\n    setTitle(primaryHeading: string, secondaryHeading?: string): void {\n        this.delegate.setTitle(primaryHeading, secondaryHeading);\n    }\n\n    style(styles: MonacoEditorPeekViewWidget.Styles): void {\n        this.delegate.style(this.convertStyles(this.styles = styles));\n    }\n\n    show(rangeOrPos: Range | Position, heightInLines: number): void {\n        this.delegate.show(this.convertRangeOrPosition(rangeOrPos), heightInLines);\n    }\n\n    hide(): void {\n        this.delegate.hide();\n    }\n\n    clearActions(): void {\n        this.delegate.actionBar?.clear();\n    }\n\n    addAction(id: string, label: string, cssClass: string | undefined, enabled: boolean, actionCallback: (arg: unknown) => unknown,\n        options?: MonacoEditorPeekViewWidget.ActionOptions): MonacoEditorPeekViewWidget.Action {\n        options = cssClass ? { icon: true, label: false, ...options } : { icon: false, label: true, ...options };\n        const { actionBar } = this.delegate;\n        if (!actionBar) {\n            throw new Error('Action bar has not been created.');\n        }\n        const action = new Action(id, label, cssClass, enabled, actionCallback);\n        actionBar.push(action, options);\n        return action;\n    }\n\n    protected fillContainer(container: HTMLElement): void {\n        this.delegate.fillContainer(container);\n    }\n\n    protected fillHead(container: HTMLElement, noCloseAction?: boolean): void {\n        this.delegate.fillHead(container, noCloseAction);\n    }\n\n    protected fillBody(container: HTMLElement): void {\n        this.delegate.fillBody(container);\n    }\n\n    protected doLayoutHead(heightInPixel: number, widthInPixel: number): void {\n        this.delegate.doLayoutHead(heightInPixel, widthInPixel);\n    }\n\n    protected doLayoutBody(heightInPixel: number, widthInPixel: number): void {\n        this.delegate.doLayoutBody(heightInPixel, widthInPixel);\n    }\n\n    protected onWidth(widthInPixel: number): void {\n        this.delegate.onWidth(widthInPixel);\n    }\n\n    protected doRevealRange(range: Range, isLastLine: boolean): void {\n        this.delegate.doRevealRange(this.editor['p2m'].asRange(range), isLastLine);\n    }\n\n    protected get bodyElement(): HTMLDivElement | undefined {\n        return this.delegate.getBodyElement();\n    }\n\n    protected set bodyElement(element: HTMLDivElement | undefined) {\n        this.delegate.setBodyElement(element);\n    }\n\n    protected get headElement(): HTMLDivElement | undefined {\n        return this.delegate.getHeadElement();\n    }\n\n    protected set headElement(element: HTMLDivElement | undefined) {\n        this.delegate.setHeadElement(element);\n    }\n\n    protected setCssClass(className: string, classToReplace?: string | undefined): void {\n        this.delegate.setCssClass(className, classToReplace);\n    }\n\n    private convertStyles(styles: MonacoEditorPeekViewWidget.Styles): IPeekViewStyles {\n        return {\n            frameColor: this.convertColor(styles.frameColor),\n            arrowColor: this.convertColor(styles.arrowColor),\n            headerBackgroundColor: this.convertColor(styles.headerBackgroundColor),\n            primaryHeadingColor: this.convertColor(styles.primaryHeadingColor),\n            secondaryHeadingColor: this.convertColor(styles.secondaryHeadingColor),\n        };\n    }\n\n    private convertColor(color?: string): Color | undefined {\n        if (color === undefined) {\n            return undefined;\n        }\n        return this.themeService.getColorTheme().getColor(color) || Color.fromHex(color);\n    }\n\n    private convertRangeOrPosition(arg: Range | Position): monaco.Range | monaco.Position {\n        const p2m = this.editor['p2m'];\n        return Range.is(arg) ? p2m.asRange(arg) : p2m.asPosition(arg);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { DisposableCollection, Emitter, Event, ResourceProvider } from '@theia/core';\nimport { DirtyDiffDecorator, DirtyDiffUpdate } from '../dirty-diff/dirty-diff-decorator';\nimport { DiffComputer } from '../dirty-diff/diff-computer';\nimport { ContentLines } from '../dirty-diff/content-lines';\nimport { EditorManager, EditorWidget, TextEditor } from '@theia/editor/lib/browser';\nimport { ScmService } from '../scm-service';\n\nimport throttle = require('@theia/core/shared/lodash.throttle');\n\n@injectable()\nexport class ScmDecorationsService {\n    private readonly diffComputer = new DiffComputer();\n\n    protected readonly onDirtyDiffUpdateEmitter = new Emitter<DirtyDiffUpdate>();\n    readonly onDirtyDiffUpdate: Event<DirtyDiffUpdate> = this.onDirtyDiffUpdateEmitter.event;\n\n    constructor(\n        @inject(DirtyDiffDecorator) protected readonly decorator: DirtyDiffDecorator,\n        @inject(ScmService) protected readonly scmService: ScmService,\n        @inject(EditorManager) protected readonly editorManager: EditorManager,\n        @inject(ResourceProvider) protected readonly resourceProvider: ResourceProvider\n    ) {\n        const updateTasks = new Map<EditorWidget, { (): void; cancel(): void }>();\n        this.editorManager.onCreated(editorWidget => {\n            const { editor } = editorWidget;\n            if (!this.supportsDirtyDiff(editor)) {\n                return;\n            }\n            const toDispose = new DisposableCollection();\n            const updateTask = this.createUpdateTask(editor);\n            updateTasks.set(editorWidget, updateTask);\n            toDispose.push(editor.onDocumentContentChanged(() => updateTask()));\n            toDispose.push(editorWidget.onDidChangeVisibility(visible => {\n                if (visible) {\n                    updateTask();\n                }\n            }));\n            if (editor.onShouldDisplayDirtyDiffChanged) {\n                toDispose.push(editor.onShouldDisplayDirtyDiffChanged(shouldDisplayDirtyDiff => {\n                    if (shouldDisplayDirtyDiff) {\n                        updateTask();\n                    } else {\n                        const update: DirtyDiffUpdate = { editor, changes: [] };\n                        this.decorator.applyDecorations(update);\n                        this.onDirtyDiffUpdateEmitter.fire(update);\n                    }\n                }));\n            }\n            editorWidget.disposed.connect(() => {\n                updateTask.cancel();\n                updateTasks.delete(editorWidget);\n                toDispose.dispose();\n            });\n            updateTask();\n        });\n        const runUpdateTasks = () => {\n            for (const updateTask of updateTasks.values()) {\n                updateTask();\n            }\n        };\n        this.scmService.onDidAddRepository(({ provider }) => {\n            provider.onDidChange(runUpdateTasks);\n            provider.onDidChangeResources?.(runUpdateTasks);\n        });\n        this.scmService.onDidChangeSelectedRepository(runUpdateTasks);\n    }\n\n    async applyEditorDecorations(editor: TextEditor): Promise<void> {\n        if (!editor.shouldDisplayDirtyDiff()) {\n            return;\n        }\n        const currentRepo = this.scmService.selectedRepository;\n        if (currentRepo) {\n            try {\n                // Currently, the uri used here is specific to vscode.git; other SCM providers are thus not supported.\n                // See https://github.com/eclipse-theia/theia/pull/13104#discussion_r1494540628 for a detailed discussion.\n                const query = { path: editor.uri['codeUri'].fsPath, ref: '~' };\n                const uri = editor.uri.withScheme(currentRepo.provider.id).withQuery(JSON.stringify(query));\n                const previousResource = await this.resourceProvider(uri);\n                try {\n                    const previousContent = await previousResource.readContents();\n                    if (!editor.shouldDisplayDirtyDiff()) { // check again; it might have changed in the meantime, since this is an async method\n                        return;\n                    }\n                    const previousLines = ContentLines.fromString(previousContent);\n                    const currentLines = ContentLines.fromTextEditorDocument(editor.document);\n                    const dirtyDiff = this.diffComputer.computeDirtyDiff(ContentLines.arrayLike(previousLines), ContentLines.arrayLike(currentLines));\n                    const update = { editor, previousRevisionUri: uri, ...dirtyDiff } satisfies DirtyDiffUpdate;\n                    this.decorator.applyDecorations(update);\n                    this.onDirtyDiffUpdateEmitter.fire(update);\n                } finally {\n                    previousResource.dispose();\n                }\n            } catch (e) {\n                // Scm resource may not be found, do nothing.\n            }\n        }\n    }\n\n    protected supportsDirtyDiff(editor: TextEditor): boolean {\n        return editor.shouldDisplayDirtyDiff() || !!editor.onShouldDisplayDirtyDiffChanged;\n    }\n\n    protected createUpdateTask(editor: TextEditor): { (): void; cancel(): void; } {\n        return throttle(() => this.applyEditorDecorations(editor), 500);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { TextEditorDocument } from '@theia/editor/lib/browser';\n\nexport interface ContentLines extends ArrayLike<string> {\n    readonly length: number,\n    getLineContent: (line: number) => string,\n}\n\nexport interface ContentLinesArrayLike extends ContentLines, ArrayLike<string> {\n    [Symbol.iterator]: () => IterableIterator<string>,\n    readonly [n: number]: string;\n}\n\nexport namespace ContentLines {\n    const NL = '\\n'.charCodeAt(0);\n    const CR = '\\r'.charCodeAt(0);\n\n    export function fromString(content: string): ContentLines {\n        const computeLineStarts: (s: string) => number[] = s => {\n            const result: number[] = [0];\n            for (let i = 0; i < s.length; i++) {\n                const chr = s.charCodeAt(i);\n                if (chr === CR) {\n                    if (i + 1 < s.length && s.charCodeAt(i + 1) === NL) {\n                        result[result.length] = i + 2;\n                        i++;\n                    } else {\n                        result[result.length] = i + 1;\n                    }\n                } else if (chr === NL) {\n                    result[result.length] = i + 1;\n                }\n            }\n            return result;\n        };\n        const lineStarts = computeLineStarts(content);\n\n        return {\n            length: lineStarts.length,\n            getLineContent: line => {\n                if (line >= lineStarts.length) {\n                    throw new Error('line index out of bounds');\n                }\n                const start = lineStarts[line];\n                let end = (line === lineStarts.length - 1) ? undefined : lineStarts[line + 1] - 1;\n                if (!!end && content.charCodeAt(end - 1) === CR) {\n                    end--; // ignore CR at the end\n                }\n                const lineContent = content.substring(start, end);\n                return lineContent;\n            }\n        };\n    }\n\n    export function fromTextEditorDocument(document: TextEditorDocument): ContentLines {\n        return {\n            length: document.lineCount,\n            getLineContent: line => document.getLineContent(line + 1),\n        };\n    }\n\n    export function arrayLike(lines: ContentLines): ContentLinesArrayLike {\n        return new Proxy(lines as ContentLines, getProxyHandler()) as ContentLinesArrayLike;\n    }\n\n    function getProxyHandler(): ProxyHandler<ContentLinesArrayLike> {\n        return {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            get(target: ContentLines, p: PropertyKey): any {\n                switch (p) {\n                    case 'prototype':\n                        return undefined;\n                    case 'length':\n                        return target.length;\n                    case 'slice':\n                        return (start?: number, end?: number) => {\n                            if (start !== undefined) {\n                                return [start, (end !== undefined ? end - 1 : target.length - 1)];\n                            }\n                            return [0, target.length - 1];\n                        };\n                    case Symbol.iterator:\n                        return function* (): IterableIterator<string> {\n                            for (let i = 0; i < target.length; i++) {\n                                yield target.getLineContent(i);\n                            }\n                        };\n                }\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const index = Number.parseInt(p as any);\n                if (Number.isInteger(index)) {\n                    if (index >= 0 && index < target.length) {\n                        const value = target.getLineContent(index);\n                        if (value === undefined) {\n                            console.log(target);\n                        }\n                        return value;\n                    } else {\n                        return undefined;\n                    }\n                }\n                throw new Error(`get ${String(p)} not implemented`);\n            }\n        };\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as jsdiff from 'diff';\nimport { ContentLinesArrayLike } from './content-lines';\nimport { Position, Range, uinteger } from '@theia/core/shared/vscode-languageserver-protocol';\n\nexport class DiffComputer {\n\n    computeDiff(previous: ContentLinesArrayLike, current: ContentLinesArrayLike): DiffResult[] {\n        const diffResult = diffArrays(previous, current);\n        return diffResult;\n    }\n\n    computeDirtyDiff(previous: ContentLinesArrayLike, current: ContentLinesArrayLike): DirtyDiff {\n        const changes: Change[] = [];\n        const diffResult = this.computeDiff(previous, current);\n        let currentRevisionLine = -1;\n        let previousRevisionLine = -1;\n        for (let i = 0; i < diffResult.length; i++) {\n            const change = diffResult[i];\n            const next = diffResult[i + 1];\n            if (change.added) {\n                // case: addition\n                changes.push({ previousRange: LineRange.createEmptyLineRange(previousRevisionLine + 1), currentRange: toLineRange(change) });\n                currentRevisionLine += change.count!;\n            } else if (change.removed && next && next.added) {\n                const isFirstChange = i === 0;\n                const isLastChange = i === diffResult.length - 2;\n                const isNextEmptyLine = next.value.length > 0 && current[next.value[0]].length === 0;\n                const isPrevEmptyLine = change.value.length > 0 && previous[change.value[0]].length === 0;\n\n                if (isFirstChange && isNextEmptyLine) {\n                    // special case: removing at the beginning\n                    changes.push({ previousRange: toLineRange(change), currentRange: LineRange.createEmptyLineRange(0) });\n                    previousRevisionLine += change.count!;\n                } else if (isFirstChange && isPrevEmptyLine) {\n                    // special case: adding at the beginning\n                    changes.push({ previousRange: LineRange.createEmptyLineRange(0), currentRange: toLineRange(next) });\n                    currentRevisionLine += next.count!;\n                } else if (isLastChange && isNextEmptyLine) {\n                    changes.push({ previousRange: toLineRange(change), currentRange: LineRange.createEmptyLineRange(currentRevisionLine + 2) });\n                    previousRevisionLine += change.count!;\n                } else {\n                    // default case is a modification\n                    changes.push({ previousRange: toLineRange(change), currentRange: toLineRange(next) });\n                    currentRevisionLine += next.count!;\n                    previousRevisionLine += change.count!;\n                }\n                i++; // consume next eagerly\n            } else if (change.removed && !(next && next.added)) {\n                // case: removal\n                changes.push({ previousRange: toLineRange(change), currentRange: LineRange.createEmptyLineRange(currentRevisionLine + 1) });\n                previousRevisionLine += change.count!;\n            } else {\n                // case: unchanged region\n                currentRevisionLine += change.count!;\n                previousRevisionLine += change.count!;\n            }\n        }\n        return { changes };\n    }\n\n}\n\nclass ArrayDiff extends jsdiff.Diff {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    override tokenize(value: any): any {\n        return value;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    override join(value: any): any {\n        return value;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    override removeEmpty(value: any): any {\n        return value;\n    }\n}\n\nconst arrayDiff = new ArrayDiff();\n\n/**\n * Computes diff without copying data.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction diffArrays(oldArr: ContentLinesArrayLike, newArr: ContentLinesArrayLike): DiffResult[] {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return arrayDiff.diff(oldArr as any, newArr as any) as any;\n}\n\nfunction toLineRange({ value }: DiffResult): LineRange {\n    const [start, end] = value;\n    return LineRange.create(start, end + 1);\n}\n\nexport interface DiffResult {\n    value: [number, number];\n    count?: number;\n    added?: boolean;\n    removed?: boolean;\n}\n\nexport interface DirtyDiff {\n    readonly changes: readonly Change[];\n}\n\nexport interface Change {\n    readonly previousRange: LineRange;\n    readonly currentRange: LineRange;\n}\n\nexport namespace Change {\n    export function isAddition(change: Change): boolean {\n        return LineRange.isEmpty(change.previousRange);\n    }\n    export function isRemoval(change: Change): boolean {\n        return LineRange.isEmpty(change.currentRange);\n    }\n    export function isModification(change: Change): boolean {\n        return !isAddition(change) && !isRemoval(change);\n    }\n}\n\nexport interface LineRange {\n    readonly start: number;\n    readonly end: number;\n}\n\nexport namespace LineRange {\n    export function create(start: number, end: number): LineRange {\n        if (start < 0 || end < 0 || start > end) {\n            throw new Error(`Invalid line range: { start: ${start}, end: ${end} }`);\n        }\n        return { start, end };\n    }\n    export function createSingleLineRange(line: number): LineRange {\n        return create(line, line + 1);\n    }\n    export function createEmptyLineRange(line: number): LineRange {\n        return create(line, line);\n    }\n    export function isEmpty(range: LineRange): boolean {\n        return range.start === range.end;\n    }\n    export function getStartPosition(range: LineRange): Position {\n        if (isEmpty(range)) {\n            return getEndPosition(range);\n        }\n        return Position.create(range.start, 0);\n    }\n    export function getEndPosition(range: LineRange): Position {\n        if (range.end < 1) {\n            return Position.create(0, 0);\n        }\n        return Position.create(range.end - 1, uinteger.MAX_VALUE);\n    }\n    export function toRange(range: LineRange): Range {\n        return Range.create(getStartPosition(range), getEndPosition(range));\n    }\n    export function getLineCount(range: LineRange): number {\n        return range.end - range.start;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport {\n    EditorDecoration,\n    EditorDecorationOptions,\n    OverviewRulerLane,\n    EditorDecorator,\n    TextEditor,\n    MinimapPosition\n} from '@theia/editor/lib/browser';\nimport { DirtyDiff, LineRange, Change } from './diff-computer';\nimport { URI } from '@theia/core';\n\nexport enum DirtyDiffDecorationType {\n    AddedLine = 'dirty-diff-added-line',\n    RemovedLine = 'dirty-diff-removed-line',\n    ModifiedLine = 'dirty-diff-modified-line',\n}\n\nconst AddedLineDecoration = <EditorDecorationOptions>{\n    linesDecorationsClassName: 'dirty-diff-glyph dirty-diff-added-line',\n    overviewRuler: {\n        color: {\n            id: 'editorOverviewRuler.addedForeground'\n        },\n        position: OverviewRulerLane.Left,\n    },\n    minimap: {\n        color: {\n            id: 'minimapGutter.addedBackground'\n        },\n        position: MinimapPosition.Gutter\n    },\n    isWholeLine: true\n};\n\nconst RemovedLineDecoration = <EditorDecorationOptions>{\n    linesDecorationsClassName: 'dirty-diff-glyph dirty-diff-removed-line',\n    overviewRuler: {\n        color: {\n            id: 'editorOverviewRuler.deletedForeground'\n        },\n        position: OverviewRulerLane.Left,\n    },\n    minimap: {\n        color: {\n            id: 'minimapGutter.deletedBackground'\n        },\n        position: MinimapPosition.Gutter\n    },\n    isWholeLine: false\n};\n\nconst ModifiedLineDecoration = <EditorDecorationOptions>{\n    linesDecorationsClassName: 'dirty-diff-glyph dirty-diff-modified-line',\n    overviewRuler: {\n        color: {\n            id: 'editorOverviewRuler.modifiedForeground'\n        },\n        position: OverviewRulerLane.Left,\n    },\n    minimap: {\n        color: {\n            id: 'minimapGutter.modifiedBackground'\n        },\n        position: MinimapPosition.Gutter\n    },\n    isWholeLine: true\n};\n\nfunction getEditorDecorationOptions(change: Change): EditorDecorationOptions {\n    if (Change.isAddition(change)) {\n        return AddedLineDecoration;\n    }\n    if (Change.isRemoval(change)) {\n        return RemovedLineDecoration;\n    }\n    return ModifiedLineDecoration;\n}\n\nexport interface DirtyDiffUpdate extends DirtyDiff {\n    readonly editor: TextEditor;\n    readonly previousRevisionUri?: URI;\n}\n\n@injectable()\nexport class DirtyDiffDecorator extends EditorDecorator {\n\n    applyDecorations(update: DirtyDiffUpdate): void {\n        const decorations = update.changes.map(change => this.toDeltaDecoration(change));\n        this.setDecorations(update.editor, decorations);\n    }\n\n    protected toDeltaDecoration(change: Change): EditorDecoration {\n        const range = LineRange.toRange(change.currentRange);\n        const options = getEditorDecorationOptions(change);\n        return { range, options };\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable, postConstruct } from '@theia/core/shared/inversify';\nimport { Disposable, DisposableCollection, URI } from '@theia/core';\nimport { ContextKey, ContextKeyService } from '@theia/core/lib/browser/context-key-service';\nimport { EditorManager, EditorMouseEvent, MouseTargetType, TextEditor } from '@theia/editor/lib/browser';\nimport { MonacoEditor } from '@theia/monaco/lib/browser/monaco-editor';\nimport { Change, LineRange } from './diff-computer';\nimport { DirtyDiffUpdate } from './dirty-diff-decorator';\nimport { DirtyDiffWidget, DirtyDiffWidgetFactory } from './dirty-diff-widget';\n\n@injectable()\nexport class DirtyDiffNavigator {\n\n    protected readonly controllers = new Map<TextEditor, DirtyDiffController>();\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    @inject(DirtyDiffWidgetFactory)\n    protected readonly widgetFactory: DirtyDiffWidgetFactory;\n\n    @postConstruct()\n    protected init(): void {\n        const dirtyDiffVisible: ContextKey<boolean> = this.contextKeyService.createKey('dirtyDiffVisible', false);\n        this.editorManager.onActiveEditorChanged(editorWidget => {\n            dirtyDiffVisible.set(editorWidget && this.controllers.get(editorWidget.editor)?.isShowingChange());\n        });\n        this.editorManager.onCreated(editorWidget => {\n            const { editor } = editorWidget;\n            if (editor.uri.scheme !== 'file') {\n                return;\n            }\n            const controller = this.createController(editor);\n            controller.widgetFactory = props => {\n                const widget = this.widgetFactory(props);\n                if (widget.editor === this.editorManager.activeEditor?.editor) {\n                    dirtyDiffVisible.set(true);\n                }\n                widget.onDidClose(() => {\n                    if (widget.editor === this.editorManager.activeEditor?.editor) {\n                        dirtyDiffVisible.set(false);\n                    }\n                });\n                return widget;\n            };\n            this.controllers.set(editor, controller);\n            editorWidget.disposed.connect(() => {\n                this.controllers.delete(editor);\n                controller.dispose();\n            });\n        });\n    }\n\n    handleDirtyDiffUpdate(update: DirtyDiffUpdate): void {\n        const controller = this.controllers.get(update.editor);\n        controller?.handleDirtyDiffUpdate(update);\n    }\n\n    canNavigate(): boolean {\n        return !!this.activeController?.canNavigate();\n    }\n\n    gotoNextChange(): void {\n        this.activeController?.gotoNextChange();\n    }\n\n    gotoPreviousChange(): void {\n        this.activeController?.gotoPreviousChange();\n    }\n\n    canShowChange(): boolean {\n        return !!this.activeController?.canShowChange();\n    }\n\n    showNextChange(): void {\n        this.activeController?.showNextChange();\n    }\n\n    showPreviousChange(): void {\n        this.activeController?.showPreviousChange();\n    }\n\n    isShowingChange(): boolean {\n        return !!this.activeController?.isShowingChange();\n    }\n\n    closeChangePeekView(): void {\n        this.activeController?.closeWidget();\n    }\n\n    protected get activeController(): DirtyDiffController | undefined {\n        const editor = this.editorManager.activeEditor?.editor;\n        return editor && this.controllers.get(editor);\n    }\n\n    protected createController(editor: TextEditor): DirtyDiffController {\n        return new DirtyDiffController(editor);\n    }\n}\n\nexport class DirtyDiffController implements Disposable {\n\n    protected readonly toDispose = new DisposableCollection();\n\n    widgetFactory?: DirtyDiffWidgetFactory;\n    protected widget?: DirtyDiffWidget;\n    protected dirtyDiff?: DirtyDiffUpdate;\n\n    constructor(protected readonly editor: TextEditor) {\n        editor.onMouseDown(this.handleEditorMouseDown, this, this.toDispose);\n    }\n\n    dispose(): void {\n        this.closeWidget();\n        this.toDispose.dispose();\n    }\n\n    handleDirtyDiffUpdate(dirtyDiff: DirtyDiffUpdate): void {\n        if (dirtyDiff.editor === this.editor) {\n            this.dirtyDiff = dirtyDiff;\n            if (this.widget) {\n                this.widget.changes = dirtyDiff.changes                ;\n            }\n        }\n    }\n\n    canNavigate(): boolean {\n        return !!this.changes?.length;\n    }\n\n    gotoNextChange(): void {\n        const { editor } = this;\n        const index = this.findNextClosestChange(editor.cursor.line, false);\n        const change = this.changes?.[index];\n        if (change) {\n            const position = LineRange.getStartPosition(change.currentRange);\n            editor.cursor = position;\n            editor.revealPosition(position, { vertical: 'auto' });\n        }\n    }\n\n    gotoPreviousChange(): void {\n        const { editor } = this;\n        const index = this.findPreviousClosestChange(editor.cursor.line, false);\n        const change = this.changes?.[index];\n        if (change) {\n            const position = LineRange.getStartPosition(change.currentRange);\n            editor.cursor = position;\n            editor.revealPosition(position, { vertical: 'auto' });\n        }\n    }\n\n    canShowChange(): boolean {\n        return !!(this.widget || this.widgetFactory && this.editor instanceof MonacoEditor && this.changes?.length && this.previousRevisionUri);\n    }\n\n    showNextChange(): void {\n        if (this.widget) {\n            this.widget.showNextChange();\n        } else {\n            (this.widget = this.createWidget())?.showChange(\n                this.findNextClosestChange(this.editor.cursor.line, true));\n        }\n    }\n\n    showPreviousChange(): void {\n        if (this.widget) {\n            this.widget.showPreviousChange();\n        } else {\n            (this.widget = this.createWidget())?.showChange(\n                this.findPreviousClosestChange(this.editor.cursor.line, true));\n        }\n    }\n\n    isShowingChange(): boolean {\n        return !!this.widget;\n    }\n\n    closeWidget(): void {\n        if (this.widget) {\n            this.widget.dispose();\n            this.widget = undefined;\n        }\n    }\n\n    protected get changes(): readonly Change[] | undefined {\n        return this.dirtyDiff?.changes;\n    }\n\n    protected get previousRevisionUri(): URI | undefined {\n        return this.dirtyDiff?.previousRevisionUri;\n    }\n\n    protected createWidget(): DirtyDiffWidget | undefined {\n        const { widgetFactory, editor, changes, previousRevisionUri } = this;\n        if (widgetFactory && editor instanceof MonacoEditor && changes?.length && previousRevisionUri) {\n            const widget = widgetFactory({ editor, previousRevisionUri });\n            widget.changes = changes;\n            widget.onDidClose(() => {\n                this.widget = undefined;\n            });\n            return widget;\n        }\n    }\n\n    protected findNextClosestChange(line: number, inclusive: boolean): number {\n        const length = this.changes?.length;\n        if (!length) {\n            return -1;\n        }\n        for (let i = 0; i < length; i++) {\n            const { currentRange } = this.changes![i];\n\n            if (inclusive) {\n                if (LineRange.getEndPosition(currentRange).line >= line) {\n                    return i;\n                }\n            } else {\n                if (LineRange.getStartPosition(currentRange).line > line) {\n                    return i;\n                }\n            }\n        }\n        return 0;\n    }\n\n    protected findPreviousClosestChange(line: number, inclusive: boolean): number {\n        const length = this.changes?.length;\n        if (!length) {\n            return -1;\n        }\n        for (let i = length - 1; i >= 0; i--) {\n            const { currentRange } = this.changes![i];\n\n            if (inclusive) {\n                if (LineRange.getStartPosition(currentRange).line <= line) {\n                    return i;\n                }\n            } else {\n                if (LineRange.getEndPosition(currentRange).line < line) {\n                    return i;\n                }\n            }\n        }\n        return length - 1;\n    }\n\n    protected handleEditorMouseDown({ event, target }: EditorMouseEvent): void {\n        if (event.button !== 0) {\n            return;\n        }\n        const { range, type, element } = target;\n        if (!range || type !== MouseTargetType.GUTTER_LINE_DECORATIONS || !element || element.className.indexOf('dirty-diff-glyph') < 0) {\n            return;\n        }\n        const gutterOffsetX = target.detail.offsetX - (element as HTMLElement).offsetLeft;\n        if (gutterOffsetX < -3 || gutterOffsetX > 3) { // dirty diff decoration on hover is 6px wide\n            return; // to avoid colliding with folding\n        }\n        const index = this.findNextClosestChange(range.start.line, true);\n        if (index < 0) {\n            return;\n        }\n        if (index === this.widget?.currentChangeIndex) {\n            this.closeWidget();\n            return;\n        }\n        if (!this.widget) {\n            this.widget = this.createWidget();\n        }\n        this.widget?.showChange(index);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable, postConstruct } from '@theia/core/shared/inversify';\nimport { Position, Range } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { CommandMenu, Disposable, Emitter, Event, MenuModelRegistry, MenuPath, URI, nls } from '@theia/core';\nimport { codicon } from '@theia/core/lib/browser';\nimport { ContextKeyService } from '@theia/core/lib/browser/context-key-service';\nimport { MonacoEditor } from '@theia/monaco/lib/browser/monaco-editor';\nimport { MonacoDiffEditor } from '@theia/monaco/lib/browser/monaco-diff-editor';\nimport { MonacoEditorProvider } from '@theia/monaco/lib/browser/monaco-editor-provider';\nimport { MonacoEditorPeekViewWidget, peekViewBorder, peekViewTitleBackground, peekViewTitleForeground, peekViewTitleInfoForeground }\n    from '@theia/monaco/lib/browser/monaco-editor-peek-view-widget';\nimport { Change, LineRange } from './diff-computer';\nimport { ScmColors } from '../scm-colors';\nimport * as monaco from '@theia/monaco-editor-core';\n\nexport const SCM_CHANGE_TITLE_MENU: MenuPath = ['scm-change-title-menu'];\n/** Reserved for plugin contributions, corresponds to contribution point 'scm/change/title'. */\nexport const PLUGIN_SCM_CHANGE_TITLE_MENU: MenuPath = ['plugin-scm-change-title-menu'];\n\nexport const DirtyDiffWidgetProps = Symbol('DirtyDiffWidgetProps');\nexport interface DirtyDiffWidgetProps {\n    readonly editor: MonacoEditor;\n    readonly previousRevisionUri: URI;\n}\n\nexport const DirtyDiffWidgetFactory = Symbol('DirtyDiffWidgetFactory');\nexport type DirtyDiffWidgetFactory = (props: DirtyDiffWidgetProps) => DirtyDiffWidget;\n\n@injectable()\nexport class DirtyDiffWidget implements Disposable {\n\n    private readonly onDidCloseEmitter = new Emitter<unknown>();\n    readonly onDidClose: Event<unknown> = this.onDidCloseEmitter.event;\n    protected index: number = -1;\n    private peekView: DirtyDiffPeekView;\n    private diffEditorPromise: Promise<MonacoDiffEditor>;\n    protected _changes?: readonly Change[];\n\n    constructor(\n        @inject(DirtyDiffWidgetProps) protected readonly props: DirtyDiffWidgetProps,\n        @inject(MonacoEditorProvider) readonly editorProvider: MonacoEditorProvider,\n        @inject(ContextKeyService) readonly contextKeyService: ContextKeyService,\n        @inject(MenuModelRegistry) readonly menuModelRegistry: MenuModelRegistry,\n    ) { }\n\n    @postConstruct()\n    create(): void {\n        this.peekView = new DirtyDiffPeekView(this);\n        this.peekView.onDidClose(e => this.onDidCloseEmitter.fire(e));\n        this.diffEditorPromise = this.peekView.create();\n    }\n\n    get changes(): readonly Change[] {\n        return this._changes ?? [];\n    }\n\n    set changes(changes: readonly Change[]) {\n        this.handleChangedChanges(changes);\n    }\n\n    get editor(): MonacoEditor {\n        return this.props.editor;\n    }\n\n    get uri(): URI {\n        return this.editor.uri;\n    }\n\n    get previousRevisionUri(): URI {\n        return this.props.previousRevisionUri;\n    }\n\n    get currentChange(): Change | undefined {\n        return this.changes[this.index];\n    }\n\n    get currentChangeIndex(): number {\n        return this.index;\n    }\n\n    protected handleChangedChanges(updated: readonly Change[]): void {\n        if (!updated.length) {\n            return this.dispose();\n        }\n        if (this.currentChange) {\n            const { previousRange: { start, end } } = this.currentChange;\n            // Same change or first after it.\n            const newIndex = updated.findIndex(candidate => (candidate.previousRange.start === start && candidate.previousRange.end === end)\n                || candidate.previousRange.start > start);\n            if (newIndex !== -1) {\n                this.index = newIndex;\n            } else {\n                this.index = Math.min(this.index, updated.length - 1);\n            }\n            this.showCurrentChange();\n        } else {\n            this.index = -1;\n        }\n        this._changes = updated;\n        this.updateHeading();\n    }\n\n    async showChange(index: number): Promise<void> {\n        await this.checkCreated();\n        if (index >= 0 && index < this.changes.length) {\n            this.index = index;\n            this.showCurrentChange();\n        }\n    }\n\n    showNextChange(): void {\n        this.checkCreated();\n        const index = this.index;\n        const length = this.changes.length;\n        if (length > 0 && (index < 0 || length > 1)) {\n            this.index = index < 0 ? 0 : cycle(index, 1, length);\n            this.showCurrentChange();\n        }\n    }\n\n    showPreviousChange(): void {\n        this.checkCreated();\n        const index = this.index;\n        const length = this.changes.length;\n        if (length > 0 && (index < 0 || length > 1)) {\n            this.index = index < 0 ? length - 1 : cycle(index, -1, length);\n            this.showCurrentChange();\n        }\n    }\n\n    async getContentWithSelectedChanges(predicate: (change: Change, index: number, changes: readonly Change[]) => boolean): Promise<string> {\n        await this.checkCreated();\n        const changes = this.changes.filter(predicate);\n        const { diffEditor } = await this.diffEditorPromise!;\n        const diffEditorModel = diffEditor.getModel()!;\n        return applyChanges(changes, diffEditorModel.original, diffEditorModel.modified);\n    }\n\n    dispose(): void {\n        this.peekView?.dispose();\n        this.onDidCloseEmitter.dispose();\n    }\n\n    protected showCurrentChange(): void {\n        this.updateHeading();\n        const { previousRange, currentRange } = this.changes[this.index];\n        this.peekView.show(Position.create(LineRange.getEndPosition(currentRange).line, 0),\n            this.computeHeightInLines());\n        this.diffEditorPromise.then(({ diffEditor }) => {\n            let startLine = LineRange.getStartPosition(currentRange).line;\n            let endLine = LineRange.getEndPosition(currentRange).line;\n            if (LineRange.isEmpty(currentRange)) { // the change is a removal\n                ++endLine;\n            } else if (!LineRange.isEmpty(previousRange)) { // the change is a modification\n                --startLine;\n                ++endLine;\n            }\n            diffEditor.revealLinesInCenter(startLine + 1, endLine + 1, // monaco line numbers are 1-based\n                monaco.editor.ScrollType.Immediate);\n        });\n        this.editor.focus();\n    }\n\n    protected updateHeading(): void {\n        this.peekView.setTitle(this.computePrimaryHeading(), this.computeSecondaryHeading());\n    }\n\n    protected computePrimaryHeading(): string {\n        return this.uri.path.base;\n    }\n\n    protected computeSecondaryHeading(): string {\n        const index = this.index + 1;\n        const length = this.changes.length;\n        return length > 1 ? nls.localizeByDefault('{0} of {1} changes', index, length) :\n            nls.localizeByDefault('{0} of {1} change', index, length);\n    }\n\n    protected computeHeightInLines(): number {\n        const editor = this.editor.getControl();\n        const lineHeight = editor.getOption(monaco.editor.EditorOption.lineHeight);\n        const editorHeight = editor.getLayoutInfo().height;\n        const editorHeightInLines = Math.floor(editorHeight / lineHeight);\n\n        const { previousRange, currentRange } = this.changes[this.index];\n        const changeHeightInLines = LineRange.getLineCount(currentRange) + LineRange.getLineCount(previousRange);\n\n        return Math.min(changeHeightInLines + /* padding */ 8, Math.floor(editorHeightInLines / 3));\n    }\n\n    protected async checkCreated(): Promise<MonacoDiffEditor> {\n        return this.diffEditorPromise;\n    }\n}\n\nfunction cycle(index: number, offset: -1 | 1, length: number): number {\n    return (index + offset + length) % length;\n}\n\n// adapted from https://github.com/microsoft/vscode/blob/823d54f86ee13eb357bc6e8e562e89d793f3c43b/extensions/git/src/staging.ts\nfunction applyChanges(changes: readonly Change[], original: monaco.editor.ITextModel, modified: monaco.editor.ITextModel): string {\n    const result: string[] = [];\n    let currentLine = 1;\n\n    for (const change of changes) {\n        const { previousRange, currentRange } = change;\n\n        const isInsertion = LineRange.isEmpty(previousRange);\n        const isDeletion = LineRange.isEmpty(currentRange);\n\n        const convert = (range: LineRange): [number, number] => {\n            let startLineNumber;\n            let endLineNumber;\n            if (!LineRange.isEmpty(range)) {\n                startLineNumber = range.start + 1;\n                endLineNumber = range.end;\n            } else {\n                startLineNumber = range.start;\n                endLineNumber = 0;\n            }\n            return [startLineNumber, endLineNumber];\n        };\n\n        const [originalStartLineNumber, originalEndLineNumber] = convert(previousRange);\n        const [modifiedStartLineNumber, modifiedEndLineNumber] = convert(currentRange);\n\n        let toLine = isInsertion ? originalStartLineNumber + 1 : originalStartLineNumber;\n        let toCharacter = 1;\n\n        // if this is a deletion at the very end of the document,\n        // we need to account for a newline at the end of the last line,\n        // which may have been deleted\n        if (isDeletion && originalEndLineNumber === original.getLineCount()) {\n            toLine--;\n            toCharacter = original.getLineMaxColumn(toLine);\n        }\n\n        result.push(original.getValueInRange(new monaco.Range(currentLine, 1, toLine, toCharacter)));\n\n        if (!isDeletion) {\n            let fromLine = modifiedStartLineNumber;\n            let fromCharacter = 1;\n\n            // if this is an insertion at the very end of the document,\n            // we must start the next range after the last character of the previous line,\n            // in order to take the correct eol\n            if (isInsertion && originalStartLineNumber === original.getLineCount()) {\n                fromLine--;\n                fromCharacter = modified.getLineMaxColumn(fromLine);\n            }\n\n            result.push(modified.getValueInRange(new monaco.Range(fromLine, fromCharacter, modifiedEndLineNumber + 1, 1)));\n        }\n\n        currentLine = isInsertion ? originalStartLineNumber + 1 : originalEndLineNumber + 1;\n    }\n\n    result.push(original.getValueInRange(new monaco.Range(currentLine, 1, original.getLineCount() + 1, 1)));\n\n    return result.join('');\n}\n\nclass DirtyDiffPeekView extends MonacoEditorPeekViewWidget {\n\n    private diffEditor?: MonacoDiffEditor;\n    private height?: number;\n\n    constructor(readonly widget: DirtyDiffWidget) {\n        super(widget.editor, { isResizeable: true, showArrow: true, frameWidth: 1, keepEditorSelection: true, className: 'dirty-diff' });\n    }\n\n    override async create(): Promise<MonacoDiffEditor> {\n        try {\n            this.bodyElement = document.createElement('div');\n            this.bodyElement.classList.add('body');\n            const diffEditor = await this.widget.editorProvider.createEmbeddedDiffEditor(this.editor, this.bodyElement, this.widget.previousRevisionUri);\n            this.diffEditor = diffEditor;\n            this.toDispose.push(diffEditor);\n            super.create();\n            return new Promise(resolve => {\n                // setTimeout is needed here because the non-side-by-side diff editor might still not have created the view zones;\n                // otherwise, the first change shown might not be properly revealed in the diff editor.\n                // see also https://github.com/microsoft/vscode/blob/b30900b56c4b3ca6c65d7ab92032651f4cb23f15/src/vs/workbench/contrib/scm/browser/dirtydiffDecorator.ts#L248\n                const disposable = diffEditor.diffEditor.onDidUpdateDiff(() => setTimeout(() => {\n                    resolve(diffEditor);\n                    disposable.dispose();\n                }));\n            });\n        } catch (e) {\n            this.dispose();\n            throw e;\n        }\n    }\n\n    override show(rangeOrPos: Range | Position, heightInLines: number): void {\n        const borderColor = this.getBorderColor();\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: peekViewTitleBackground,\n            primaryHeadingColor: peekViewTitleForeground,\n            secondaryHeadingColor: peekViewTitleInfoForeground\n        });\n        this.updateActions();\n        super.show(rangeOrPos, heightInLines);\n    }\n\n    private getBorderColor(): string {\n        const { currentChange } = this.widget;\n        if (!currentChange) {\n            return peekViewBorder;\n        }\n        if (Change.isAddition(currentChange)) {\n            return ScmColors.editorGutterAddedBackground;\n        } else if (Change.isRemoval(currentChange)) {\n            return ScmColors.editorGutterDeletedBackground;\n        } else {\n            return ScmColors.editorGutterModifiedBackground;\n        }\n    }\n\n    private updateActions(): void {\n        this.clearActions();\n        const { contextKeyService, menuModelRegistry } = this.widget;\n        contextKeyService.with({ originalResourceScheme: this.widget.previousRevisionUri.scheme }, () => {\n            for (const menuPath of [SCM_CHANGE_TITLE_MENU, PLUGIN_SCM_CHANGE_TITLE_MENU]) {\n                const menu = menuModelRegistry.getMenu(menuPath);\n                if (menu) {\n                    for (const item of menu.children) {\n                        if (CommandMenu.is(item)) {\n                            const { id, label, icon } = item;\n                            const itemPath = [...menuPath, id];\n                            if (icon && item.isVisible(itemPath, contextKeyService, undefined, this.widget)) {\n                                // Close editor on successful contributed action.\n                                // https://github.com/microsoft/vscode/blob/1.99.3/src/vs/workbench/contrib/scm/browser/quickDiffWidget.ts#L357-L361\n                                this.addAction(id, label, icon, item.isEnabled(itemPath, this.widget), () => {\n                                    item.run(itemPath, this.widget).then(() => this.dispose());\n                                });\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        this.addAction('dirtydiff.next', nls.localizeByDefault('Show Next Change'), codicon('arrow-down'), true,\n            () => this.widget.showNextChange());\n        this.addAction('dirtydiff.previous', nls.localizeByDefault('Show Previous Change'), codicon('arrow-up'), true,\n            () => this.widget.showPreviousChange());\n        this.addAction('peekview.close', nls.localizeByDefault('Close'), codicon('close'), true,\n            () => this.dispose());\n    }\n\n    protected override fillContainer(container: HTMLElement): void {\n        this.setCssClass('peekview-widget');\n\n        this.headElement = document.createElement('div');\n        this.headElement.classList.add('head');\n\n        container.appendChild(this.headElement);\n        container.appendChild(this.bodyElement!);\n\n        this.fillHead(this.headElement);\n    }\n\n    protected override fillHead(container: HTMLElement): void {\n        super.fillHead(container, true);\n    }\n\n    protected override doLayoutBody(height: number, width: number): void {\n        super.doLayoutBody(height, width);\n        this.layout(height, width);\n        this.height = height;\n    }\n\n    protected override onWidth(width: number): void {\n        super.onWidth(width);\n        const { height } = this;\n        if (height !== undefined) {\n            this.layout(height, width);\n        }\n    }\n\n    private layout(height: number, width: number): void {\n        this.diffEditor?.diffEditor.layout({ height, width });\n    }\n\n    protected override doRevealRange(range: Range): void {\n        this.editor.revealPosition(Position.create(range.end.line, 0), { vertical: 'centerIfOutsideViewport' });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable, postConstruct } from '@theia/core/shared/inversify';\nimport { ArrayUtils, Disposable, DisposableCollection, nls, URI } from '@theia/core';\nimport {\n    ApplicationShell, BaseWidget, FocusTracker, LabelProvider, Message, Navigatable, NavigatableWidgetOpenHandler, PanelLayout,\n    Saveable, SaveableSource, SplitPanel, StatefulWidget, StorageService, Widget, WidgetOpenerOptions\n} from '@theia/core/lib/browser';\nimport { Autorun, DerivedObservable, Observable, ObservableUtils, SettableObservable } from '@theia/core/lib/common/observable';\nimport { Range } from '@theia/editor/lib/browser';\nimport { MergeRange } from './model/merge-range';\nimport { MergeEditorModel } from './model/merge-editor-model';\nimport { MergeEditorBasePane, MergeEditorPane, MergeEditorResultPane, MergeEditorSide1Pane, MergeEditorSide2Pane, MergeEditorSidePane } from './view/merge-editor-panes';\nimport { MergeEditorViewZone, MergeEditorViewZoneComputer } from './view/merge-editor-view-zones';\nimport { MergeEditorScrollSync } from './view/merge-editor-scroll-sync';\n\nexport interface MergeUris {\n    baseUri: URI;\n    side1Uri: URI;\n    side2Uri: URI;\n    resultUri: URI;\n}\n\nexport namespace MergeEditorUri {\n\n    const SCHEME = 'merge-editor';\n\n    export function isMergeEditorUri(uri: URI): boolean {\n        return uri.scheme === SCHEME;\n    }\n\n    export function encode({ baseUri, side1Uri, side2Uri, resultUri }: MergeUris): URI {\n        return new URI().withScheme(SCHEME).withQuery(JSON.stringify([baseUri.toString(), side1Uri.toString(), side2Uri.toString(), resultUri.toString()]));\n    }\n\n    export function decode(uri: URI): MergeUris {\n        if (uri.scheme !== SCHEME) {\n            throw new Error(`The URI must have scheme ${SCHEME}. The URI was: ${uri}`);\n        }\n        const mergeUris = JSON.parse(uri.query);\n        if (!Array.isArray(mergeUris) || !mergeUris.every(mergeUri => typeof mergeUri === 'string')) {\n            throw new Error(`The URI ${uri} is not a valid URI for scheme ${SCHEME}`);\n        }\n        return {\n            baseUri: new URI(mergeUris[0]),\n            side1Uri: new URI(mergeUris[1]),\n            side2Uri: new URI(mergeUris[2]),\n            resultUri: new URI(mergeUris[3])\n        };\n    }\n}\n\nexport type MergeEditorLayoutKind = 'mixed' | 'columns';\n\nexport interface MergeEditorLayoutMode {\n    readonly kind: MergeEditorLayoutKind;\n    readonly showBase: boolean;\n    readonly showBaseAtTop: boolean;\n}\n\nexport namespace MergeEditorLayoutMode {\n    export const DEFAULT: MergeEditorLayoutMode = { kind: 'mixed', showBase: true, showBaseAtTop: false };\n}\n\nexport interface MergeEditorSideWidgetState {\n    title?: string;\n    description?: string;\n    detail?: string;\n}\n\nexport interface MergeEditorWidgetState {\n    layoutMode?: MergeEditorLayoutMode;\n    side1State?: MergeEditorSideWidgetState;\n    side2State?: MergeEditorSideWidgetState;\n}\n\n@injectable()\nexport class MergeEditorSettings {\n\n    protected static LAYOUT_MODE = 'mergeEditor/layoutMode';\n\n    @inject(StorageService)\n    protected readonly storageService: StorageService;\n\n    layoutMode = MergeEditorLayoutMode.DEFAULT;\n\n    async load(): Promise<void> {\n        await Promise.allSettled([\n            this.storageService.getData(MergeEditorSettings.LAYOUT_MODE, this.layoutMode).then(\n                layoutMode => this.layoutMode = layoutMode\n            ),\n        ]);\n    }\n\n    async save(): Promise<void> {\n        await Promise.allSettled([\n            this.storageService.setData(MergeEditorSettings.LAYOUT_MODE, this.layoutMode),\n        ]);\n    }\n}\n\n@injectable()\nexport class MergeEditor extends BaseWidget implements StatefulWidget, SaveableSource, Navigatable, ApplicationShell.TrackableWidgetProvider {\n\n    @inject(MergeEditorModel)\n    readonly model: MergeEditorModel;\n\n    @inject(MergeEditorBasePane)\n    readonly basePane: MergeEditorBasePane;\n\n    @inject(MergeEditorSide1Pane)\n    readonly side1Pane: MergeEditorSide1Pane;\n\n    @inject(MergeEditorSide2Pane)\n    readonly side2Pane: MergeEditorSide2Pane;\n\n    @inject(MergeEditorResultPane)\n    readonly resultPane: MergeEditorResultPane;\n\n    @inject(MergeEditorViewZoneComputer)\n    protected readonly viewZoneComputer: MergeEditorViewZoneComputer;\n\n    @inject(MergeEditorSettings)\n    protected readonly settings: MergeEditorSettings;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    protected readonly visibilityObservable = SettableObservable.create(true);\n    protected readonly currentPaneObservable = SettableObservable.create<MergeEditorPane | undefined>(undefined);\n    protected readonly layoutModeObservable = SettableObservable.create(MergeEditorLayoutMode.DEFAULT, {\n        isEqual: (a, b) => JSON.stringify(a) === JSON.stringify(b)\n    });\n    protected readonly currentMergeRangeObservable = this.createCurrentMergeRangeObservable();\n    protected readonly selectionInBaseObservable = this.createSelectionInBaseObservable();\n\n    protected verticalSplitPanel: SplitPanel;\n    protected horizontalSplitPanel: SplitPanel;\n\n    protected scrollSync: MergeEditorScrollSync;\n\n    @postConstruct()\n    protected init(): void {\n        this.addClass('theia-merge-editor');\n\n        const { baseUri, side1Uri, side2Uri, resultUri } = this;\n\n        this.id = MergeEditorUri.encode({ baseUri, side1Uri, side2Uri, resultUri }).toString();\n\n        const setLabels = () => {\n            this.title.label = nls.localizeByDefault('Merging: {0}', this.labelProvider.getName(resultUri));\n            this.title.iconClass = this.labelProvider.getIcon(resultUri) + ' file-icon';\n            this.resultPane.header.description = this.labelProvider.getLongName(resultUri);\n        };\n        setLabels();\n        this.toDispose.push(this.labelProvider.onDidChange(event => {\n            if (event.affects(resultUri)) {\n                setLabels();\n            }\n        }));\n\n        this.title.caption = resultUri.path.fsPath();\n        this.title.closable = true;\n\n        this.basePane.header.title.label = nls.localizeByDefault('Base');\n        this.side1Pane.header.title.label = nls.localizeByDefault('Input 1');\n        this.side2Pane.header.title.label = nls.localizeByDefault('Input 2');\n        this.resultPane.header.title.label = nls.localizeByDefault('Result');\n\n        this.panes.forEach(pane => pane.mergeEditor = this);\n\n        const layout = this.layout = new PanelLayout();\n        this.verticalSplitPanel = new SplitPanel({\n            spacing: 1, // --theia-border-width\n            orientation: 'vertical'\n        });\n        layout.addWidget(this.verticalSplitPanel);\n\n        this.horizontalSplitPanel = new SplitPanel({\n            spacing: 1, // --theia-border-width\n            orientation: 'horizontal'\n        });\n        this.verticalSplitPanel.addWidget(this.horizontalSplitPanel);\n\n        this.layoutMode = this.settings.layoutMode;\n\n        this.toDispose.push(this.scrollSync = this.createScrollSynchronizer());\n\n        this.initCurrentPaneTracker();\n    }\n\n    protected createScrollSynchronizer(): MergeEditorScrollSync {\n        return new MergeEditorScrollSync(this);\n    }\n\n    protected initCurrentPaneTracker(): void {\n        const focusTracker = new FocusTracker<MergeEditorPane>();\n        this.toDispose.push(focusTracker);\n        focusTracker.currentChanged.connect((_, { oldValue, newValue }) => {\n            oldValue?.removeClass('focused');\n            newValue?.addClass('focused');\n            this.currentPaneObservable.set(newValue || undefined);\n        });\n        this.panes.forEach(pane => focusTracker.add(pane));\n    }\n\n    protected layoutInitialized = false;\n\n    protected ensureLayoutInitialized(): void {\n        if (!this.layoutInitialized) {\n            this.layoutInitialized = true;\n            this.doInitializeLayout();\n            this.onLayoutInitialized();\n        }\n    }\n\n    protected doInitializeLayout(): void {\n        this.toDispose.push(Autorun.create(({ isFirstRun }) => {\n            const { layoutMode } = this;\n\n            const scrollState = this.scrollSync.storeScrollState();\n            const currentPane = this.currentPaneObservable.getUntracked();\n\n            this.applyLayoutMode(layoutMode);\n\n            const pane = currentPane?.isVisible ? currentPane : this.resultPane;\n            this.currentPaneObservable.set(pane);\n            pane.activate();\n\n            this.scrollSync.restoreScrollState(scrollState);\n\n            if (!isFirstRun) {\n                this.settings.layoutMode = layoutMode;\n            }\n        }));\n        let storedState: {\n            scrollState: unknown;\n            currentPane: MergeEditorPane | undefined;\n        } | undefined;\n        this.toDispose.push(ObservableUtils.autorunWithDisposables(({ toDispose }) => {\n            if (this.isShown) {\n\n                toDispose.push(this.createViewZones());\n\n                if (storedState) {\n                    const { currentPane, scrollState } = storedState;\n                    storedState = undefined;\n\n                    const pane = currentPane ?? this.resultPane;\n                    this.currentPaneObservable.set(pane);\n                    pane.activate();\n\n                    this.scrollSync.restoreScrollState(scrollState);\n                } else {\n                    this.scrollSync.update();\n                }\n            } else {\n                storedState = {\n                    scrollState: this.scrollSync.storeScrollState(),\n                    currentPane: this.currentPaneObservable.getUntracked()\n                };\n            }\n        }));\n    }\n\n    protected onLayoutInitialized(): void {\n        const shouldGoToInitialMergeRange = () => {\n            const { cursorPosition } = this.currentPane ?? this.resultPane;\n            return cursorPosition.line === 0 && cursorPosition.character === 0;\n        };\n        if (shouldGoToInitialMergeRange()) {\n            this.model.onInitialized.then(() => {\n                if (!this.isDisposed && shouldGoToInitialMergeRange()) {\n                    this.goToFirstMergeRange(mergeRange => !this.model.isMergeRangeHandled(mergeRange));\n                }\n            });\n        }\n    }\n\n    protected override onResize(msg: Widget.ResizeMessage): void {\n        super.onResize(msg);\n        if (msg.width >= 0 && msg.height >= 0) {\n            // Don't try to initialize layout until the merge editor itself is positioned.\n            // Otherwise, SplitPanel.setRelativeSizes might not work properly when initializing layout.\n            this.ensureLayoutInitialized();\n        }\n    }\n\n    get isShown(): boolean {\n        return this.visibilityObservable.get();\n    }\n\n    get currentPane(): MergeEditorPane | undefined {\n        return this.currentPaneObservable.get();\n    }\n\n    protected createCurrentMergeRangeObservable(): Observable<MergeRange | undefined> {\n        return DerivedObservable.create(() => {\n            const { currentPane } = this;\n            if (!currentPane) {\n                return undefined;\n            }\n            const { cursorLine } = currentPane;\n            return this.model.mergeRanges.find(mergeRange => {\n                const lineRange = currentPane.getLineRangeForMergeRange(mergeRange);\n                return lineRange.isEmpty ? lineRange.startLineNumber === cursorLine : lineRange.containsLine(cursorLine);\n            });\n        });\n    }\n\n    get currentMergeRange(): MergeRange | undefined {\n        return this.currentMergeRangeObservable.get();\n    }\n\n    protected createSelectionInBaseObservable(): Observable<Range[] | undefined> {\n        return DerivedObservable.create(() => {\n            const { currentPane } = this;\n            return currentPane?.selection?.map(range => {\n                if (currentPane === this.side1Pane) {\n                    return this.model.translateSideRangeToBase(range, 1);\n                }\n                if (currentPane === this.side2Pane) {\n                    return this.model.translateSideRangeToBase(range, 2);\n                }\n                if (currentPane === this.resultPane) {\n                    return this.model.translateResultRangeToBase(range);\n                }\n                return range;\n            });\n        });\n    }\n\n    get selectionInBase(): Range[] | undefined {\n        return this.selectionInBaseObservable.get();\n    }\n\n    get panes(): MergeEditorPane[] {\n        return [this.basePane, this.side1Pane, this.side2Pane, this.resultPane];\n    }\n\n    get baseUri(): URI {\n        return this.basePane.editor.uri;\n    }\n\n    get side1Uri(): URI {\n        return this.side1Pane.editor.uri;\n    }\n\n    get side1Title(): string {\n        return this.side1Pane.header.title.label;\n    }\n\n    get side2Uri(): URI {\n        return this.side2Pane.editor.uri;\n    }\n\n    get side2Title(): string {\n        return this.side2Pane.header.title.label;\n    }\n\n    get resultUri(): URI {\n        return this.resultPane.editor.uri;\n    }\n\n    storeState(): MergeEditorWidgetState {\n        const getSideState = ({ header }: MergeEditorSidePane): MergeEditorSideWidgetState => ({\n            title: header.title.label,\n            description: header.description,\n            detail: header.detail\n        });\n        return {\n            layoutMode: this.layoutMode,\n            side1State: getSideState(this.side1Pane),\n            side2State: getSideState(this.side2Pane)\n        };\n    }\n\n    restoreState(state: MergeEditorWidgetState): void {\n        const { layoutMode, side1State, side2State } = state;\n        if (layoutMode) {\n            this.layoutMode = layoutMode;\n        }\n        const restoreSideState = ({ header }: MergeEditorSidePane, { title, description, detail }: MergeEditorSideWidgetState) => {\n            if (title) {\n                header.title.label = title;\n            }\n            if (description) {\n                header.description = description;\n            }\n            if (detail) {\n                header.detail = detail;\n            }\n        };\n        if (side1State) {\n            restoreSideState(this.side1Pane, side1State);\n        }\n        if (side2State) {\n            restoreSideState(this.side2Pane, side2State);\n        }\n    }\n\n    get saveable(): Saveable {\n        return this.resultPane.editor.document;\n    }\n\n    getResourceUri(): URI | undefined {\n        return this.resultUri;\n    }\n\n    createMoveToUri(resourceUri: URI): URI | undefined {\n        const { baseUri, side1Uri, side2Uri, resultUri } = this;\n        return MergeEditorUri.encode({ baseUri, side1Uri, side2Uri, resultUri: resultUri.withPath(resourceUri.path) });\n    }\n\n    getTrackableWidgets(): Widget[] {\n        return this.panes.map(pane => pane.editorWidget);\n    }\n\n    goToFirstMergeRange(predicate: (mergeRange: MergeRange) => boolean = () => true): void {\n        const firstMergeRange = this.model.mergeRanges.find(mergeRange => predicate(mergeRange));\n        if (firstMergeRange) {\n            const pane = this.currentPane ?? this.resultPane;\n            pane.goToMergeRange(firstMergeRange);\n        }\n    }\n\n    goToNextMergeRange(predicate: (mergeRange: MergeRange) => boolean = () => true): void {\n        const pane = this.currentPane ?? this.resultPane;\n        const lineNumber = pane.cursorLine;\n        const nextMergeRange =\n            this.model.mergeRanges.find(mergeRange => predicate(mergeRange) && pane.getLineRangeForMergeRange(mergeRange).startLineNumber > lineNumber) ||\n            this.model.mergeRanges.find(mergeRange => predicate(mergeRange));\n        if (nextMergeRange) {\n            pane.goToMergeRange(nextMergeRange);\n        }\n    }\n\n    goToPreviousMergeRange(predicate: (mergeRange: MergeRange) => boolean = () => true): void {\n        const pane = this.currentPane ?? this.resultPane;\n        const lineNumber = pane.cursorLine;\n        const previousMergeRange =\n            ArrayUtils.findLast(this.model.mergeRanges, mergeRange => predicate(mergeRange) && pane.getLineRangeForMergeRange(mergeRange).endLineNumberExclusive <= lineNumber) ||\n            ArrayUtils.findLast(this.model.mergeRanges, mergeRange => predicate(mergeRange));\n        if (previousMergeRange) {\n            pane.goToMergeRange(previousMergeRange);\n        }\n    }\n\n    get layoutMode(): MergeEditorLayoutMode {\n        return this.layoutModeObservable.get();\n    }\n\n    set layoutMode(value: MergeEditorLayoutMode) {\n        this.layoutModeObservable.set(value);\n    }\n\n    get layoutKind(): MergeEditorLayoutKind {\n        return this.layoutMode.kind;\n    }\n\n    set layoutKind(kind: MergeEditorLayoutKind) {\n        this.layoutMode = {\n            ...this.layoutMode,\n            kind\n        };\n    }\n\n    get isShowingBase(): boolean {\n        return this.layoutMode.showBase;\n    }\n\n    get isShowingBaseAtTop(): boolean {\n        const { layoutMode } = this;\n        return layoutMode.showBase && layoutMode.showBaseAtTop;\n    }\n\n    toggleShowBase(): void {\n        const { layoutMode } = this;\n        this.layoutMode = {\n            ...layoutMode,\n            showBase: !layoutMode.showBase\n        };\n    }\n\n    toggleShowBaseTop(): void {\n        const { layoutMode } = this;\n        const isToggled = layoutMode.showBase && layoutMode.showBaseAtTop;\n        this.layoutMode = {\n            ...layoutMode,\n            showBaseAtTop: true,\n            showBase: !isToggled,\n        };\n    }\n\n    toggleShowBaseCenter(): void {\n        const { layoutMode } = this;\n        const isToggled = layoutMode.showBase && !layoutMode.showBaseAtTop;\n        this.layoutMode = {\n            ...layoutMode,\n            showBaseAtTop: false,\n            showBase: !isToggled,\n        };\n    }\n\n    get shouldAlignResult(): boolean {\n        return this.layoutKind === 'columns';\n    }\n\n    get shouldAlignBase(): boolean {\n        const { layoutMode } = this;\n        return layoutMode.kind === 'mixed' && layoutMode.showBase && !layoutMode.showBaseAtTop;\n    }\n\n    protected applyLayoutMode(layoutMode: MergeEditorLayoutMode): void {\n        const oldVerticalSplitWidgets = [...this.verticalSplitPanel.widgets];\n        if (!layoutMode.showBase) {\n            // eslint-disable-next-line no-null/no-null\n            this.basePane.parent = null;\n        }\n        this.horizontalSplitPanel.insertWidget(0, this.side1Pane);\n        this.horizontalSplitPanel.insertWidget(2, this.side2Pane);\n        let horizontalSplitRatio = [50, 50];\n        let verticalSplitRatio: number[];\n        if (layoutMode.kind === 'columns') {\n            horizontalSplitRatio = [33, 34, 33];\n            verticalSplitRatio = [100];\n            this.horizontalSplitPanel.insertWidget(1, this.resultPane);\n            if (layoutMode.showBase) {\n                verticalSplitRatio = [30, 70];\n                this.verticalSplitPanel.insertWidget(0, this.basePane);\n            }\n        } else {\n            verticalSplitRatio = [45, 55];\n            if (layoutMode.showBase) {\n                if (layoutMode.showBaseAtTop) {\n                    verticalSplitRatio = [30, 33, 37];\n                    this.verticalSplitPanel.insertWidget(0, this.basePane);\n                } else {\n                    horizontalSplitRatio = [33, 34, 33];\n                    this.horizontalSplitPanel.insertWidget(1, this.basePane);\n                }\n            }\n            this.verticalSplitPanel.insertWidget(2, this.resultPane);\n        }\n        this.horizontalSplitPanel.setRelativeSizes(horizontalSplitRatio);\n        // Keep the existing vertical split ratio if the layout mode change has not affected the vertical split layout.\n        if (!ArrayUtils.equals(oldVerticalSplitWidgets, this.verticalSplitPanel.widgets)) {\n            this.verticalSplitPanel.setRelativeSizes(verticalSplitRatio);\n        }\n    }\n\n    protected createViewZones(): Disposable {\n        const { baseViewZones, side1ViewZones, side2ViewZones, resultViewZones } = this.viewZoneComputer.computeViewZones(this);\n        const toDispose = new DisposableCollection();\n        const addViewZones = (pane: MergeEditorPane, viewZones: readonly MergeEditorViewZone[]) => {\n            const editor = pane.editor.getControl();\n            const viewZoneIds: string[] = [];\n            toDispose.push(Disposable.create(() => {\n                editor.changeViewZones(accessor => {\n                    for (const viewZoneId of viewZoneIds) {\n                        accessor.removeZone(viewZoneId);\n                    }\n                });\n            }));\n            editor.changeViewZones(accessor => {\n                const ctx: MergeEditorViewZone.CreationContext = {\n                    createViewZone: viewZone => viewZoneIds.push(accessor.addZone(viewZone)),\n                    register: disposable => toDispose.push(disposable)\n                };\n                for (const viewZone of viewZones) {\n                    viewZone.create(ctx);\n                }\n            });\n        };\n        addViewZones(this.basePane, baseViewZones);\n        addViewZones(this.side1Pane, side1ViewZones);\n        addViewZones(this.side2Pane, side2ViewZones);\n        addViewZones(this.resultPane, resultViewZones);\n        return toDispose;\n    }\n\n    protected override onBeforeHide(msg: Message): void {\n        this.visibilityObservable.set(false);\n    }\n\n    protected override onAfterShow(msg: Message): void {\n        this.visibilityObservable.set(true);\n    }\n\n    protected override onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        const { currentPane } = this;\n        if (currentPane) {\n            currentPane.activate();\n        } else {\n            this.resultPane.activate();\n        }\n    }\n}\n\nexport interface MergeEditorOpenerOptions extends WidgetOpenerOptions {\n    widgetState?: MergeEditorWidgetState;\n}\n\n@injectable()\nexport class MergeEditorOpenHandler extends NavigatableWidgetOpenHandler<MergeEditor> {\n\n    static readonly ID = 'merge-editor-opener';\n\n    readonly id = MergeEditorOpenHandler.ID;\n\n    readonly label = nls.localizeByDefault('Merge Editor');\n\n    override canHandle(uri: URI, options?: MergeEditorOpenerOptions): number {\n        return MergeEditorUri.isMergeEditorUri(uri) ? 1000 : 0;\n    }\n\n    override open(uri: URI, options?: MergeEditorOpenerOptions): Promise<MergeEditor> {\n        return super.open(uri, options);\n    }\n\n    protected override async getOrCreateWidget(uri: URI, options?: MergeEditorOpenerOptions): Promise<MergeEditor> {\n        const widget = await super.getOrCreateWidget(uri, options);\n        if (options?.widgetState) {\n            widget.restoreState(options.widgetState);\n        }\n        return widget;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/1.96.3/src/vs/workbench/contrib/mergeEditor/browser/model/lineRange.ts\n\nimport { Range, uinteger } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { TextEditorDocument } from '@theia/editor/lib/browser/editor';\n\n/**\n * Represents a range of whole lines of text. Line numbers are zero-based.\n */\nexport class LineRange {\n    static compareByStart(a: LineRange, b: LineRange): number {\n        return a.startLineNumber - b.startLineNumber;\n    }\n\n    static fromLineNumbers(startLineNumber: number, endExclusiveLineNumber: number): LineRange {\n        return new LineRange(startLineNumber, endExclusiveLineNumber - startLineNumber);\n    }\n\n    constructor(\n        /** A zero-based number of the start line. The range starts exactly at the beginning of this line. */\n        readonly startLineNumber: number,\n        readonly lineCount: number\n    ) {\n        if (startLineNumber < 0 || lineCount < 0) {\n            throw new Error('Invalid line range: ' + this.toString());\n        }\n    }\n\n    join(other: LineRange): LineRange {\n        return LineRange.fromLineNumbers(Math.min(this.startLineNumber, other.startLineNumber), Math.max(this.endLineNumberExclusive, other.endLineNumberExclusive));\n    }\n\n    /** A zero-based number of the end line. The range ends just before the beginning of this line. */\n    get endLineNumberExclusive(): number {\n        return this.startLineNumber + this.lineCount;\n    }\n\n    get isEmpty(): boolean {\n        return this.lineCount === 0;\n    }\n\n    /**\n     * Returns `false` if there is at least one line between `this` and `other`.\n     */\n    touches(other: LineRange): boolean {\n        return this.startLineNumber <= other.endLineNumberExclusive && other.startLineNumber <= this.endLineNumberExclusive;\n    }\n\n    isAfter(other: LineRange): boolean {\n        return this.startLineNumber >= other.endLineNumberExclusive;\n    }\n\n    isBefore(other: LineRange): boolean {\n        return other.startLineNumber >= this.endLineNumberExclusive;\n    }\n\n    delta(lineDelta: number): LineRange {\n        return new LineRange(this.startLineNumber + lineDelta, this.lineCount);\n    }\n\n    deltaStart(lineDelta: number): LineRange {\n        return new LineRange(this.startLineNumber + lineDelta, this.lineCount - lineDelta);\n    }\n\n    deltaEnd(lineDelta: number): LineRange {\n        return new LineRange(this.startLineNumber, this.lineCount + lineDelta);\n    }\n\n    toString(): string {\n        return `[${this.startLineNumber},${this.endLineNumberExclusive})`;\n    }\n\n    equals(other: LineRange): boolean {\n        return this.startLineNumber === other.startLineNumber && this.lineCount === other.lineCount;\n    }\n\n    contains(other: LineRange): boolean {\n        return this.startLineNumber <= other.startLineNumber && other.endLineNumberExclusive <= this.endLineNumberExclusive;\n    }\n\n    containsLine(lineNumber: number): boolean {\n        return this.startLineNumber <= lineNumber && lineNumber < this.endLineNumberExclusive;\n    }\n\n    getLines(document: TextEditorDocument): string[] {\n        const result = new Array(this.lineCount);\n        for (let i = 0; i < this.lineCount; i++) {\n            result[i] = document.getLineContent(this.startLineNumber + i + 1); // note that getLineContent expects a one-based line number\n        }\n        return result;\n    }\n\n    toRange(): Range {\n        return Range.create(this.startLineNumber, 0, this.endLineNumberExclusive, 0);\n    }\n\n    toInclusiveRange(): Range | undefined {\n        if (this.isEmpty) {\n            return undefined;\n        }\n        return Range.create(this.startLineNumber, 0, this.endLineNumberExclusive - 1, uinteger.MAX_VALUE);\n    }\n\n    toInclusiveRangeOrEmpty(): Range {\n        if (this.isEmpty) {\n            return Range.create(this.startLineNumber, 0, this.startLineNumber, 0);\n        }\n        return Range.create(this.startLineNumber, 0, this.endLineNumberExclusive - 1, uinteger.MAX_VALUE);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/1.96.3/src/vs/workbench/contrib/mergeEditor/browser/model/textModelDiffs.ts\n\nimport { Disposable, DisposableCollection, URI } from '@theia/core';\nimport { Autorun, Observable, ObservableSignal, SettableObservable } from '@theia/core/lib/common/observable';\nimport { DiffComputer, LineRange as DiffLineRange } from '@theia/core/lib/common/diff';\nimport { MonacoEditorModel } from '@theia/monaco/lib/browser/monaco-editor-model';\nimport { DetailedLineRangeMapping, RangeMapping } from './range-mapping';\nimport { LineRange } from './line-range';\n\nexport class LiveDiff implements Disposable {\n\n    protected recomputeCount = 0;\n    protected readonly stateObservable = SettableObservable.create(LiveDiffState.Initializing);\n    protected readonly changesObservable = SettableObservable.create<readonly DetailedLineRangeMapping[]>([]);\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(\n        protected readonly originalDocument: MonacoEditorModel,\n        protected readonly modifiedDocument: MonacoEditorModel,\n        protected readonly diffComputer: DiffComputer\n    ) {\n        const recomputeSignal = ObservableSignal.create();\n\n        this.toDispose.push(Autorun.create(() => {\n            recomputeSignal.get();\n            this.recompute();\n        }));\n\n        this.toDispose.push(originalDocument.onDidChangeContent(\n            () => recomputeSignal.trigger()\n        ));\n        this.toDispose.push(modifiedDocument.onDidChangeContent(\n            () => recomputeSignal.trigger()\n        ));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    get state(): LiveDiffState {\n        return this.stateObservable.get();\n    }\n\n    get changes(): readonly DetailedLineRangeMapping[] {\n        return this.changesObservable.get();\n    }\n\n    protected recompute(): void {\n        const recomputeCount = ++this.recomputeCount;\n\n        if (this.stateObservable.getUntracked() !== LiveDiffState.Initializing) { // untracked to avoid an infinite change loop in the autorun\n            this.stateObservable.set(LiveDiffState.Updating);\n        }\n\n        this.diffComputer.computeDiff(new URI(this.originalDocument.uri), new URI(this.modifiedDocument.uri)).then(diff => {\n            if (this.toDispose.disposed || this.originalDocument.isDisposed() || this.modifiedDocument.isDisposed()) {\n                return;\n            }\n\n            if (recomputeCount !== this.recomputeCount) {\n                // There is a newer recompute call\n                return;\n            }\n\n            const toLineRange = (r: DiffLineRange) => new LineRange(r.start, r.end - r.start);\n            const changes = diff?.changes.map(change => new DetailedLineRangeMapping(\n                toLineRange(change.left),\n                this.originalDocument,\n                toLineRange(change.right),\n                this.modifiedDocument,\n                change.innerChanges?.map(innerChange => new RangeMapping(innerChange.left, innerChange.right))\n            ));\n\n            Observable.update(() => {\n                if (changes) {\n                    this.stateObservable.set(LiveDiffState.UpToDate);\n                    this.changesObservable.set(changes);\n                } else {\n                    this.stateObservable.set(LiveDiffState.Error);\n                }\n            });\n        });\n    }\n}\n\nexport const enum LiveDiffState {\n    Initializing,\n    UpToDate,\n    Updating,\n    Error\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/1.96.3/src/vs/workbench/contrib/mergeEditor/browser/model/mergeEditorModel.ts,\n// https://github.com/microsoft/vscode/blob/1.96.3/src/vs/workbench/contrib/mergeEditor/browser/view/viewModel.ts\n\nimport { inject, injectable, postConstruct } from '@theia/core/shared/inversify';\nimport { ArrayUtils, Disposable, DisposableCollection } from '@theia/core';\nimport { Autorun, DerivedObservable, Observable, ObservableUtils, SettableObservable } from '@theia/core/lib/common/observable';\nimport { DiffComputer } from '@theia/core/lib/common/diff';\nimport { Range } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { MonacoEditor } from '@theia/monaco/lib/browser/monaco-editor';\nimport { MonacoEditorModel } from '@theia/monaco/lib/browser/monaco-editor-model';\nimport { MonacoToProtocolConverter } from '@theia/monaco/lib/browser/monaco-to-protocol-converter';\nimport { MergeRange, MergeRangeAcceptedState, MergeRangeResultState, MergeSide } from './merge-range';\nimport { DetailedLineRangeMapping, DocumentLineRangeMap, DocumentRangeMap, LineRangeMapping, RangeMapping } from './range-mapping';\nimport { LiveDiff, LiveDiffState } from './live-diff';\nimport { LineRange } from './line-range';\nimport { LineRangeEdit } from './range-editing';\n\nexport const MergeEditorModelProps = Symbol('MergeEditorModelProps');\nexport interface MergeEditorModelProps {\n    readonly baseEditor: MonacoEditor;\n    readonly side1Editor: MonacoEditor;\n    readonly side2Editor: MonacoEditor;\n    readonly resultEditor: MonacoEditor;\n    readonly options?: {\n        readonly resetResult?: boolean;\n    }\n}\n\n@injectable()\nexport class MergeEditorModel implements Disposable {\n\n    @inject(MergeEditorModelProps)\n    protected readonly props: MergeEditorModelProps;\n\n    @inject(DiffComputer)\n    protected readonly diffComputer: DiffComputer;\n\n    @inject(MonacoToProtocolConverter)\n    private readonly m2p: MonacoToProtocolConverter;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    protected side1LiveDiff: LiveDiff;\n    protected side2LiveDiff: LiveDiff;\n    protected resultLiveDiff: LiveDiff;\n\n    protected shouldRecomputeHandledState = true;\n\n    protected readonly mergeRangesObservable = DerivedObservable.create(() => this.computeMergeRanges());\n    get mergeRanges(): readonly MergeRange[] {\n        return this.mergeRangesObservable.get();\n    }\n\n    protected readonly mergeRangesDataObservable = DerivedObservable.create(() => new Map(\n        this.mergeRanges.map(mergeRange => [mergeRange, this.newMergeRangeData()])\n    ));\n\n    // #region Line Range Mapping\n    protected readonly side1ToResultLineRangeMapObservable = DerivedObservable.create(() => this.newDocumentLineRangeMap(\n        this.computeSideToResultDiff(this.side1Changes, this.resultChanges)\n    ));\n    get side1ToResultLineRangeMap(): DocumentLineRangeMap {\n        return this.side1ToResultLineRangeMapObservable.get();\n    }\n\n    protected readonly resultToSide1LineRangeMapObservable = DerivedObservable.create(() => this.side1ToResultLineRangeMap.reverse());\n    get resultToSide1LineRangeMap(): DocumentLineRangeMap {\n        return this.resultToSide1LineRangeMapObservable.get();\n    }\n\n    protected readonly side2ToResultLineRangeMapObservable = DerivedObservable.create(() => this.newDocumentLineRangeMap(\n        this.computeSideToResultDiff(this.side2Changes, this.resultChanges)\n    ));\n    get side2ToResultLineRangeMap(): DocumentLineRangeMap {\n        return this.side2ToResultLineRangeMapObservable.get();\n    }\n\n    protected readonly resultToSide2LineRangeMapObservable = DerivedObservable.create(() => this.side2ToResultLineRangeMap.reverse());\n    get resultToSide2LineRangeMap(): DocumentLineRangeMap {\n        return this.resultToSide2LineRangeMapObservable.get();\n    }\n\n    protected readonly baseToSide1LineRangeMapObservable = DerivedObservable.create(() => this.newDocumentLineRangeMap(this.side1Changes));\n    get baseToSide1LineRangeMap(): DocumentLineRangeMap {\n        return this.baseToSide1LineRangeMapObservable.get();\n    }\n\n    protected readonly side1ToBaseLineRangeMapObservable = DerivedObservable.create(() => this.baseToSide1LineRangeMap.reverse());\n    get side1ToBaseLineRangeMap(): DocumentLineRangeMap {\n        return this.side1ToBaseLineRangeMapObservable.get();\n    }\n\n    protected readonly baseToSide2LineRangeMapObservable = DerivedObservable.create(() => this.newDocumentLineRangeMap(this.side2Changes));\n    get baseToSide2LineRangeMap(): DocumentLineRangeMap {\n        return this.baseToSide2LineRangeMapObservable.get();\n    }\n\n    protected readonly side2ToBaseLineRangeMapObservable = DerivedObservable.create(() => this.baseToSide2LineRangeMap.reverse());\n    get side2ToBaseLineRangeMap(): DocumentLineRangeMap {\n        return this.side2ToBaseLineRangeMapObservable.get();\n    }\n\n    protected readonly baseToResultLineRangeMapObservable = DerivedObservable.create(() => this.newDocumentLineRangeMap(this.resultChanges));\n    get baseToResultLineRangeMap(): DocumentLineRangeMap {\n        return this.baseToResultLineRangeMapObservable.get();\n    }\n\n    protected readonly resultToBaseLineRangeMapObservable = DerivedObservable.create(() => this.baseToResultLineRangeMap.reverse());\n    get resultToBaseLineRangeMap(): DocumentLineRangeMap {\n        return this.resultToBaseLineRangeMapObservable.get();\n    }\n    // #endregion\n\n    // #region Range Mapping\n    protected readonly baseToSide1RangeMapObservable = DerivedObservable.create(() => this.newDocumentRangeMap(\n        this.side1Changes.flatMap(change => change.rangeMappings)\n    ));\n    get baseToSide1RangeMap(): DocumentRangeMap {\n        return this.baseToSide1RangeMapObservable.get();\n    }\n\n    protected readonly side1ToBaseRangeMapObservable = DerivedObservable.create(() => this.baseToSide1RangeMap.reverse());\n    get side1ToBaseRangeMap(): DocumentRangeMap {\n        return this.side1ToBaseRangeMapObservable.get();\n    }\n\n    protected readonly baseToSide2RangeMapObservable = DerivedObservable.create(() => this.newDocumentRangeMap(\n        this.side2Changes.flatMap(change => change.rangeMappings)\n    ));\n    get baseToSide2RangeMap(): DocumentRangeMap {\n        return this.baseToSide2RangeMapObservable.get();\n    }\n\n    protected readonly side2ToBaseRangeMapObservable = DerivedObservable.create(() => this.baseToSide2RangeMap.reverse());\n    get side2ToBaseRangeMap(): DocumentRangeMap {\n        return this.side2ToBaseRangeMapObservable.get();\n    }\n\n    protected readonly baseToResultRangeMapObservable = DerivedObservable.create(() => this.newDocumentRangeMap(\n        this.resultChanges.flatMap(change => change.rangeMappings)\n    ));\n    get baseToResultRangeMap(): DocumentRangeMap {\n        return this.baseToResultRangeMapObservable.get();\n    }\n\n    protected readonly resultToBaseRangeMapObservable = DerivedObservable.create(() => this.baseToResultRangeMap.reverse());\n    get resultToBaseRangeMap(): DocumentRangeMap {\n        return this.resultToBaseRangeMapObservable.get();\n    }\n    // #endregion\n\n    protected readonly diffComputingStateObservable = DerivedObservable.create(() => this.getDiffComputingState(this.side1LiveDiff, this.side2LiveDiff, this.resultLiveDiff));\n    protected readonly diffComputingStateForSidesObservable = DerivedObservable.create(() => this.getDiffComputingState(this.side1LiveDiff, this.side2LiveDiff));\n\n    readonly isUpToDateObservable = DerivedObservable.create(() => this.diffComputingStateObservable.get() === DiffComputingState.UpToDate);\n\n    protected readonly unhandledMergeRangesCountObservable = DerivedObservable.create(() => {\n        let result = 0;\n        const mergeRangesData = this.mergeRangesDataObservable.get();\n        for (const mergeRangeData of mergeRangesData.values()) {\n            if (!mergeRangeData.isHandledObservable.get()) {\n                result++;\n            }\n        }\n        return result;\n    });\n    get unhandledMergeRangesCount(): number {\n        return this.unhandledMergeRangesCountObservable.get();\n    }\n\n    protected _onInitialized: Promise<void>;\n    get onInitialized(): Promise<void> {\n        return this._onInitialized;\n    }\n\n    get baseDocument(): MonacoEditorModel {\n        return this.props.baseEditor.document;\n    }\n\n    get side1Document(): MonacoEditorModel {\n        return this.props.side1Editor.document;\n    }\n\n    get side2Document(): MonacoEditorModel {\n        return this.props.side2Editor.document;\n    }\n\n    get resultDocument(): MonacoEditorModel {\n        return this.props.resultEditor.document;\n    }\n\n    protected get resultEditor(): MonacoEditor {\n        return this.props.resultEditor;\n    }\n\n    get side1Changes(): readonly DetailedLineRangeMapping[] {\n        return this.side1LiveDiff.changes;\n    }\n\n    get side2Changes(): readonly DetailedLineRangeMapping[] {\n        return this.side2LiveDiff.changes;\n    }\n\n    get resultChanges(): readonly DetailedLineRangeMapping[] {\n        return this.resultLiveDiff.changes;\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.toDispose.push(this.side1LiveDiff = this.newLiveDiff(this.baseDocument, this.side1Document));\n        this.toDispose.push(this.side2LiveDiff = this.newLiveDiff(this.baseDocument, this.side2Document));\n        this.toDispose.push(this.resultLiveDiff = this.newLiveDiff(this.baseDocument, this.resultDocument));\n\n        this.toDispose.push(Observable.keepObserved(this.mergeRangesDataObservable));\n\n        this.toDispose.push(Observable.keepObserved(this.side1ToResultLineRangeMapObservable));\n        this.toDispose.push(Observable.keepObserved(this.resultToSide1LineRangeMapObservable));\n\n        this.toDispose.push(Observable.keepObserved(this.side2ToResultLineRangeMapObservable));\n        this.toDispose.push(Observable.keepObserved(this.resultToSide2LineRangeMapObservable));\n\n        this.toDispose.push(Observable.keepObserved(this.baseToSide1LineRangeMapObservable));\n        this.toDispose.push(Observable.keepObserved(this.side1ToBaseLineRangeMapObservable));\n\n        this.toDispose.push(Observable.keepObserved(this.baseToSide2LineRangeMapObservable));\n        this.toDispose.push(Observable.keepObserved(this.side2ToBaseLineRangeMapObservable));\n\n        this.toDispose.push(Observable.keepObserved(this.baseToResultLineRangeMapObservable));\n        this.toDispose.push(Observable.keepObserved(this.resultToBaseLineRangeMapObservable));\n\n        this.toDispose.push(Observable.keepObserved(this.baseToSide1RangeMapObservable));\n        this.toDispose.push(Observable.keepObserved(this.side1ToBaseRangeMapObservable));\n\n        this.toDispose.push(Observable.keepObserved(this.baseToSide2RangeMapObservable));\n        this.toDispose.push(Observable.keepObserved(this.side2ToBaseRangeMapObservable));\n\n        this.toDispose.push(Observable.keepObserved(this.baseToResultRangeMapObservable));\n        this.toDispose.push(Observable.keepObserved(this.resultToBaseRangeMapObservable));\n\n        const initializePromise = this.doInit();\n\n        this._onInitialized = ObservableUtils.waitForState(this.isUpToDateObservable).then(() => initializePromise);\n\n        initializePromise.then(() => {\n            this.toDispose.push(Autorun.create(() => {\n                if (!this.isUpToDateObservable.get()) {\n                    return;\n                }\n                Observable.update(() => {\n                    const mergeRangesData = this.mergeRangesDataObservable.get();\n\n                    for (const [mergeRange, mergeRangeData] of mergeRangesData) {\n                        const state = this.computeMergeRangeStateFromResult(mergeRange);\n                        mergeRangeData.resultStateObservable.set(state);\n                        if (this.shouldRecomputeHandledState) {\n                            mergeRangeData.isHandledObservable.set(state !== 'Base');\n                        }\n                    }\n\n                    this.shouldRecomputeHandledState = false;\n                });\n            }, {\n                willHandleChange: ctx => {\n                    if (ctx.isChangeOf(this.mergeRangesDataObservable)) {\n                        this.shouldRecomputeHandledState = true;\n                    }\n                    return true;\n                }\n            }));\n\n            const attachedHistory = new AttachedHistory(this.resultDocument);\n            this.toDispose.push(attachedHistory);\n            this.toDispose.push(this.resultDocument.textEditorModel.onDidChangeContent(event => {\n                if (event.isRedoing || event.isUndoing) {\n                    return;\n                }\n\n                // Mark merge ranges affected by content changes as handled.\n                const mergeRanges: MergeRange[] = [];\n\n                for (const change of event.changes) {\n                    const { start, end } = this.translateResultRangeToBase(this.m2p.asRange(change.range));\n                    const affectedMergeRanges = this.findMergeRanges(new LineRange(start.line, end.line - start.line));\n                    for (const mergeRange of affectedMergeRanges) {\n                        if (!this.isMergeRangeHandled(mergeRange)) {\n                            mergeRanges.push(mergeRange);\n                        }\n                    }\n                }\n\n                if (mergeRanges.length === 0) {\n                    return;\n                }\n\n                const markMergeRangesAsHandled = (handled: boolean) => {\n                    Observable.update(() => {\n                        const mergeRangesData = this.mergeRangesDataObservable.get();\n                        for (const mergeRange of mergeRanges) {\n                            const mergeRangeData = mergeRangesData.get(mergeRange);\n                            if (mergeRangeData) {\n                                mergeRangeData.isHandledObservable.set(handled);\n                            }\n                        }\n                    });\n                };\n                const element: IAttachedHistoryElement = {\n                    redo: () => {\n                        markMergeRangesAsHandled(true);\n                    },\n                    undo: () => {\n                        markMergeRangesAsHandled(false);\n                    }\n                };\n                attachedHistory.pushAttachedHistoryElement(element);\n                element.redo();\n            }));\n        });\n    }\n\n    protected computeMergeRangeStateFromResult(mergeRange: MergeRange): MergeRangeResultState {\n\n        const resultRange = this.getLineRangeInResult(mergeRange);\n        const existingLines = resultRange.getLines(this.resultDocument);\n\n        const states: MergeRangeAcceptedState[] = [\n            'Base',\n            'Side1',\n            'Side2',\n            'Side1Side2Smart',\n            'Side2Side1Smart',\n            'Side1Side2',\n            'Side2Side1'\n        ];\n\n        for (const state of states) {\n            const edit = mergeRange.getBaseRangeEdit(state);\n            if (ArrayUtils.equals(edit.newLines, existingLines)) {\n                return state;\n            }\n        }\n\n        return 'Unrecognized';\n    }\n\n    protected async doInit(): Promise<void> {\n        if (this.props.options?.resetResult) {\n            await this.reset();\n        }\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    isDisposed(): boolean {\n        return this.toDispose.disposed;\n    }\n\n    async reset(): Promise<void> {\n        await ObservableUtils.waitForState(this.diffComputingStateForSidesObservable, state => state === DiffComputingState.UpToDate);\n\n        this.shouldRecomputeHandledState = true;\n        this.resultDocument.textEditorModel.setValue(this.computeAutoMergedResult());\n    }\n\n    protected computeAutoMergedResult(): string {\n        const baseLines = this.baseDocument.textEditorModel.getLinesContent();\n        const side1Lines = this.side1Document.textEditorModel.getLinesContent();\n        const side2Lines = this.side2Document.textEditorModel.getLinesContent();\n\n        const resultLines: string[] = [];\n\n        function appendLinesToResult(documentLines: string[], lineRange: LineRange): void {\n            for (let i = lineRange.startLineNumber; i < lineRange.endLineNumberExclusive; i++) {\n                resultLines.push(documentLines[i]);\n            }\n        }\n\n        let baseStartLineNumber = 0;\n\n        for (const mergeRange of this.mergeRanges) {\n            appendLinesToResult(baseLines, LineRange.fromLineNumbers(baseStartLineNumber, mergeRange.baseRange.startLineNumber));\n\n            if (mergeRange.side1Changes.length === 0) {\n                appendLinesToResult(side2Lines, mergeRange.side2Range);\n            } else if (mergeRange.side2Changes.length === 0) {\n                appendLinesToResult(side1Lines, mergeRange.side1Range);\n            } else if (mergeRange.isEqualChange) {\n                appendLinesToResult(side1Lines, mergeRange.side1Range);\n            } else {\n                appendLinesToResult(baseLines, mergeRange.baseRange);\n            }\n\n            baseStartLineNumber = mergeRange.baseRange.endLineNumberExclusive;\n        }\n\n        appendLinesToResult(baseLines, LineRange.fromLineNumbers(baseStartLineNumber, baseLines.length));\n\n        return resultLines.join(this.resultDocument.textEditorModel.getEOL());\n    }\n\n    protected computeMergeRanges(): MergeRange[] {\n        return MergeRange.computeMergeRanges(this.side1Changes, this.side2Changes, this.baseDocument, this.side1Document, this.side2Document);\n    }\n\n    hasMergeRange(mergeRange: MergeRange): boolean {\n        return this.mergeRangesDataObservable.get().has(mergeRange);\n    }\n\n    protected getMergeRangeData(mergeRange: MergeRange): MergeRangeData {\n        const mergeRangeData = this.mergeRangesDataObservable.get().get(mergeRange);\n        if (!mergeRangeData) {\n            throw new Error('Unknown merge range');\n        }\n        return mergeRangeData;\n    }\n\n    getMergeRangeResultState(mergeRange: MergeRange): MergeRangeResultState {\n        return this.getMergeRangeData(mergeRange).resultStateObservable.get();\n    }\n\n    applyMergeRangeAcceptedState(mergeRange: MergeRange, state: MergeRangeAcceptedState): void {\n        if (!this.isUpToDateObservable.get()) {\n            throw new Error('Cannot apply merge range accepted state while updating');\n        }\n        if (state !== 'Base' && this.getMergeRangeResultState(mergeRange) === 'Unrecognized') {\n            throw new Error('Cannot apply merge range accepted state to an unrecognized result state');\n        }\n\n        const { originalRange: baseRange, modifiedRange: resultRange } = this.getResultLineRangeMapping(mergeRange);\n        let newLines: string[];\n        if (state === 'Base') {\n            newLines = baseRange.getLines(this.baseDocument);\n        } else {\n            if (!baseRange.equals(mergeRange.baseRange)) {\n                throw new Error('Assertion error');\n            }\n            newLines = mergeRange.getBaseRangeEdit(state).newLines;\n        }\n        const resultEdit = new LineRangeEdit(resultRange, newLines);\n        const editOperation = resultEdit.toRangeEdit(this.resultDocument.lineCount).toMonacoEdit();\n\n        const cursorState = this.resultEditor.getControl().getSelections();\n        this.resultDocument.textEditorModel.pushStackElement();\n        this.resultDocument.textEditorModel.pushEditOperations(cursorState, [editOperation], () => cursorState);\n        this.resultDocument.textEditorModel.pushStackElement();\n    }\n\n    isMergeRangeHandled(mergeRange: MergeRange): boolean {\n        return this.getMergeRangeData(mergeRange).isHandledObservable.get();\n    }\n\n    getLineRangeInResult(mergeRange: MergeRange): LineRange {\n        return this.getResultLineRangeMapping(mergeRange).modifiedRange;\n    }\n\n    protected getResultLineRangeMapping(mergeRange: MergeRange): LineRangeMapping {\n        const projectLine = (lineNumber: number): number | LineRangeMapping => {\n            let offset = 0;\n            const changes = this.resultChanges;\n            for (const change of changes) {\n                const { originalRange } = change;\n                if (originalRange.containsLine(lineNumber) || originalRange.endLineNumberExclusive === lineNumber) {\n                    return change;\n                } else if (originalRange.endLineNumberExclusive < lineNumber) {\n                    offset = change.modifiedRange.endLineNumberExclusive - originalRange.endLineNumberExclusive;\n                } else {\n                    break;\n                }\n            }\n            return lineNumber + offset;\n        };\n        let startBase = mergeRange.baseRange.startLineNumber;\n        let startResult = projectLine(startBase);\n        if (typeof startResult !== 'number') {\n            startBase = startResult.originalRange.startLineNumber;\n            startResult = startResult.modifiedRange.startLineNumber;\n        }\n        let endExclusiveBase = mergeRange.baseRange.endLineNumberExclusive;\n        let endExclusiveResult = projectLine(endExclusiveBase);\n        if (typeof endExclusiveResult !== 'number') {\n            endExclusiveBase = endExclusiveResult.originalRange.endLineNumberExclusive;\n            endExclusiveResult = endExclusiveResult.modifiedRange.endLineNumberExclusive;\n        }\n        return new LineRangeMapping(LineRange.fromLineNumbers(startBase, endExclusiveBase), LineRange.fromLineNumbers(startResult, endExclusiveResult));\n    }\n\n    translateBaseRangeToSide(range: Range, side: MergeSide): Range {\n        const rangeMap = side === 1 ? this.baseToSide1RangeMap : this.baseToSide2RangeMap;\n        return rangeMap.projectRange(range).modifiedRange;\n    }\n\n    translateSideRangeToBase(range: Range, side: MergeSide): Range {\n        const rangeMap = side === 1 ? this.side1ToBaseRangeMap : this.side2ToBaseRangeMap;\n        return rangeMap.projectRange(range).modifiedRange;\n    }\n\n    translateBaseRangeToResult(range: Range): Range {\n        return this.baseToResultRangeMap.projectRange(range).modifiedRange;\n    }\n\n    translateResultRangeToBase(range: Range): Range {\n        return this.resultToBaseRangeMap.projectRange(range).modifiedRange;\n    }\n\n    findMergeRanges(baseRange: LineRange): MergeRange[] {\n        return this.mergeRanges.filter(mergeRange => mergeRange.baseRange.touches(baseRange));\n    }\n\n    protected computeSideToResultDiff(sideChanges: readonly LineRangeMapping[], resultChanges: readonly LineRangeMapping[]): readonly LineRangeMapping[] {\n        return DocumentLineRangeMap.betweenModifiedSides(sideChanges, resultChanges).lineRangeMappings;\n    }\n\n    protected newMergeRangeData(): MergeRangeData {\n        return new MergeRangeData();\n    }\n\n    protected newLiveDiff(originalDocument: MonacoEditorModel, modifiedDocument: MonacoEditorModel): LiveDiff {\n        return new LiveDiff(originalDocument, modifiedDocument, this.diffComputer);\n    }\n\n    protected newDocumentLineRangeMap(lineRangeMappings: readonly LineRangeMapping[]): DocumentLineRangeMap {\n        return new DocumentLineRangeMap(lineRangeMappings);\n    }\n\n    protected newDocumentRangeMap(rangeMappings: readonly RangeMapping[]): DocumentRangeMap {\n        return new DocumentRangeMap(rangeMappings);\n    }\n\n    protected getDiffComputingState(...liveDiffs: LiveDiff[]): DiffComputingState {\n        const liveDiffStates = liveDiffs.map(liveDiff => liveDiff.state);\n\n        if (liveDiffStates.some(state => state === LiveDiffState.Initializing)) {\n            return DiffComputingState.Initializing;\n        }\n\n        if (liveDiffStates.some(state => state === LiveDiffState.Updating)) {\n            return DiffComputingState.Updating;\n        }\n\n        return DiffComputingState.UpToDate;\n    }\n}\n\nexport const enum DiffComputingState {\n    Initializing,\n    UpToDate,\n    Updating\n}\n\nexport class MergeRangeData {\n    readonly resultStateObservable = SettableObservable.create<MergeRangeResultState>('Base');\n    readonly isHandledObservable = SettableObservable.create(false);\n}\n\nclass AttachedHistory implements Disposable {\n    private readonly toDispose = new DisposableCollection();\n    private readonly attachedHistory: { element: IAttachedHistoryElement; altId: number }[] = [];\n\n    constructor(private readonly model: MonacoEditorModel) {\n        let previousAltId = this.model.textEditorModel.getAlternativeVersionId();\n        this.toDispose.push(model.textEditorModel.onDidChangeContent(event => {\n            const currentAltId = model.textEditorModel.getAlternativeVersionId();\n\n            if (event.isRedoing) {\n                for (const item of this.attachedHistory) {\n                    if (previousAltId < item.altId && item.altId <= currentAltId) {\n                        item.element.redo();\n                    }\n                }\n            } else if (event.isUndoing) {\n                for (let i = this.attachedHistory.length - 1; i >= 0; i--) {\n                    const item = this.attachedHistory[i];\n                    if (currentAltId < item.altId && item.altId <= previousAltId) {\n                        item.element.undo();\n                    }\n                }\n            } else {\n                // The user destroyed the redo stack by performing a non redo/undo operation.\n                while (\n                    this.attachedHistory.length > 0\n                    && this.attachedHistory[this.attachedHistory.length - 1].altId > previousAltId\n                ) {\n                    this.attachedHistory.pop();\n                }\n            }\n\n            previousAltId = currentAltId;\n        }));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    pushAttachedHistoryElement(element: IAttachedHistoryElement): void {\n        this.attachedHistory.push({ altId: this.model.textEditorModel.getAlternativeVersionId(), element });\n    }\n}\n\ninterface IAttachedHistoryElement {\n    undo(): void;\n    redo(): void;\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/1.96.3/src/vs/workbench/contrib/mergeEditor/browser/model/modifiedBaseRange.ts\n\nimport { ArrayUtils } from '@theia/core';\nimport { uinteger, Position, Range } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { TextEditorDocument } from '@theia/editor/lib/browser/editor';\nimport { DetailedLineRangeMapping, MappingAlignment } from './range-mapping';\nimport { LineRange } from './line-range';\nimport { LineRangeEdit, RangeEdit } from './range-editing';\nimport { PositionUtils, RangeUtils } from './range-utils';\n\n/**\n * Describes modifications in side 1 and side 2 for a specific range in base.\n */\nexport class MergeRange {\n\n    static computeMergeRanges(\n        side1Diff: readonly DetailedLineRangeMapping[],\n        side2Diff: readonly DetailedLineRangeMapping[],\n        baseDocument: TextEditorDocument,\n        side1Document: TextEditorDocument,\n        side2Document: TextEditorDocument\n    ): MergeRange[] {\n        const alignments = MappingAlignment.computeAlignments(side1Diff, side2Diff);\n        return alignments.map(\n            alignment => new MergeRange(\n                alignment.baseRange,\n                baseDocument,\n                alignment.side1Range,\n                alignment.side1Mappings,\n                side1Document,\n                alignment.side2Range,\n                alignment.side2Mappings,\n                side2Document\n            )\n        );\n    }\n\n    readonly side1CombinedChange = DetailedLineRangeMapping.join(this.side1Changes);\n    readonly side2CombinedChange = DetailedLineRangeMapping.join(this.side2Changes);\n    readonly isEqualChange = ArrayUtils.equals(this.side1Changes, this.side2Changes, (a, b) => a.getLineEdit().equals(b.getLineEdit()));\n\n    constructor(\n        readonly baseRange: LineRange,\n        readonly baseDocument: TextEditorDocument,\n        readonly side1Range: LineRange,\n        readonly side1Changes: readonly DetailedLineRangeMapping[],\n        readonly side1Document: TextEditorDocument,\n        readonly side2Range: LineRange,\n        readonly side2Changes: readonly DetailedLineRangeMapping[],\n        readonly side2Document: TextEditorDocument\n    ) {\n        if (side1Changes.length === 0 && side2Changes.length === 0) {\n            throw new Error('At least one change is expected');\n        }\n    }\n\n    getModifiedRange(side: MergeSide): LineRange {\n        return side === 1 ? this.side1Range : this.side2Range;\n    }\n\n    getCombinedChange(side: MergeSide): DetailedLineRangeMapping | undefined {\n        return side === 1 ? this.side1CombinedChange : this.side2CombinedChange;\n    }\n\n    getChanges(side: MergeSide): readonly DetailedLineRangeMapping[] {\n        return side === 1 ? this.side1Changes : this.side2Changes;\n    }\n\n    get isConflicting(): boolean {\n        return this.side1Changes.length > 0 && this.side2Changes.length > 0 && !this.isEqualChange;\n    }\n\n    canBeSmartCombined(firstSide: MergeSide): boolean {\n        return this.isConflicting && this.smartCombineChanges(firstSide) !== undefined;\n    }\n\n    get isSmartCombinationOrderRelevant(): boolean {\n        const edit1 = this.smartCombineChanges(1);\n        const edit2 = this.smartCombineChanges(2);\n        if (!edit1 || !edit2) {\n            return false;\n        }\n        return !edit1.equals(edit2);\n    }\n\n    getBaseRangeEdit(state: MergeRangeAcceptedState): LineRangeEdit {\n        if (state === 'Base') {\n            return new LineRangeEdit(this.baseRange, this.baseRange.getLines(this.baseDocument));\n        }\n        if (state === 'Side1') {\n            return new LineRangeEdit(this.baseRange, this.side1Range.getLines(this.side1Document));\n        }\n        if (state === 'Side2') {\n            return new LineRangeEdit(this.baseRange, this.side2Range.getLines(this.side2Document));\n        }\n\n        let edit: LineRangeEdit | undefined;\n        const firstSide = state.startsWith('Side1') ? 1 : 2;\n        if (state.endsWith('Smart')) {\n            edit = this.smartCombineChanges(firstSide);\n        }\n        if (!edit) {\n            edit = this.dumbCombineChanges(firstSide);\n        }\n        return edit;\n    }\n\n    protected smartCombinationEdit1?: { value: LineRangeEdit | undefined };\n    protected smartCombinationEdit2?: { value: LineRangeEdit | undefined };\n\n    protected smartCombineChanges(firstSide: MergeSide): LineRangeEdit | undefined {\n        if (firstSide === 1 && this.smartCombinationEdit1) {\n            return this.smartCombinationEdit1.value;\n        } else if (firstSide === 2 && this.smartCombinationEdit2) {\n            return this.smartCombinationEdit2.value;\n        }\n\n        const combinedChanges =\n            this.side1Changes.flatMap(change => change.rangeMappings.map(rangeMapping => ({ rangeMapping, side: 1 }))).concat(\n                this.side2Changes.flatMap(change => change.rangeMappings.map(rangeMapping => ({ rangeMapping, side: 2 })))).sort(\n                    (a, b) => {\n                        let result = RangeUtils.compareUsingStarts(a.rangeMapping.originalRange, b.rangeMapping.originalRange);\n                        if (result === 0) {\n                            const sideWeight = (side: number) => side === firstSide ? 1 : 2;\n                            result = sideWeight(a.side) - sideWeight(b.side);\n                        }\n                        return result;\n                    }\n                );\n\n        const sortedEdits = combinedChanges.map(change => {\n            const modifiedDocument = change.side === 1 ? this.side1Document : this.side2Document;\n            return new RangeEdit(change.rangeMapping.originalRange, modifiedDocument.getText(change.rangeMapping.modifiedRange));\n        });\n\n        const edit = this.editsToLineRangeEdit(this.baseRange, sortedEdits, this.baseDocument);\n        if (firstSide === 1) {\n            this.smartCombinationEdit1 = { value: edit };\n        } else {\n            this.smartCombinationEdit2 = { value: edit };\n        }\n        return edit;\n    }\n\n    protected editsToLineRangeEdit(range: LineRange, sortedEdits: RangeEdit[], document: TextEditorDocument): LineRangeEdit | undefined {\n        let text = '';\n        const startsLineBefore = range.startLineNumber > 0;\n        let currentPosition = startsLineBefore\n            ? Position.create(\n                range.startLineNumber - 1,\n                document.getLineMaxColumn((range.startLineNumber - 1) + 1) // note that getLineMaxColumn expects a 1-based line number\n            )\n            : Position.create(range.startLineNumber, 0);\n\n        for (const edit of sortedEdits) {\n            const diffStart = edit.range.start;\n            if (!PositionUtils.isBeforeOrEqual(currentPosition, diffStart)) {\n                return undefined;\n            }\n            let originalText = document.getText(Range.create(currentPosition, diffStart));\n            if (diffStart.line >= document.lineCount) {\n                // getText doesn't include this virtual line break, as the document ends the line before.\n                // endsLineAfter will be false.\n                originalText += '\\n';\n            }\n            text += originalText;\n            text += edit.newText;\n            currentPosition = edit.range.end;\n        }\n\n        const endsLineAfter = range.endLineNumberExclusive < document.lineCount;\n        const end = endsLineAfter ?\n            Position.create(range.endLineNumberExclusive, 0) :\n            Position.create(range.endLineNumberExclusive - 1, uinteger.MAX_VALUE);\n\n        text += document.getText(Range.create(currentPosition, end));\n\n        const lines = text.split(/\\r\\n|\\r|\\n/);\n        if (startsLineBefore) {\n            if (lines[0] !== '') {\n                return undefined;\n            }\n            lines.shift();\n        }\n        if (endsLineAfter) {\n            if (lines[lines.length - 1] !== '') {\n                return undefined;\n            }\n            lines.pop();\n        }\n        return new LineRangeEdit(range, lines);\n    }\n\n    protected dumbCombinationEdit1?: LineRangeEdit;\n    protected dumbCombinationEdit2?: LineRangeEdit;\n\n    protected dumbCombineChanges(firstSide: MergeSide): LineRangeEdit {\n        if (firstSide === 1 && this.dumbCombinationEdit1) {\n            return this.dumbCombinationEdit1;\n        } else if (firstSide === 2 && this.dumbCombinationEdit2) {\n            return this.dumbCombinationEdit2;\n        }\n\n        const modifiedLines1 = this.side1Range.getLines(this.side1Document);\n        const modifiedLines2 = this.side2Range.getLines(this.side2Document);\n        const combinedLines = firstSide === 1 ? modifiedLines1.concat(modifiedLines2) : modifiedLines2.concat(modifiedLines1);\n\n        const edit = new LineRangeEdit(this.baseRange, combinedLines);\n        if (firstSide === 1) {\n            this.dumbCombinationEdit1 = edit;\n        } else {\n            this.dumbCombinationEdit2 = edit;\n        }\n        return edit;\n    }\n}\n\nexport type MergeSide = 1 | 2;\n\nexport type MergeRangeAcceptedState = 'Base' | 'Side1' | 'Side2' | 'Side1Side2' | 'Side2Side1' | 'Side1Side2Smart' | 'Side2Side1Smart';\n\nexport namespace MergeRangeAcceptedState {\n\n    export function addSide(state: MergeRangeAcceptedState, side: MergeSide, options?: { smartCombination?: boolean }): MergeRangeAcceptedState {\n        if (state === 'Base') {\n            return side === 1 ? 'Side1' : 'Side2';\n        }\n        if (state.includes('Side' + side)) {\n            return state;\n        }\n        if (side === 2) {\n            return options?.smartCombination ? 'Side1Side2Smart' : 'Side1Side2';\n        } else {\n            return options?.smartCombination ? 'Side2Side1Smart' : 'Side2Side1';\n        }\n    }\n\n    export function removeSide(state: MergeRangeAcceptedState, side: MergeSide): MergeRangeAcceptedState {\n        if (!state.includes('Side' + side)) {\n            return state;\n        }\n        if (state === 'Side' + side) {\n            return 'Base';\n        }\n        return side === 1 ? 'Side2' : 'Side1';\n    }\n}\n\nexport type MergeRangeResultState = MergeRangeAcceptedState | 'Unrecognized';\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/1.96.3/src/vs/workbench/contrib/mergeEditor/browser/model/editing.ts\n\nimport { ArrayUtils } from '@theia/core';\nimport { Range, uinteger } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { LineRange } from './line-range';\nimport * as monaco from '@theia/monaco-editor-core';\n\n/**\n * Represents an edit, expressed in whole lines:\n * At (before) {@link LineRange.startLineNumber}, delete {@link LineRange.lineCount} many lines and insert {@link newLines}.\n */\nexport class LineRangeEdit {\n    constructor(\n        readonly range: LineRange,\n        readonly newLines: string[]\n    ) { }\n\n    equals(other: LineRangeEdit): boolean {\n        return this.range.equals(other.range) && ArrayUtils.equals(this.newLines, other.newLines);\n    }\n\n    toRangeEdit(documentLineCount: number): RangeEdit {\n        if (this.range.endLineNumberExclusive < documentLineCount) {\n            return new RangeEdit(\n                Range.create(this.range.startLineNumber, 0, this.range.endLineNumberExclusive, 0),\n                this.newLines.map(s => s + '\\n').join('')\n            );\n        }\n\n        if (this.range.startLineNumber === 0) {\n            return new RangeEdit(\n                Range.create(0, 0, documentLineCount - 1, uinteger.MAX_VALUE),\n                this.newLines.join('\\n')\n            );\n        }\n\n        return new RangeEdit(\n            Range.create(this.range.startLineNumber - 1, uinteger.MAX_VALUE, documentLineCount - 1, uinteger.MAX_VALUE),\n            this.newLines.map(s => '\\n' + s).join('')\n        );\n    }\n}\n\nexport class RangeEdit {\n    constructor(\n        readonly range: Range,\n        readonly newText: string\n    ) { }\n\n    toMonacoEdit(): monaco.editor.ISingleEditOperation {\n        const { start, end } = this.range;\n        return {\n            range: {\n                startLineNumber: start.line + 1,\n                startColumn: start.character + 1,\n                endLineNumber: end.line + 1,\n                endColumn: end.character + 1\n            },\n            text: this.newText\n        };\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/1.96.3/src/vs/workbench/contrib/mergeEditor/browser/model/mapping.ts\n\nimport { ArrayUtils } from '@theia/core';\nimport { Position, Range, TextEditorDocument } from '@theia/editor/lib/browser/editor';\nimport { LineRange } from './line-range';\nimport { LineRangeEdit } from './range-editing';\nimport { PositionUtils, RangeUtils } from './range-utils';\n\n/**\n * Maps a line range in the original text document to a line range in the modified text document.\n */\nexport class LineRangeMapping {\n\n    static join(mappings: readonly LineRangeMapping[]): LineRangeMapping | undefined {\n        return mappings.reduce<undefined | LineRangeMapping>((acc, cur) => acc ? acc.join(cur) : cur, undefined);\n    }\n\n    constructor(\n        readonly originalRange: LineRange,\n        readonly modifiedRange: LineRange\n    ) { }\n\n    toString(): string {\n        return `${this.originalRange.toString()} -> ${this.modifiedRange.toString()}`;\n    }\n\n    join(other: LineRangeMapping): LineRangeMapping {\n        return new LineRangeMapping(\n            this.originalRange.join(other.originalRange),\n            this.modifiedRange.join(other.modifiedRange)\n        );\n    }\n\n    addModifiedLineDelta(delta: number): LineRangeMapping {\n        return new LineRangeMapping(\n            this.originalRange,\n            this.modifiedRange.delta(delta)\n        );\n    }\n\n    addOriginalLineDelta(delta: number): LineRangeMapping {\n        return new LineRangeMapping(\n            this.originalRange.delta(delta),\n            this.modifiedRange\n        );\n    }\n\n    reverse(): LineRangeMapping {\n        return new LineRangeMapping(this.modifiedRange, this.originalRange);\n    }\n}\n\n/**\n * Represents a total monotonous mapping of line ranges in one document to another document.\n */\nexport class DocumentLineRangeMap {\n\n    static betweenModifiedSides(\n        side1Diff: readonly LineRangeMapping[],\n        side2Diff: readonly LineRangeMapping[]\n    ): DocumentLineRangeMap {\n        const alignments = MappingAlignment.computeAlignments(side1Diff, side2Diff);\n        const mappings = alignments.map(alignment => new LineRangeMapping(alignment.side1Range, alignment.side2Range));\n        return new DocumentLineRangeMap(mappings);\n    }\n\n    constructor(\n        /**\n         * The line range mappings that define this document mapping.\n         * The number of lines between two adjacent original ranges must equal the number of lines between their corresponding modified ranges.\n         */\n        readonly lineRangeMappings: readonly LineRangeMapping[]\n    ) {\n        if (!ArrayUtils.checkAdjacentItems(lineRangeMappings,\n            (m1, m2) => m1.originalRange.isBefore(m2.originalRange) && m1.modifiedRange.isBefore(m2.modifiedRange) &&\n                m2.originalRange.startLineNumber - m1.originalRange.endLineNumberExclusive === m2.modifiedRange.startLineNumber - m1.modifiedRange.endLineNumberExclusive\n        )) {\n            throw new Error('Illegal line range mappings');\n        }\n    }\n\n    /**\n     * @param lineNumber 0-based line number in the original text document\n     */\n    projectLine(lineNumber: number): LineRangeMapping {\n        const lastBefore = ArrayUtils.findLast(this.lineRangeMappings, m => m.originalRange.startLineNumber <= lineNumber);\n        if (!lastBefore) {\n            return new LineRangeMapping(\n                new LineRange(lineNumber, 1),\n                new LineRange(lineNumber, 1)\n            );\n        }\n\n        if (lastBefore.originalRange.containsLine(lineNumber)) {\n            return lastBefore;\n        }\n\n        return new LineRangeMapping(\n            new LineRange(lineNumber, 1),\n            new LineRange(lineNumber + lastBefore.modifiedRange.endLineNumberExclusive - lastBefore.originalRange.endLineNumberExclusive, 1)\n        );\n    }\n\n    reverse(): DocumentLineRangeMap {\n        return new DocumentLineRangeMap(\n            this.lineRangeMappings.map(m => m.reverse())\n        );\n    }\n}\n\n/**\n * Aligns mappings for two modified sides with a common base range.\n */\nexport class MappingAlignment<T extends LineRangeMapping> {\n\n    static computeAlignments<T extends LineRangeMapping>(\n        side1Mappings: readonly T[],\n        side2Mappings: readonly T[]\n    ): MappingAlignment<T>[] {\n        const combinedMappings =\n            side1Mappings.map(mapping => ({ source: 0, mapping })).concat(\n                side2Mappings.map(mapping => ({ source: 1, mapping }))).sort(\n                    (a, b) => LineRange.compareByStart(a.mapping.originalRange, b.mapping.originalRange));\n\n        const currentMappings = [new Array<T>(), new Array<T>()];\n        const currentDelta = [0, 0];\n\n        const alignments = new Array<MappingAlignment<T>>();\n\n        function pushAlignment(baseRange: LineRange): void {\n            const mapping1 = LineRangeMapping.join(currentMappings[0]) || new LineRangeMapping(baseRange, baseRange.delta(currentDelta[0]));\n            const mapping2 = LineRangeMapping.join(currentMappings[1]) || new LineRangeMapping(baseRange, baseRange.delta(currentDelta[1]));\n\n            function getAlignedModifiedRange(m: LineRangeMapping): LineRange {\n                const startDelta = baseRange.startLineNumber - m.originalRange.startLineNumber;\n                const endDelta = baseRange.endLineNumberExclusive - m.originalRange.endLineNumberExclusive;\n                return new LineRange(\n                    m.modifiedRange.startLineNumber + startDelta,\n                    m.modifiedRange.lineCount - startDelta + endDelta\n                );\n            }\n\n            alignments.push(\n                new MappingAlignment(\n                    baseRange,\n                    getAlignedModifiedRange(mapping1),\n                    currentMappings[0],\n                    getAlignedModifiedRange(mapping2),\n                    currentMappings[1]\n                )\n            );\n            currentMappings[0] = [];\n            currentMappings[1] = [];\n        }\n\n        let currentBaseRange: LineRange | undefined;\n\n        for (const current of combinedMappings) {\n            const { originalRange, modifiedRange } = current.mapping;\n            if (currentBaseRange && !currentBaseRange.touches(originalRange)) {\n                pushAlignment(currentBaseRange);\n                currentBaseRange = undefined;\n            }\n            currentBaseRange = currentBaseRange ? currentBaseRange.join(originalRange) : originalRange;\n            currentMappings[current.source].push(current.mapping);\n            currentDelta[current.source] = modifiedRange.endLineNumberExclusive - originalRange.endLineNumberExclusive;\n        }\n        if (currentBaseRange) {\n            pushAlignment(currentBaseRange);\n        }\n\n        return alignments;\n    }\n\n    constructor(\n        readonly baseRange: LineRange,\n        readonly side1Range: LineRange,\n        readonly side1Mappings: readonly T[],\n        readonly side2Range: LineRange,\n        readonly side2Mappings: readonly T[]\n    ) { }\n\n    toString(): string {\n        return `${this.side1Range} <- ${this.baseRange} -> ${this.side2Range}`;\n    }\n}\n\n/**\n * A line range mapping with inner range mappings.\n */\nexport class DetailedLineRangeMapping extends LineRangeMapping {\n\n    static override join(mappings: readonly DetailedLineRangeMapping[]): DetailedLineRangeMapping | undefined {\n        return mappings.reduce<undefined | DetailedLineRangeMapping>((acc, cur) => acc ? acc.join(cur) : cur, undefined);\n    }\n\n    readonly rangeMappings: readonly RangeMapping[];\n\n    constructor(\n        originalRange: LineRange,\n        readonly originalDocument: TextEditorDocument,\n        modifiedRange: LineRange,\n        readonly modifiedDocument: TextEditorDocument,\n        rangeMappings?: readonly RangeMapping[]\n    ) {\n        super(originalRange, modifiedRange);\n\n        this.rangeMappings = rangeMappings || [new RangeMapping(originalRange.toRange(), modifiedRange.toRange())];\n    }\n\n    override join(other: DetailedLineRangeMapping): DetailedLineRangeMapping {\n        return new DetailedLineRangeMapping(\n            this.originalRange.join(other.originalRange),\n            this.originalDocument,\n            this.modifiedRange.join(other.modifiedRange),\n            this.modifiedDocument\n        );\n    }\n\n    override addModifiedLineDelta(delta: number): DetailedLineRangeMapping {\n        return new DetailedLineRangeMapping(\n            this.originalRange,\n            this.originalDocument,\n            this.modifiedRange.delta(delta),\n            this.modifiedDocument,\n            this.rangeMappings.map(m => m.addModifiedLineDelta(delta))\n        );\n    }\n\n    override addOriginalLineDelta(delta: number): DetailedLineRangeMapping {\n        return new DetailedLineRangeMapping(\n            this.originalRange.delta(delta),\n            this.originalDocument,\n            this.modifiedRange,\n            this.modifiedDocument,\n            this.rangeMappings.map(m => m.addOriginalLineDelta(delta))\n        );\n    }\n\n    override reverse(): DetailedLineRangeMapping {\n        return new DetailedLineRangeMapping(\n            this.modifiedRange,\n            this.modifiedDocument,\n            this.originalRange,\n            this.originalDocument,\n            this.rangeMappings.map(m => m.reverse())\n        );\n    }\n\n    getLineEdit(): LineRangeEdit {\n        return new LineRangeEdit(this.originalRange, this.getModifiedLines());\n    }\n\n    getReverseLineEdit(): LineRangeEdit {\n        return new LineRangeEdit(this.modifiedRange, this.getOriginalLines());\n    }\n\n    getModifiedLines(): string[] {\n        return this.modifiedRange.getLines(this.modifiedDocument);\n    }\n\n    getOriginalLines(): string[] {\n        return this.originalRange.getLines(this.originalDocument);\n    }\n}\n\n/**\n * Maps a range in the original text document to a range in the modified text document.\n */\nexport class RangeMapping {\n\n    constructor(\n        readonly originalRange: Readonly<Range>,\n        readonly modifiedRange: Readonly<Range>\n    ) { }\n\n    toString(): string {\n        function rangeToString(range: Range): string {\n            return `[${range.start.line}:${range.start.character}, ${range.end.line}:${range.end.character})`;\n        }\n\n        return `${rangeToString(this.originalRange)} -> ${rangeToString(this.modifiedRange)}`;\n    }\n\n    addModifiedLineDelta(deltaLines: number): RangeMapping {\n        return new RangeMapping(\n            this.originalRange,\n            Range.create(\n                this.modifiedRange.start.line + deltaLines,\n                this.modifiedRange.start.character,\n                this.modifiedRange.end.line + deltaLines,\n                this.modifiedRange.end.character\n            )\n        );\n    }\n\n    addOriginalLineDelta(deltaLines: number): RangeMapping {\n        return new RangeMapping(\n            Range.create(\n                this.originalRange.start.line + deltaLines,\n                this.originalRange.start.character,\n                this.originalRange.end.line + deltaLines,\n                this.originalRange.end.character\n            ),\n            this.modifiedRange\n        );\n    }\n\n    reverse(): RangeMapping {\n        return new RangeMapping(this.modifiedRange, this.originalRange);\n    }\n}\n\n/**\n * Represents a total monotonous mapping of ranges in one document to another document.\n */\nexport class DocumentRangeMap {\n\n    constructor(\n        /**\n         * The range mappings that define this document mapping.\n         */\n        readonly rangeMappings: readonly RangeMapping[]\n    ) {\n        if (!ArrayUtils.checkAdjacentItems(\n            rangeMappings,\n            (m1, m2) =>\n                RangeUtils.isBeforeOrTouching(m1.originalRange, m2.originalRange) &&\n                RangeUtils.isBeforeOrTouching(m1.modifiedRange, m2.modifiedRange)\n        )) {\n            throw new Error('Illegal range mappings');\n        }\n    }\n\n    /**\n     * @param position position in the original text document\n     */\n    projectPosition(position: Position): RangeMapping {\n        const lastBefore = ArrayUtils.findLast(this.rangeMappings, m => PositionUtils.isBeforeOrEqual(m.originalRange.start, position));\n        if (!lastBefore) {\n            return new RangeMapping(\n                Range.create(position, position),\n                Range.create(position, position)\n            );\n        }\n\n        if (RangeUtils.containsPosition(lastBefore.originalRange, position)) {\n            return lastBefore;\n        }\n\n        const relativePosition = PositionUtils.relativize(lastBefore.originalRange.end, position);\n        const modifiedRangePosition = PositionUtils.resolve(lastBefore.modifiedRange.end, relativePosition);\n\n        return new RangeMapping(\n            Range.create(position, position),\n            Range.create(modifiedRangePosition, modifiedRangePosition)\n        );\n    }\n\n    /**\n     * @param range range in the original text document\n     */\n    projectRange(range: Range): RangeMapping {\n        const start = this.projectPosition(range.start);\n        const end = this.projectPosition(range.end);\n        return new RangeMapping(\n            RangeUtils.union(start.originalRange, end.originalRange),\n            RangeUtils.union(start.modifiedRange, end.modifiedRange)\n        );\n    }\n\n    reverse(): DocumentRangeMap {\n        return new DocumentRangeMap(\n            this.rangeMappings.map(m => m.reverse())\n        );\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/1.96.3/src/vs/workbench/contrib/mergeEditor/browser/model/rangeUtils.ts,\n// https://github.com/microsoft/vscode/blob/1.96.3/src/vs/editor/common/core/range.ts,\n// https://github.com/microsoft/vscode/blob/1.96.3/src/vs/editor/common/core/position.ts,\n// https://github.com/microsoft/vscode/blob/1.96.3/src/vs/editor/common/core/textLength.ts\n\nimport { Position, Range } from '@theia/core/shared/vscode-languageserver-protocol';\n\nexport namespace RangeUtils {\n\n    export function isEmpty(range: Range): boolean {\n        return range.start.line === range.end.line && range.start.character === range.end.character;\n    }\n\n    export function containsPosition(range: Range, position: Position): boolean {\n        if (position.line < range.start.line || position.line > range.end.line) {\n            return false;\n        }\n        if (position.line === range.start.line && position.character < range.start.character) {\n            return false;\n        }\n        if (position.line === range.end.line && position.character >= range.end.character) {\n            return false;\n        }\n        return true;\n    }\n\n    export function isBeforeOrTouching(range: Range, other: Range): boolean {\n        return (\n            range.end.line < other.start.line ||\n            (range.end.line === other.start.line &&\n                range.end.character <= other.start.character)\n        );\n    }\n\n    export function union(range: Range, other: Range): Range {\n        const start = PositionUtils.isBeforeOrEqual(range.start, other.start) ? range.start : other.start;\n        const end = PositionUtils.isBeforeOrEqual(range.end, other.end) ? other.end : range.end;\n        return { start, end };\n    }\n\n    /**\n     * A function that compares ranges, useful for sorting ranges.\n     * It will first compare ranges on the start position and then on the end position.\n     */\n    export function compareUsingStarts(range: Range, other: Range): number {\n        if (range.start.line === other.start.line) {\n            if (range.start.character === other.start.character) {\n                if (range.end.line === other.end.line) {\n                    return range.end.character - other.end.character;\n                }\n                return range.end.line - other.end.line;\n            }\n            return range.start.character - other.start.character;\n        }\n        return range.start.line - other.start.line;\n    }\n}\n\nexport namespace PositionUtils {\n\n    export function isBeforeOrEqual(position: Position, other: Position): boolean {\n        return compare(position, other) <= 0;\n    }\n\n    export function compare(position: Position, other: Position): number {\n        if (position.line === other.line) {\n            return position.character - other.character;\n        }\n        return position.line - other.line;\n    }\n\n    /**\n     * Given two positions, computes the relative position of the greater position against the lesser position.\n     */\n    export function relativize(position: Position, other: Position): Position {\n        if (compare(position, other) > 0) {\n            [position, other] = [other, position];\n        }\n        if (position.line === other.line) {\n            return Position.create(0, other.character - position.character);\n        } else {\n            return Position.create(other.line - position.line, other.character);\n        }\n    }\n\n    /**\n     * Resolves the given relative position against the given position and returns the resulting position.\n     */\n    export function resolve(position: Position, relativePosition: Position): Position {\n        if (relativePosition.line === 0) {\n            return Position.create(position.line, position.character + relativePosition.character);\n        } else {\n            return Position.create(position.line + relativePosition.line, relativePosition.character);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { ArrayUtils } from '@theia/core';\nimport { LineRangeMapping } from '../model/range-mapping';\n\nexport interface DiffSpacers {\n    /**\n     * An array representing spacers in the original side of the diff.\n     * Indices are line numbers in the original document, and values are the height in lines of the spacer directly above the given line.\n     * If a value is missing for a line number, the corresponding spacer is assumed to have zero height.\n     */\n    originalSpacers: number[];\n    /**\n     * An array representing spacers in the modified side of the diff.\n     * Indices are line numbers in the modified document, and values are the height in lines of the spacer directly above the given line.\n     * If a value is missing for a line number, the corresponding spacer is assumed to have zero height.\n     */\n    modifiedSpacers: number[];\n    /**\n     * An array respresenting a mapping of line numbers for the diff.\n     * Indices are line numbers in the original document, and values are the corresponding line numbers in the modified document.\n     * If a value is missing for a line number, it is assumed that the line was deleted.\n     */\n    lineMapping: number[];\n}\n\nexport type ModifiedSideSpacers = Omit<DiffSpacers, 'originalSpacers'>;\n\nexport interface CombinedMultiDiffSpacers {\n    originalSpacers: number[];\n    modifiedSides: ModifiedSideSpacers[];\n}\n\n@injectable()\nexport class DiffSpacerService {\n\n    computeDiffSpacers(changes: readonly LineRangeMapping[], originalLineCount: number): DiffSpacers {\n        const lineMapping: number[] = [];\n        const originalSpacers: number[] = [];\n        const modifiedSpacers: number[] = [];\n        let originalLine = 0;\n        let deltaSum = 0;\n        for (const { originalRange, modifiedRange } of changes) {\n            while (originalLine < originalRange.startLineNumber + Math.min(originalRange.lineCount, modifiedRange.lineCount)) {\n                lineMapping[originalLine] = originalLine + deltaSum;\n                originalLine++;\n            }\n            const delta = modifiedRange.lineCount - originalRange.lineCount;\n            deltaSum += delta;\n            if (delta > 0) {\n                originalSpacers[originalLine] = delta;\n            }\n            if (delta < 0) {\n                modifiedSpacers[modifiedRange.endLineNumberExclusive] = -delta;\n                originalLine += -delta;\n            }\n        }\n        while (originalLine <= originalLineCount) {\n            lineMapping[originalLine] = originalLine + deltaSum;\n            originalLine++;\n        }\n        return { originalSpacers, modifiedSpacers, lineMapping };\n    }\n\n    /**\n     * Combines multiple {@link DiffSpacers} objects into a {@link CombinedMultiDiffSpacers} object with the appropriately adjusted spacers.\n     * The given {@link DiffSpacers} objects are not modified.\n     *\n     * It is assumed that all of the given {@link DiffSpacers} objects have been computed from diffs against the same original side.\n     */\n    combineMultiDiffSpacers(multiDiffSpacers: DiffSpacers[]): CombinedMultiDiffSpacers {\n        if (multiDiffSpacers.length < 2) {\n            throw new Error('At least two items are required');\n        }\n        this.checkLineMappingsHaveEqualLength(multiDiffSpacers);\n        const originalSpacers: number[] = [];\n        const modifiedSides: ModifiedSideSpacers[] = [];\n        for (const { modifiedSpacers, lineMapping } of multiDiffSpacers) {\n            const modifiedSpacersCopy = modifiedSpacers.concat(); // note: copying by concat() preserves empty slots of the sparse array\n            modifiedSides.push({ modifiedSpacers: modifiedSpacersCopy, lineMapping });\n        }\n        const originalLineCount = modifiedSides[0].lineMapping.length;\n        for (let originalLine = 0; originalLine < originalLineCount; originalLine++) {\n            const max = Math.max(...multiDiffSpacers.map(diffSpacers => diffSpacers.originalSpacers[originalLine] ?? 0));\n            if (max > 0) {\n                originalSpacers[originalLine] = max;\n                for (let i = 0; i < multiDiffSpacers.length; i++) {\n                    const delta = max - (multiDiffSpacers[i].originalSpacers[originalLine] ?? 0);\n                    if (delta > 0) {\n                        const { modifiedSpacers, lineMapping } = modifiedSides[i];\n                        const modifiedLine = this.projectLine(originalLine, lineMapping);\n                        modifiedSpacers[modifiedLine] = (modifiedSpacers[modifiedLine] ?? 0) + delta;\n                    }\n                }\n            }\n        }\n        return { originalSpacers, modifiedSides };\n    }\n\n    /**\n     * Given a {@link CombinedMultiDiffSpacers} object, excludes the original side, returning the modified sides with the appropriately adjusted spacers.\n     * The given {@link CombinedMultiDiffSpacers} object is not modified.\n     */\n    excludeOriginalSide({ modifiedSides }: CombinedMultiDiffSpacers): { modifiedSides: { modifiedSpacers: number[] }[] } {\n        if (modifiedSides.length < 2) {\n            throw new Error('At least two modified sides are required');\n        }\n        this.checkLineMappingsHaveEqualLength(modifiedSides);\n        const modifiedSidesCopy: { modifiedSpacers: number[] }[] = [];\n        for (const { modifiedSpacers } of modifiedSides) {\n            const modifiedSpacersCopy = modifiedSpacers.concat(); // note: copying by concat() preserves empty slots of the sparse array\n            modifiedSidesCopy.push({ modifiedSpacers: modifiedSpacersCopy });\n        }\n        // When the original side is excluded, the adjoining spacers in the modified sides can be deflated by removing their intersecting parts.\n        const originalLineCount = modifiedSides[0].lineMapping.length;\n        for (let originalLine = 0; originalLine < originalLineCount; originalLine++) {\n            if (modifiedSides.every(({ lineMapping }) => lineMapping[originalLine] === undefined)) {\n                modifiedSides.forEach(({ lineMapping }, index) => {\n                    const modifiedLine = this.projectLine(originalLine, lineMapping);\n                    const { modifiedSpacers } = modifiedSidesCopy[index];\n                    modifiedSpacers[modifiedLine]--;\n                });\n            }\n        }\n        return { modifiedSides: modifiedSidesCopy };\n    }\n\n    protected checkLineMappingsHaveEqualLength(items: { lineMapping: number[] }[]): void {\n        if (!ArrayUtils.checkAdjacentItems(items, (item1, item2) => item1.lineMapping.length === item2.lineMapping.length)) {\n            throw new Error('Line mappings must have equal length');\n        }\n    }\n\n    protected projectLine(originalLine: number, lineMapping: number[]): number {\n        let modifiedLine: number | undefined;\n        const originalLineCount = lineMapping.length;\n        while (originalLine < originalLineCount) {\n            modifiedLine = lineMapping[originalLine++];\n            if (modifiedLine !== undefined) {\n                return modifiedLine;\n            }\n        }\n        throw new Error('Assertion failed');\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './merge-editor-pane';\nexport * from './merge-editor-pane-header';\nexport * from './merge-editor-base-pane';\nexport * from './merge-editor-side-pane';\nexport * from './merge-editor-result-pane';\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { nls } from '@theia/core';\nimport { Autorun } from '@theia/core/lib/common/observable';\nimport { EditorDecoration, Range } from '@theia/editor/lib/browser';\nimport { MergeEditorPane } from './merge-editor-pane';\nimport { MergeRange } from '../../model/merge-range';\nimport { LineRange } from '../../model/line-range';\n\n@injectable()\nexport class MergeEditorBasePane extends MergeEditorPane {\n\n    constructor() {\n        super();\n        this.addClass('base');\n    }\n\n    override getLineRangeForMergeRange(mergeRange: MergeRange): LineRange {\n        return mergeRange.baseRange;\n    }\n\n    protected override translateBaseRange(range: Range): Range {\n        return range;\n    }\n\n    protected override onAfterMergeEditorSet(): void {\n        super.onAfterMergeEditorSet();\n        this.toDispose.push(Autorun.create(() => {\n            const { currentPane, side1Pane, side1Title, side2Pane, side2Title } = this.mergeEditor;\n            this.header.description = currentPane === this ? '' : nls.localizeByDefault('Comparing with {0}',\n                currentPane === side1Pane ? side1Title : currentPane === side2Pane ? side2Title : nls.localizeByDefault('Result')\n            );\n        }));\n    }\n\n    protected override computeEditorDecorations(): EditorDecoration[] {\n        const result: EditorDecoration[] = [];\n\n        const { model, currentPane, side1Pane, side2Pane, currentMergeRange } = this.mergeEditor;\n\n        for (const mergeRange of model.mergeRanges) {\n            const lineRange = mergeRange.baseRange;\n            result.push(this.toMergeRangeDecoration(lineRange, {\n                isHandled: model.isMergeRangeHandled(mergeRange),\n                isFocused: mergeRange === currentMergeRange,\n                isAfterEnd: lineRange.startLineNumber > model.baseDocument.lineCount,\n            }));\n        }\n\n        if (currentPane !== this) {\n            const changes = currentPane === side1Pane ? model.side1Changes : currentPane === side2Pane ? model.side2Changes : model.resultChanges;\n            result.push(...this.toChangeDecorations(changes, { diffSide: 'original' }));\n        }\n        return result;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable, postConstruct } from '@theia/core/shared/inversify';\nimport * as React from '@theia/core/shared/react';\nimport { codicon, Message, onDomEvent, ReactWidget } from '@theia/core/lib/browser';\nimport { LabelParser } from '@theia/core/lib/browser/label-parser';\n\n@injectable()\nexport class MergeEditorPaneHeader extends ReactWidget {\n\n    @inject(LabelParser)\n    protected readonly labelParser: LabelParser;\n\n    private _description = '';\n    get description(): string {\n        return this._description;\n    }\n    set description(description: string) {\n        this._description = description;\n        this.update();\n    }\n\n    private _detail = '';\n    get detail(): string {\n        return this._detail;\n    }\n    set detail(detail: string) {\n        this._detail = detail;\n        this.update();\n    }\n\n    private _toolbarItems: readonly MergeEditorPaneToolbarItem[];\n    get toolbarItems(): readonly MergeEditorPaneToolbarItem[] {\n        return this._toolbarItems;\n    }\n    set toolbarItems(toolbarItems: readonly MergeEditorPaneToolbarItem[]) {\n        this._toolbarItems = toolbarItems;\n        this.update();\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.addClass('header');\n        this.scrollOptions = undefined;\n        this.node.tabIndex = -1;\n        this.toDispose.push(onDomEvent(this.node, 'click', () => this.activate()));\n        this.title.changed.connect(this.update, this);\n    }\n\n    protected override onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        this.parent?.activate();\n    }\n\n    protected override render(): React.ReactNode {\n        return (\n            <React.Fragment>\n                <span className='title'>{this.renderWithIcons(this.title.label)}</span>\n                <span className='description'>{this.renderWithIcons(this.description)}</span>\n                <span className='detail'>{this.renderWithIcons(this.detail)}</span>\n                <span className='toolbar' onClick={this.handleToolbarClick}>{this.toolbarItems.map(toolbarItem => this.renderToolbarItem(toolbarItem))}</span>\n            </React.Fragment>\n        );\n    }\n\n    private readonly handleToolbarClick = (event: React.MouseEvent) => event.nativeEvent.stopImmediatePropagation();\n\n    protected renderWithIcons(text: string): React.ReactNode[] {\n        const result: React.ReactNode[] = [];\n        const labelParts = this.labelParser.parse(text);\n        labelParts.forEach((labelPart, index) => {\n            if (typeof labelPart === 'string') {\n                result.push(labelPart);\n            } else {\n                result.push(<span key={index} className={codicon(labelPart.name)}></span>);\n            }\n        });\n        return result;\n    }\n\n    protected renderToolbarItem({ id, label, tooltip, className, onClick }: MergeEditorPaneToolbarItem): React.ReactNode {\n        return <span key={id} title={tooltip} onClick={onClick} className={className}>{label}</span>;\n    }\n}\n\nexport interface MergeEditorPaneToolbarItem {\n    readonly id: string;\n    readonly label?: string;\n    readonly tooltip?: string;\n    readonly className?: string;\n    readonly onClick?: (event: React.MouseEvent) => void;\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable, postConstruct } from '@theia/core/shared/inversify';\nimport { Disposable, DisposableCollection } from '@theia/core';\nimport { Autorun, DerivedObservable, Observable, ObservableFromEvent } from '@theia/core/lib/common/observable';\nimport { BoxPanel, Message } from '@theia/core/lib/browser';\nimport { EditorDecoration, EditorWidget, MinimapPosition, OverviewRulerLane, Position, Range, TrackedRangeStickiness } from '@theia/editor/lib/browser';\nimport { MonacoEditor } from '@theia/monaco/lib/browser/monaco-editor';\nimport { MonacoToProtocolConverter } from '@theia/monaco/lib/browser/monaco-to-protocol-converter';\nimport { Selection } from '@theia/monaco-editor-core';\nimport { MergeEditorPaneHeader, MergeEditorPaneToolbarItem } from './merge-editor-pane-header';\nimport { MergeEditor } from '../../merge-editor';\nimport { MergeRange } from '../../model/merge-range';\nimport { DetailedLineRangeMapping } from '../../model/range-mapping';\nimport { LineRange } from '../../model/line-range';\nimport { RangeUtils } from '../../model/range-utils';\nimport { ScmColors } from '../../../scm-colors';\n\n@injectable()\nexport abstract class MergeEditorPane extends BoxPanel {\n\n    @inject(MergeEditorPaneHeader)\n    readonly header: MergeEditorPaneHeader;\n\n    @inject(EditorWidget)\n    readonly editorWidget: EditorWidget;\n\n    @inject(MonacoToProtocolConverter)\n    private readonly m2p: MonacoToProtocolConverter;\n\n    get editor(): MonacoEditor {\n        return MonacoEditor.get(this.editorWidget)!;\n    }\n\n    protected _mergeEditor: MergeEditor;\n\n    protected cursorPositionObservable: Observable<Position>;\n    protected cursorLineObservable: Observable<number>;\n    protected selectionObservable: Observable<Range[] | undefined>;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor() {\n        super({ spacing: 0 });\n        this.addClass('editor-pane');\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.cursorPositionObservable = ObservableFromEvent.create(this.editor.onCursorPositionChanged, () => this.editor.cursor);\n        this.cursorLineObservable = DerivedObservable.create(() => this.cursorPositionObservable.get().line);\n        this.selectionObservable = ObservableFromEvent.create(this.editor.getControl().onDidChangeCursorSelection, () => {\n            const selections = this.editor.getControl().getSelections();\n            return selections?.map(selection => this.m2p.asRange(selection));\n        });\n\n        BoxPanel.setStretch(this.header, 0);\n        BoxPanel.setStretch(this.editorWidget, 1);\n\n        this.addWidget(this.header);\n        this.addWidget(this.editorWidget);\n    }\n\n    override dispose(): void {\n        super.dispose();\n        this.toDispose.dispose();\n    }\n\n    get mergeEditor(): MergeEditor {\n        return this._mergeEditor;\n    }\n\n    set mergeEditor(mergeEditor: MergeEditor) {\n        if (this._mergeEditor) {\n            throw new Error('Merge editor has already been set');\n        }\n        this._mergeEditor = mergeEditor;\n        this.onAfterMergeEditorSet();\n    }\n\n    protected onAfterMergeEditorSet(): void {\n        this.initContextKeys();\n\n        const toolbarItems = DerivedObservable.create(() => this.getToolbarItems());\n        this.toDispose.push(Autorun.create(() => {\n            this.header.toolbarItems = toolbarItems.get();\n        }));\n\n        this.initSelectionSynchronizer();\n\n        let decorationIds: string[] = [];\n        const decorations = DerivedObservable.create(() => this.computeEditorDecorations());\n        const isVisible = ObservableFromEvent.create(this.editorWidget.onDidChangeVisibility, () => this.editorWidget.isVisible);\n\n        this.toDispose.push(Autorun.create(() => {\n            if (this.mergeEditor.isShown && isVisible.get()) {\n                decorationIds = this.editor.deltaDecorations({ oldDecorations: decorationIds, newDecorations: decorations.get() });\n            }\n        }));\n        this.toDispose.push(Disposable.create(() =>\n            decorationIds = this.editor.deltaDecorations({ oldDecorations: decorationIds, newDecorations: [] })\n        ));\n    }\n\n    get cursorPosition(): Position {\n        return this.cursorPositionObservable.get();\n    }\n\n    get cursorLine(): number {\n        return this.cursorLineObservable.get();\n    }\n\n    get selection(): Range[] | undefined {\n        return this.selectionObservable.get();\n    }\n\n    goToMergeRange(mergeRange: MergeRange, options?: { reveal?: boolean }): void {\n        const { editor } = this;\n        const { startLineNumber, endLineNumberExclusive } = this.getLineRangeForMergeRange(mergeRange);\n        editor.cursor = { line: startLineNumber, character: 0 };\n        const reveal = options?.reveal ?? true;\n        if (reveal) {\n            editor.getControl().revealLinesNearTop(startLineNumber + 1, endLineNumberExclusive + 1);\n        }\n    }\n\n    abstract getLineRangeForMergeRange(mergeRange: MergeRange): LineRange;\n\n    protected abstract translateBaseRange(range: Range): Range;\n\n    protected getToolbarItems(): MergeEditorPaneToolbarItem[] {\n        return [];\n    }\n\n    protected computeEditorDecorations(): EditorDecoration[] {\n        return [];\n    }\n\n    protected toMergeRangeDecoration(lineRange: LineRange,\n        { isHandled, isFocused, isAfterEnd }: { isHandled: boolean, isFocused: boolean, isAfterEnd: boolean }\n    ): EditorDecoration {\n        const blockClassNames = ['merge-range'];\n        let blockPadding: [top: number, right: number, bottom: number, left: number] = [0, 0, 0, 0];\n        if (isHandled) {\n            blockClassNames.push('handled');\n        }\n        if (isFocused) {\n            blockClassNames.push('focused');\n            blockPadding = [0, 2, 0, 2];\n        }\n        return {\n            range: lineRange.toInclusiveRangeOrEmpty(),\n            options: {\n                blockClassName: blockClassNames.join(' '),\n                blockPadding,\n                blockIsAfterEnd: isAfterEnd,\n                minimap: {\n                    position: MinimapPosition.Gutter,\n                    color: { id: isHandled ? ScmColors.handledConflictMinimapOverviewRulerColor : ScmColors.unhandledConflictMinimapOverviewRulerColor },\n                },\n                overviewRuler: {\n                    position: OverviewRulerLane.Center,\n                    color: { id: isHandled ? ScmColors.handledConflictMinimapOverviewRulerColor : ScmColors.unhandledConflictMinimapOverviewRulerColor },\n                },\n                showIfCollapsed: true,\n                stickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n            }\n        };\n    }\n\n    protected toChangeDecorations(changes: readonly DetailedLineRangeMapping[],\n        { diffSide }: { diffSide: 'original' | 'modified' }\n    ): EditorDecoration[] {\n        const result: EditorDecoration[] = [];\n        for (const change of changes) {\n            const changeRange = (diffSide === 'original' ? change.originalRange : change.modifiedRange).toInclusiveRange();\n            if (changeRange) {\n                result.push({\n                    range: changeRange,\n                    options: {\n                        className: 'diff',\n                        isWholeLine: true,\n                        stickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n                    }\n                });\n            }\n\n            for (const rangeMapping of change.rangeMappings) {\n                const range = diffSide === 'original' ? rangeMapping.originalRange : rangeMapping.modifiedRange;\n                result.push({\n                    range,\n                    options: {\n                        className: RangeUtils.isEmpty(range) ? 'diff-empty-word' : 'diff-word',\n                        showIfCollapsed: true,\n                        stickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n                    },\n                });\n            }\n        }\n        return result;\n    }\n\n    protected initContextKeys(): void {\n        const editor = this.editor.getControl();\n        editor.createContextKey('isMergeEditor', true);\n        editor.createContextKey('mergeEditorBaseUri', this.mergeEditor.baseUri.toString());\n        editor.createContextKey('mergeEditorResultUri', this.mergeEditor.resultUri.toString());\n    }\n\n    protected initSelectionSynchronizer(): void {\n        const selectionObservable = DerivedObservable.create(() => {\n            const { selectionInBase, currentPane } = this.mergeEditor;\n            if (!selectionInBase || currentPane === this) {\n                return [];\n            }\n            return selectionInBase.map(range => this.translateBaseRange(range));\n        });\n        this.toDispose.push(Autorun.create(() => {\n            const selection = selectionObservable.get();\n            if (selection.length) {\n                this.editor.getControl().setSelections(selection.map(\n                    ({ start, end }) => new Selection(start.line + 1, start.character + 1, end.line + 1, end.character + 1)\n                ));\n            }\n        }));\n    }\n\n    protected override onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        this.editorWidget.activate();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { nls } from '@theia/core';\nimport { ACTION_ITEM, codicon, ConfirmDialog, Dialog, DISABLED_CLASS } from '@theia/core/lib/browser';\nimport { ObservableUtils } from '@theia/core/lib/common/observable';\nimport { EditorDecoration, Range } from '@theia/editor/lib/browser';\nimport { MergeEditorPane } from './merge-editor-pane';\nimport { MergeEditorPaneToolbarItem } from './merge-editor-pane-header';\nimport { LineRange } from '../../model/line-range';\nimport { MergeRange } from '../../model/merge-range';\n\n@injectable()\nexport class MergeEditorResultPane extends MergeEditorPane {\n\n    constructor() {\n        super();\n        this.addClass('result');\n    }\n\n    protected override initContextKeys(): void {\n        super.initContextKeys();\n        this.editor.getControl().createContextKey('isMergeResultEditor', true);\n    }\n\n    override getLineRangeForMergeRange(mergeRange: MergeRange): LineRange {\n        return this.mergeEditor.model.getLineRangeInResult(mergeRange);\n    }\n\n    protected override translateBaseRange(range: Range): Range {\n        return this.mergeEditor.model.translateBaseRangeToResult(range);\n    }\n\n    protected goToNextUnhandledMergeRange(): void {\n        this.mergeEditor.goToNextMergeRange(mergeRange => !this.mergeEditor.model.isMergeRangeHandled(mergeRange));\n        this.mergeEditor.activate();\n    }\n\n    reset(): void {\n        new ConfirmDialog({\n            title: nls.localize('theia/scm/mergeEditor/resetConfirmationTitle', 'Do you really want to reset the merge result in this editor?'),\n            msg: nls.localize('theia/scm/mergeEditor/resetConfirmationMessage', 'This action cannot be undone.'),\n            ok: Dialog.YES,\n            cancel: Dialog.NO,\n        }).open().then(async confirmed => {\n            if (confirmed) {\n                this.activate();\n                const { model } = this.mergeEditor;\n                await model.reset();\n                await ObservableUtils.waitForState(model.isUpToDateObservable);\n                this.mergeEditor.goToFirstMergeRange(mergeRange => !model.isMergeRangeHandled(mergeRange));\n            }\n        }).catch(e => console.error(e));\n    }\n\n    protected override getToolbarItems(): MergeEditorPaneToolbarItem[] {\n        const { model } = this.mergeEditor;\n        const { unhandledMergeRangesCount } = model;\n        return [\n            {\n                id: 'nextConflict',\n                label: unhandledMergeRangesCount === 1 ?\n                    nls.localizeByDefault('{0} Conflict Remaining', unhandledMergeRangesCount) :\n                    nls.localizeByDefault('{0} Conflicts Remaining ', unhandledMergeRangesCount),\n                tooltip: unhandledMergeRangesCount ?\n                    nls.localizeByDefault('Go to next conflict') :\n                    nls.localizeByDefault('All conflicts handled, the merge can be completed now.'),\n                className: ACTION_ITEM + (unhandledMergeRangesCount ? '' : ' ' + DISABLED_CLASS),\n                onClick: unhandledMergeRangesCount ?\n                    () => this.goToNextUnhandledMergeRange() :\n                    undefined\n            },\n            {\n                id: 'reset',\n                tooltip: nls.localizeByDefault('Reset'),\n                className: codicon('discard', true),\n                onClick: () => this.reset()\n            }\n        ];\n    }\n\n    protected override computeEditorDecorations(): EditorDecoration[] {\n        const result: EditorDecoration[] = [];\n\n        const { model, currentMergeRange } = this.mergeEditor;\n\n        for (const mergeRange of model.mergeRanges) {\n            if (mergeRange) {\n                const lineRange = model.getLineRangeInResult(mergeRange);\n                result.push(this.toMergeRangeDecoration(lineRange, {\n                    isHandled: model.isMergeRangeHandled(mergeRange),\n                    isFocused: mergeRange === currentMergeRange,\n                    isAfterEnd: lineRange.startLineNumber > model.resultDocument.lineCount,\n                }));\n            }\n        }\n\n        result.push(...this.toChangeDecorations(model.resultChanges, { diffSide: 'modified' }));\n        return result;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable } from '@theia/core/shared/inversify';\nimport { nls } from '@theia/core';\nimport { ObservableUtils } from '@theia/core/lib/common/observable';\nimport { codicon, DiffUris, LabelProvider, open, OpenerService } from '@theia/core/lib/browser';\nimport { EditorDecoration, EditorOpenerOptions, Range } from '@theia/editor/lib/browser';\nimport { MergeRange, MergeRangeAcceptedState, MergeSide } from '../../model/merge-range';\nimport { MergeEditorPane } from './merge-editor-pane';\nimport { MergeEditorPaneToolbarItem } from './merge-editor-pane-header';\nimport { LineRange } from '../../model/line-range';\n\n@injectable()\nexport abstract class MergeEditorSidePane extends MergeEditorPane {\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(OpenerService)\n    protected readonly openerService: OpenerService;\n\n    abstract get mergeSide(): MergeSide;\n\n    constructor() {\n        super();\n        this.addClass('side');\n    }\n\n    override getLineRangeForMergeRange(mergeRange: MergeRange): LineRange {\n        return mergeRange.getModifiedRange(this.mergeSide);\n    }\n\n    protected override translateBaseRange(range: Range): Range {\n        return this.mergeEditor.model.translateBaseRangeToSide(range, this.mergeSide);\n    }\n\n    async acceptAllChanges(): Promise<void> {\n        const { model, resultPane } = this.mergeEditor;\n        resultPane.activate();\n        const selections = resultPane.editor.getControl().getSelections();\n        for (const mergeRange of model.mergeRanges) {\n            await ObservableUtils.waitForState(model.isUpToDateObservable);\n            resultPane.goToMergeRange(mergeRange, { reveal: false });\n            let state = model.getMergeRangeResultState(mergeRange);\n            if (state === 'Unrecognized') {\n                state = 'Base';\n            }\n            model.applyMergeRangeAcceptedState(mergeRange, MergeRangeAcceptedState.addSide(state, this.mergeSide));\n        }\n        if (selections) {\n            resultPane.editor.getControl().setSelections(selections);\n        }\n    }\n\n    compareWithBase(): void {\n        let label = this.labelProvider.getName(this.editor.uri);\n        if (label) {\n            label += ': ';\n        }\n        label += `${nls.localizeByDefault('Base')}  ${this.header.title.label}`;\n        const options: EditorOpenerOptions = { selection: { start: this.editor.cursor } };\n        open(this.openerService, DiffUris.encode(this.mergeEditor.baseUri, this.editor.uri, label), options).catch(e => {\n            console.error(e);\n        });\n    }\n\n    protected override getToolbarItems(): MergeEditorPaneToolbarItem[] {\n        return [\n            {\n                id: 'acceptAllChanges',\n                tooltip: nls.localizeByDefault(this.mergeSide === 1 ? 'Accept All Changes from Left' : 'Accept All Changes from Right'),\n                className: codicon('check-all', true),\n                onClick: () => this.acceptAllChanges()\n            },\n            {\n                id: 'compareWithBase',\n                tooltip: nls.localizeByDefault('Compare With Base'),\n                className: codicon('compare-changes', true),\n                onClick: () => this.compareWithBase()\n            }\n        ];\n    }\n\n    protected override computeEditorDecorations(): EditorDecoration[] {\n        const result: EditorDecoration[] = [];\n\n        const { model, currentMergeRange } = this.mergeEditor;\n        const document = this.mergeSide === 1 ? model.side1Document : model.side2Document;\n\n        for (const mergeRange of model.mergeRanges) {\n            const lineRange = mergeRange.getModifiedRange(this.mergeSide);\n            result.push(this.toMergeRangeDecoration(lineRange, {\n                isHandled: model.isMergeRangeHandled(mergeRange),\n                isFocused: mergeRange === currentMergeRange,\n                isAfterEnd: lineRange.startLineNumber > document.lineCount,\n            }));\n        }\n\n        const changes = this.mergeSide === 1 ? model.side1Changes : model.side2Changes;\n        result.push(...this.toChangeDecorations(changes, { diffSide: 'modified' }));\n        return result;\n    }\n}\n\n@injectable()\nexport class MergeEditorSide1Pane extends MergeEditorSidePane {\n\n    readonly mergeSide = 1;\n\n    constructor() {\n        super();\n        this.addClass('side1');\n    }\n}\n\n@injectable()\nexport class MergeEditorSide2Pane extends MergeEditorSidePane {\n\n    readonly mergeSide = 2;\n\n    constructor() {\n        super();\n        this.addClass('side2');\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/1.96.3/src/vs/workbench/contrib/mergeEditor/browser/view/scrollSynchronizer.ts\n\nimport { Disposable, DisposableCollection } from '@theia/core';\nimport { MonacoEditor } from '@theia/monaco/lib/browser/monaco-editor';\nimport { MergeEditor } from '../merge-editor';\nimport { DocumentLineRangeMap } from '../model/range-mapping';\n\nexport class MergeEditorScrollSync implements Disposable {\n\n    protected readonly toDispose = new DisposableCollection();\n    protected isSyncing = false;\n\n    constructor(protected readonly mergeEditor: MergeEditor) {\n        const { side1Pane, side2Pane, resultPane, basePane } = mergeEditor;\n\n        const syncingHandler = <T>(handler: (event: T) => void) => (event: T) => {\n            if (this.isSyncing) {\n                return;\n            }\n            this.isSyncing = true;\n            try {\n                handler(event);\n            } finally {\n                this.isSyncing = false;\n            }\n        };\n\n        this.toDispose.push(side1Pane.editor.getControl().onDidScrollChange(syncingHandler(event => {\n            if (event.scrollTopChanged) {\n                this.handleSide1ScrollTopChanged(event.scrollTop);\n            }\n            if (event.scrollLeftChanged) {\n                basePane.editor.getControl().setScrollLeft(event.scrollLeft);\n                side2Pane.editor.getControl().setScrollLeft(event.scrollLeft);\n                resultPane.editor.getControl().setScrollLeft(event.scrollLeft);\n            }\n        })));\n\n        this.toDispose.push(side2Pane.editor.getControl().onDidScrollChange(syncingHandler(event => {\n            if (event.scrollTopChanged) {\n                this.handleSide2ScrollTopChanged(event.scrollTop);\n            }\n            if (event.scrollLeftChanged) {\n                basePane.editor.getControl().setScrollLeft(event.scrollLeft);\n                side1Pane.editor.getControl().setScrollLeft(event.scrollLeft);\n                resultPane.editor.getControl().setScrollLeft(event.scrollLeft);\n            }\n        })));\n\n        this.toDispose.push(resultPane.editor.getControl().onDidScrollChange(syncingHandler(event => {\n            if (event.scrollTopChanged) {\n                this.handleResultScrollTopChanged(event.scrollTop);\n            }\n            if (event.scrollLeftChanged) {\n                basePane.editor.getControl().setScrollLeft(event.scrollLeft);\n                side1Pane.editor.getControl().setScrollLeft(event.scrollLeft);\n                side2Pane.editor.getControl().setScrollLeft(event.scrollLeft);\n            }\n        })));\n\n        this.toDispose.push(basePane.editor.getControl().onDidScrollChange(syncingHandler(event => {\n            if (event.scrollTopChanged) {\n                this.handleBaseScrollTopChanged(event.scrollTop);\n            }\n            if (event.scrollLeftChanged) {\n                side1Pane.editor.getControl().setScrollLeft(event.scrollLeft);\n                side2Pane.editor.getControl().setScrollLeft(event.scrollLeft);\n                resultPane.editor.getControl().setScrollLeft(event.scrollLeft);\n            }\n        })));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    storeScrollState(): unknown {\n        return this.mergeEditor.side1Pane.editor.getControl().getScrollTop();\n    }\n\n    restoreScrollState(state: unknown): void {\n        if (typeof state === 'number') {\n            const scrollTop = this.mergeEditor.side1Pane.editor.getControl().getScrollTop();\n            if (state !== scrollTop) {\n                this.mergeEditor.side1Pane.editor.getControl().setScrollTop(state);\n            } else {\n                this.update();\n            }\n        }\n    }\n\n    update(): void {\n        if (this.isSyncing) {\n            return;\n        }\n        this.isSyncing = true;\n        try {\n            const scrollTop = this.mergeEditor.side1Pane.editor.getControl().getScrollTop();\n            this.handleSide1ScrollTopChanged(scrollTop);\n        } finally {\n            this.isSyncing = false;\n        }\n    }\n\n    protected handleSide1ScrollTopChanged(scrollTop: number): void {\n        const { side1Pane, side2Pane, resultPane, basePane, shouldAlignBase, shouldAlignResult, model } = this.mergeEditor;\n\n        side2Pane.editor.getControl().setScrollTop(scrollTop);\n\n        if (shouldAlignResult) {\n            resultPane.editor.getControl().setScrollTop(scrollTop);\n        } else {\n            const targetScrollTop = this.computeTargetScrollTop(side1Pane.editor, resultPane.editor, model.side1ToResultLineRangeMap);\n            resultPane.editor.getControl().setScrollTop(targetScrollTop);\n        }\n\n        if (shouldAlignBase) {\n            basePane.editor.getControl().setScrollTop(scrollTop);\n        } else {\n            const targetScrollTop = this.computeTargetScrollTop(side1Pane.editor, basePane.editor, model.side1ToBaseLineRangeMap);\n            basePane.editor.getControl().setScrollTop(targetScrollTop);\n        }\n    }\n\n    protected handleSide2ScrollTopChanged(scrollTop: number): void {\n        const { side1Pane, side2Pane, resultPane, basePane, shouldAlignBase, shouldAlignResult, model } = this.mergeEditor;\n\n        side1Pane.editor.getControl().setScrollTop(scrollTop);\n\n        if (shouldAlignResult) {\n            resultPane.editor.getControl().setScrollTop(scrollTop);\n        } else {\n            const targetScrollTop = this.computeTargetScrollTop(side2Pane.editor, resultPane.editor, model.side2ToResultLineRangeMap);\n            resultPane.editor.getControl().setScrollTop(targetScrollTop);\n        }\n\n        if (shouldAlignBase) {\n            basePane.editor.getControl().setScrollTop(scrollTop);\n        } else {\n            const targetScrollTop = this.computeTargetScrollTop(side2Pane.editor, basePane.editor, model.side2ToBaseLineRangeMap);\n            basePane.editor.getControl().setScrollTop(targetScrollTop);\n        }\n    }\n\n    protected handleResultScrollTopChanged(scrollTop: number): void {\n        const { side1Pane, side2Pane, resultPane, basePane, shouldAlignBase, shouldAlignResult, model } = this.mergeEditor;\n\n        if (shouldAlignResult) {\n            side1Pane.editor.getControl().setScrollTop(scrollTop);\n            side2Pane.editor.getControl().setScrollTop(scrollTop);\n        } else {\n            const targetScrollTop = this.computeTargetScrollTop(resultPane.editor, side1Pane.editor, model.resultToSide1LineRangeMap);\n            side1Pane.editor.getControl().setScrollTop(targetScrollTop);\n            side2Pane.editor.getControl().setScrollTop(targetScrollTop);\n            if (shouldAlignBase) {\n                basePane.editor.getControl().setScrollTop(targetScrollTop);\n            }\n        }\n\n        if (!shouldAlignBase) {\n            const targetScrollTop = this.computeTargetScrollTop(resultPane.editor, basePane.editor, model.resultToBaseLineRangeMap);\n            basePane.editor.getControl().setScrollTop(targetScrollTop);\n        }\n    }\n\n    protected handleBaseScrollTopChanged(scrollTop: number): void {\n        const { side1Pane, side2Pane, resultPane, basePane, shouldAlignBase, shouldAlignResult, model } = this.mergeEditor;\n\n        if (shouldAlignBase) {\n            side1Pane.editor.getControl().setScrollTop(scrollTop);\n            side2Pane.editor.getControl().setScrollTop(scrollTop);\n        } else {\n            const targetScrollTop = this.computeTargetScrollTop(basePane.editor, side1Pane.editor, model.baseToSide1LineRangeMap);\n            side1Pane.editor.getControl().setScrollTop(targetScrollTop);\n            side2Pane.editor.getControl().setScrollTop(targetScrollTop);\n            if (shouldAlignResult) {\n                resultPane.editor.getControl().setScrollTop(targetScrollTop);\n            }\n        }\n\n        if (!shouldAlignResult) {\n            const targetScrollTop = this.computeTargetScrollTop(basePane.editor, resultPane.editor, model.baseToResultLineRangeMap);\n            resultPane.editor.getControl().setScrollTop(targetScrollTop);\n        }\n    }\n\n    protected computeTargetScrollTop(sourceEditor: MonacoEditor, targetEditor: MonacoEditor, lineRangeMap: DocumentLineRangeMap): number {\n        const visibleRanges = sourceEditor.getVisibleRanges();\n        if (visibleRanges.length === 0) {\n            return 0;\n        }\n\n        const topLineNumber = visibleRanges[0].start.line;\n        const scrollTop = sourceEditor.getControl().getScrollTop();\n\n        let sourceStartTopPx: number;\n        let sourceEndPx: number;\n        let targetStartTopPx: number;\n        let targetEndPx: number;\n\n        if (topLineNumber === 0 && scrollTop <= sourceEditor.getControl().getTopForLineNumber(1)) { // special case: scrollTop is before or at the top of the first line\n            sourceStartTopPx = 0;\n            sourceEndPx = sourceEditor.getControl().getTopForLineNumber(1);\n\n            targetStartTopPx = 0;\n            targetEndPx = targetEditor.getControl().getTopForLineNumber(1);\n        } else {\n            const { originalRange: sourceRange, modifiedRange: targetRange } = lineRangeMap.projectLine(Math.max(topLineNumber - 1, 0));\n\n            sourceStartTopPx = sourceEditor.getControl().getTopForLineNumber(sourceRange.startLineNumber + 1);\n            sourceEndPx = sourceEditor.getControl().getTopForLineNumber(sourceRange.endLineNumberExclusive + 1);\n\n            targetStartTopPx = targetEditor.getControl().getTopForLineNumber(targetRange.startLineNumber + 1);\n            targetEndPx = targetEditor.getControl().getTopForLineNumber(targetRange.endLineNumberExclusive + 1);\n        }\n\n        const factor = Math.min(sourceEndPx === sourceStartTopPx ? 0 : (scrollTop - sourceStartTopPx) / (sourceEndPx - sourceStartTopPx), 1);\n        const targetScrollTop = targetStartTopPx + (targetEndPx - targetStartTopPx) * factor;\n\n        return targetScrollTop;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable } from '@theia/core/shared/inversify';\nimport { Disposable } from '@theia/core';\nimport { Autorun, Observable } from '@theia/core/lib/common/observable';\nimport * as monaco from '@theia/monaco-editor-core';\nimport { MonacoEditorViewZone } from '@theia/monaco/lib/browser/monaco-editor-zone-widget';\nimport { MergeEditor } from '../merge-editor';\nimport { MergeRange } from '../model/merge-range';\nimport { MergeRangeAction, MergeRangeActions } from './merge-range-actions';\nimport { MergeEditorPane } from './merge-editor-panes';\nimport { DiffSpacers, DiffSpacerService } from './diff-spacers';\n\nexport interface MergeEditorViewZone {\n    create(ctx: MergeEditorViewZone.CreationContext): void;\n}\n\nexport namespace MergeEditorViewZone {\n    export interface CreationContext {\n        createViewZone(viewZone: Omit<MonacoEditorViewZone, 'id'>): void;\n        register(disposable: Disposable): void;\n    }\n}\n\nexport interface MergeEditorViewZones {\n    readonly baseViewZones: readonly MergeEditorViewZone[];\n    readonly side1ViewZones: readonly MergeEditorViewZone[];\n    readonly side2ViewZones: readonly MergeEditorViewZone[];\n    readonly resultViewZones: readonly MergeEditorViewZone[];\n}\n\n@injectable()\nexport class MergeEditorViewZoneComputer {\n\n    @inject(DiffSpacerService)\n    protected readonly diffSpacerService: DiffSpacerService;\n\n    computeViewZones(mergeEditor: MergeEditor): MergeEditorViewZones {\n\n        const baseViewZones: MergeEditorViewZone[] = [];\n        const side1ViewZones: MergeEditorViewZone[] = [];\n        const side2ViewZones: MergeEditorViewZone[] = [];\n        const resultViewZones: MergeEditorViewZone[] = [];\n\n        const { model, shouldAlignResult, shouldAlignBase } = mergeEditor;\n\n        for (const mergeRange of model.mergeRanges) {\n            const { side1Pane, side2Pane, resultPane } = mergeEditor;\n\n            const actions = this.newMergeRangeActions(mergeEditor, mergeRange);\n\n            let resultActionZoneHeight = this.getActionZoneMinHeight(resultPane);\n            if (actions.hasSideActions || (shouldAlignResult && actions.hasResultActions)) {\n                let actionZoneHeight = Math.max(this.getActionZoneMinHeight(side1Pane), this.getActionZoneMinHeight(side2Pane));\n                if (shouldAlignResult) {\n                    resultActionZoneHeight = actionZoneHeight = Math.max(actionZoneHeight, resultActionZoneHeight);\n                }\n                side1ViewZones.push(this.newActionZone(side1Pane, actions.side1ActionsObservable, mergeRange.side1Range.startLineNumber - 1, actionZoneHeight));\n                side2ViewZones.push(this.newActionZone(side2Pane, actions.side2ActionsObservable, mergeRange.side2Range.startLineNumber - 1, actionZoneHeight));\n                if (shouldAlignBase) {\n                    baseViewZones.push(this.newActionZonePlaceholder(mergeRange.baseRange.startLineNumber - 1, actionZoneHeight));\n                }\n            }\n            if (actions.hasResultActions) {\n                resultViewZones.push(\n                    this.newActionZone(resultPane, actions.resultActionsObservable, model.getLineRangeInResult(mergeRange).startLineNumber - 1, resultActionZoneHeight)\n                );\n            } else if (shouldAlignResult && actions.hasSideActions) {\n                resultViewZones.push(this.newActionZonePlaceholder(model.getLineRangeInResult(mergeRange).startLineNumber - 1, resultActionZoneHeight));\n            }\n        }\n\n        const baseLineCount = model.baseDocument.lineCount;\n        const multiDiffSpacers: DiffSpacers[] = [];\n\n        multiDiffSpacers.push(this.diffSpacerService.computeDiffSpacers(model.side1Changes, baseLineCount));\n        multiDiffSpacers.push(this.diffSpacerService.computeDiffSpacers(model.side2Changes, baseLineCount));\n\n        if (shouldAlignResult) {\n            multiDiffSpacers.push(this.diffSpacerService.computeDiffSpacers(model.resultChanges, baseLineCount));\n        }\n\n        const combinedMultiDiffSpacers = this.diffSpacerService.combineMultiDiffSpacers(multiDiffSpacers);\n\n        if (shouldAlignBase) {\n            this.createSpacerZones(combinedMultiDiffSpacers.originalSpacers, baseViewZones);\n        }\n\n        const { modifiedSides } = shouldAlignBase ? combinedMultiDiffSpacers : this.diffSpacerService.excludeOriginalSide(combinedMultiDiffSpacers);\n\n        this.createSpacerZones(modifiedSides[0].modifiedSpacers, side1ViewZones);\n        this.createSpacerZones(modifiedSides[1].modifiedSpacers, side2ViewZones);\n\n        if (shouldAlignResult) {\n            this.createSpacerZones(modifiedSides[2].modifiedSpacers, resultViewZones);\n        }\n\n        return { baseViewZones, side1ViewZones, side2ViewZones, resultViewZones };\n    }\n\n    protected createSpacerZones(spacers: number[], viewZones: MergeEditorViewZone[]): void {\n        const lineNumbers = Object.keys(spacers).map(Number); // note: spacers is a sparse array\n        for (const lineNumber of lineNumbers) {\n            const heightInLines = spacers[lineNumber];\n            if (heightInLines) {\n                viewZones.push(this.newSpacerZone(lineNumber - 1, heightInLines));\n            }\n        }\n    }\n\n    protected newMergeRangeActions(mergeEditor: MergeEditor, mergeRange: MergeRange): MergeRangeActions {\n        return new MergeRangeActions(mergeEditor, mergeRange);\n    }\n\n    protected getActionZoneMinHeight(pane: MergeEditorPane): number {\n        return pane.editor.getControl().getOption(monaco.editor.EditorOption.lineHeight);\n    }\n\n    protected newActionZone(pane: MergeEditorPane, actions: Observable<readonly MergeRangeAction[]>, afterLineNumber: number, heightInPx: number): MergeEditorViewZone {\n        return new MergeEditorActionZone(pane, actions, afterLineNumber, heightInPx);\n    }\n\n    protected newActionZonePlaceholder(afterLineNumber: number, heightInPx: number): MergeEditorViewZone {\n        return new MergeEditorActionZonePlaceholder(afterLineNumber, heightInPx);\n    }\n\n    protected newSpacerZone(afterLineNumber: number, heightInLines: number): MergeEditorViewZone {\n        return new MergeEditorSpacerZone(afterLineNumber, heightInLines);\n    }\n}\n\nexport class MergeEditorActionZone implements MergeEditorViewZone {\n\n    protected static counter = 0;\n\n    constructor(\n        protected readonly pane: MergeEditorPane,\n        protected readonly actionsObservable: Observable<readonly MergeRangeAction[]>,\n        protected readonly afterLineNumber: number,\n        protected readonly heightInPx: number\n    ) {}\n\n    create(ctx: MergeEditorViewZone.CreationContext): void {\n        const overlayWidgetNode = document.createElement('div');\n        overlayWidgetNode.className = 'action-zone';\n\n        ctx.createViewZone({\n            domNode: document.createElement('div'),\n            afterLineNumber: this.afterLineNumber + 1, // + 1, since line numbers in Monaco are 1-based\n            heightInPx: this.heightInPx,\n            onComputedHeight: height => overlayWidgetNode.style.height = `${height}px`,\n            onDomNodeTop: top => overlayWidgetNode.style.top = `${top}px`\n        });\n\n        const editor = this.pane.editor.getControl();\n        const setLeftPosition = () => overlayWidgetNode.style.left = editor.getLayoutInfo().contentLeft + 'px';\n        setLeftPosition();\n        ctx.register(editor.onDidLayoutChange(setLeftPosition));\n\n        const overlayWidgetId = `mergeEditorActionZone${MergeEditorActionZone.counter++}`;\n        const overlayWidget = {\n            getId: () => overlayWidgetId,\n            getDomNode: () => overlayWidgetNode,\n            // eslint-disable-next-line no-null/no-null\n            getPosition: () => null\n        };\n        editor.addOverlayWidget(overlayWidget);\n        ctx.register(Disposable.create(() => {\n            editor.removeOverlayWidget(overlayWidget);\n        }));\n\n        const actionContainer = document.createElement('div');\n        actionContainer.className = 'codelens-decoration';\n        overlayWidgetNode.appendChild(actionContainer);\n\n        ctx.register(Autorun.create(() => this.renderActions(actionContainer, this.actionsObservable.get())));\n    };\n\n    protected renderActions(parent: HTMLElement, actions: readonly MergeRangeAction[]): void {\n        const children: HTMLElement[] = [];\n        let isFirst = true;\n        for (const action of actions) {\n            if (isFirst) {\n                isFirst = false;\n            } else {\n                const actionSeparator = document.createElement('span');\n                actionSeparator.append('\\u00a0|\\u00a0');\n                children.push(actionSeparator);\n            }\n            const title = this.getActionTitle(action);\n            if (action.run) {\n                const actionLink = document.createElement('a');\n                actionLink.role = 'button';\n                actionLink.onclick = () => action.run!();\n                if (action.tooltip) {\n                    actionLink.title = action.tooltip;\n                }\n                actionLink.append(title);\n                children.push(actionLink);\n            } else {\n                const actionLabel = document.createElement('span');\n                if (action.tooltip) {\n                    actionLabel.title = action.tooltip;\n                }\n                actionLabel.append(title);\n                children.push(actionLabel);\n            }\n        }\n        parent.innerText = ''; // reset children\n        parent.append(...children);\n    }\n\n    protected getActionTitle(action: MergeRangeAction): string {\n        return action.text;\n    }\n}\n\nexport class MergeEditorActionZonePlaceholder implements MergeEditorViewZone {\n    constructor(\n        protected readonly afterLineNumber: number,\n        protected readonly heightInPx: number\n    ) {}\n\n    create(ctx: MergeEditorViewZone.CreationContext): void {\n        const domNode = document.createElement('div');\n        domNode.className = 'action-zone-placeholder';\n        ctx.createViewZone({\n            afterLineNumber: this.afterLineNumber + 1, // + 1, since line numbers in Monaco are 1-based\n            heightInPx: this.heightInPx,\n            domNode\n        });\n    }\n}\n\nexport class MergeEditorSpacerZone implements MergeEditorViewZone {\n    constructor(\n        protected readonly afterLineNumber: number,\n        protected readonly heightInLines: number\n    ) { }\n\n    create(ctx: MergeEditorViewZone.CreationContext): void {\n        const domNode = document.createElement('div');\n        domNode.className = 'diagonal-fill';\n        ctx.createViewZone({\n            afterLineNumber: this.afterLineNumber + 1, // + 1, since line numbers in Monaco are 1-based\n            heightInLines: this.heightInLines,\n            domNode\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2025 1C-Soft LLC and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/1.96.3/src/vs/workbench/contrib/mergeEditor/browser/view/conflictActions.ts\n\nimport { DerivedObservable, ObservableUtils } from '@theia/core/lib/common/observable';\nimport { MergeRange, MergeRangeAcceptedState, MergeSide } from '../model/merge-range';\nimport { MergeEditor } from '../merge-editor';\nimport { nls } from '@theia/core';\n\nexport interface MergeRangeAction {\n    readonly text: string;\n    readonly tooltip?: string;\n    run?(): unknown;\n}\n\nexport class MergeRangeActions {\n\n    readonly side1ActionsObservable = DerivedObservable.create(() => this.getActionsForSide(1));\n    readonly side2ActionsObservable = DerivedObservable.create(() => this.getActionsForSide(2));\n    readonly resultActionsObservable = DerivedObservable.create(() => this.getResultActions());\n\n    protected readonly hasSideActionsObservable = DerivedObservable.create(() => this.side1ActionsObservable.get().length + this.side2ActionsObservable.get().length > 0);\n    get hasSideActions(): boolean { return this.hasSideActionsObservable.get(); }\n\n    protected readonly hasResultActionsObservable = DerivedObservable.create(() => this.resultActionsObservable.get().length > 0);\n    get hasResultActions(): boolean { return this.hasResultActionsObservable.get(); }\n\n    constructor(\n        protected readonly mergeEditor: MergeEditor,\n        protected readonly mergeRange: MergeRange\n    ) {}\n\n    protected getActionsForSide(side: MergeSide): readonly MergeRangeAction[] {\n        const { mergeEditor, mergeRange } = this;\n        const { model, side1Title, side2Title } = mergeEditor;\n\n        if (!model.hasMergeRange(mergeRange)) {\n            return [];\n        }\n\n        const result: MergeRangeAction[] = [];\n        const sideTitle = side === 1 ? side1Title : side2Title;\n        const state = model.getMergeRangeResultState(mergeRange);\n\n        if (state !== 'Unrecognized' && !state.includes('Side' + side)) {\n            if (state !== 'Base' || mergeRange.getChanges(side).length) {\n                result.push({\n                    text: nls.localizeByDefault('Accept {0}', sideTitle),\n                    tooltip: nls.localizeByDefault('Accept {0} in the result document.', sideTitle),\n                    run: () => this.applyMergeRangeAcceptedState(mergeRange, MergeRangeAcceptedState.addSide(state, side))\n                });\n            }\n\n            if (mergeRange.canBeSmartCombined(side)) {\n                result.push({\n                    text: mergeRange.isSmartCombinationOrderRelevant ?\n                        nls.localizeByDefault('Accept Combination ({0} First)', sideTitle) :\n                        nls.localizeByDefault('Accept Combination'),\n                    tooltip: nls.localizeByDefault('Accept an automatic combination of both sides in the result document.'),\n                    run: () => this.applyMergeRangeAcceptedState(mergeRange, MergeRangeAcceptedState.addSide(\n                        side === 1 ? 'Side1' : 'Side2', side === 1 ? 2 : 1, { smartCombination: true }))\n                });\n            }\n        }\n        return result;\n    }\n\n    protected getResultActions(): readonly MergeRangeAction[] {\n        const { mergeEditor, mergeRange } = this;\n        const { model, side1Title, side2Title } = mergeEditor;\n\n        if (!model.hasMergeRange(mergeRange)) {\n            return [];\n        }\n\n        const result: MergeRangeAction[] = [];\n        const state = model.getMergeRangeResultState(mergeRange);\n\n        if (state === 'Unrecognized') {\n            result.push({\n                text: nls.localizeByDefault('Manual Resolution'),\n                tooltip: nls.localizeByDefault('This conflict has been resolved manually.')\n            });\n            result.push({\n                text: nls.localizeByDefault('Reset to base'),\n                tooltip: nls.localizeByDefault('Reset this conflict to the common ancestor of both the right and left changes.'),\n                run: () => this.applyMergeRangeAcceptedState(mergeRange, 'Base')\n            });\n        } else if (state === 'Base') {\n            result.push({\n                text: nls.localizeByDefault('No Changes Accepted'),\n                tooltip: nls.localizeByDefault('The current resolution of this conflict equals the common ancestor of both the right and left changes.')\n            });\n            if (!model.isMergeRangeHandled(mergeRange)) {\n                result.push({\n                    text: nls.localizeByDefault('Mark as Handled'),\n                    run: () => this.applyMergeRangeAcceptedState(mergeRange, state)\n                });\n            }\n        } else {\n            const labels: string[] = [];\n            const stateToggles: MergeRangeAction[] = [];\n            if (state.includes('Side1')) {\n                labels.push(side1Title);\n                stateToggles.push({\n                    text: nls.localizeByDefault('Remove {0}', side1Title),\n                    tooltip: nls.localizeByDefault('Remove {0} from the result document.', side1Title),\n                    run: () => this.applyMergeRangeAcceptedState(mergeRange, MergeRangeAcceptedState.removeSide(state, 1))\n                });\n            }\n            if (state.includes('Side2')) {\n                labels.push(side2Title);\n                stateToggles.push({\n                    text: nls.localizeByDefault('Remove {0}', side2Title),\n                    tooltip: nls.localizeByDefault('Remove {0} from the result document.', side2Title),\n                    run: () => this.applyMergeRangeAcceptedState(mergeRange, MergeRangeAcceptedState.removeSide(state, 2))\n                });\n            }\n            if (state.startsWith('Side2')) {\n                labels.reverse();\n                stateToggles.reverse();\n            }\n            if (labels.length) {\n                result.push({\n                    text: labels.join(' + ')\n                });\n            }\n            result.push(...stateToggles);\n        }\n        return result;\n    }\n\n    protected async applyMergeRangeAcceptedState(mergeRange: MergeRange, state: MergeRangeAcceptedState): Promise<void> {\n        const { model, resultPane } = this.mergeEditor;\n        resultPane.activate();\n        await ObservableUtils.waitForState(model.isUpToDateObservable);\n        resultPane.goToMergeRange(mergeRange, { reveal: false }); // set the cursor state that will be restored when undoing the operation\n        model.applyMergeRangeAcceptedState(mergeRange, state);\n        await ObservableUtils.waitForState(model.isUpToDateObservable);\n        resultPane.goToMergeRange(mergeRange, { reveal: false }); // set the resulting cursor state\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport '../../src/browser/style/scm-amend-component.css';\n\nimport * as React from '@theia/core/shared/react';\nimport { ScmAvatarService } from './scm-avatar-service';\nimport { codicon, StorageService } from '@theia/core/lib/browser';\nimport { Disposable, DisposableCollection } from '@theia/core';\n\nimport { ScmRepository } from './scm-repository';\nimport { ScmAmendSupport, ScmCommit } from './scm-provider';\nimport { nls } from '@theia/core/lib/common/nls';\n\nexport interface ScmAmendComponentProps {\n    style: React.CSSProperties | undefined,\n    repository: ScmRepository,\n    scmAmendSupport: ScmAmendSupport,\n    setCommitMessage: (message: string) => void,\n    avatarService: ScmAvatarService,\n    storageService: StorageService,\n}\n\ninterface ScmAmendComponentState {\n    /**\n     * This is used for transitioning.  When setting up a transition, we first set to render\n     * the elements in their starting positions.  This includes creating the elements to be\n     * transitioned in, even though those controls will not be visible when state is 'start'.\n     * On the next frame after 'start', we render elements with their final positions and with\n     * the transition properties.\n     */\n    transition: {\n        state: 'none'\n    } | {\n        state: 'start' | 'transitioning',\n        direction: 'up' | 'down',\n        previousLastCommit: { commit: ScmCommit, avatar: string }\n    };\n\n    amendingCommits: { commit: ScmCommit, avatar: string }[];\n    lastCommit: { commit: ScmCommit, avatar: string } | undefined;\n}\n\nconst TRANSITION_TIME_MS = 300;\nconst REPOSITORY_STORAGE_KEY = 'scmRepository';\n\nexport class ScmAmendComponent extends React.Component<ScmAmendComponentProps, ScmAmendComponentState> {\n\n    /**\n     * a hint on how to animate an update, set by certain user action handlers\n     * and used when updating the view based on a repository change\n     */\n    protected transitionHint: 'none' | 'amend' | 'unamend' = 'none';\n\n    protected lastCommitHeight: number = 0;\n    lastCommitScrollRef = (instance: HTMLDivElement) => {\n        if (instance && this.lastCommitHeight === 0) {\n            this.lastCommitHeight = instance.getBoundingClientRect().height;\n        }\n    };\n\n    constructor(props: ScmAmendComponentProps) {\n        super(props);\n\n        this.state = {\n            transition: { state: 'none' },\n            amendingCommits: [],\n            lastCommit: undefined\n        };\n\n        const setState = this.setState.bind(this);\n        this.setState = newState => {\n            if (!this.toDisposeOnUnmount.disposed) {\n                setState(newState);\n            }\n        };\n    }\n\n    protected readonly toDisposeOnUnmount = new DisposableCollection();\n\n    override async componentDidMount(): Promise<void> {\n        this.toDisposeOnUnmount.push(Disposable.create(() => { /* mark as mounted */ }));\n\n        const lastCommit = await this.getLastCommit();\n        this.setState({ amendingCommits: await this.buildAmendingList(lastCommit ? lastCommit.commit : undefined), lastCommit });\n\n        if (this.toDisposeOnUnmount.disposed) {\n            return;\n        }\n        this.toDisposeOnUnmount.push(\n            this.props.repository.provider.onDidChange(() => this.fetchStatusAndSetState())\n        );\n    }\n\n    override componentWillUnmount(): void {\n        this.toDisposeOnUnmount.dispose();\n    }\n\n    async fetchStatusAndSetState(): Promise<void> {\n        const storageKey = this.getStorageKey();\n\n        const nextCommit = await this.getLastCommit();\n        if (nextCommit && this.state.lastCommit && nextCommit.commit.id === this.state.lastCommit.commit.id) {\n            // No change here\n        } else if (nextCommit === undefined && this.state.lastCommit === undefined) {\n            // No change here\n        } else if (this.transitionHint === 'none') {\n            // If the 'last' commit changes, but we are not expecting an 'amend'\n            // or 'unamend' to occur, then we clear out the list of amended commits.\n            // This is because an unexpected change has happened to the repository,\n            // perhaps the user committed, merged, or something.  The amended commits\n            // will no longer be valid.\n\n            // Note that there may or may not have been a previous lastCommit (if the\n            // repository was previously empty with no initial commit then lastCommit\n            // will be undefined).  Either way we clear the amending commits.\n            await this.clearAmendingCommits();\n\n            // There is a change to the last commit, but no transition hint so\n            // the view just updates without transition.\n            this.setState({ amendingCommits: [], lastCommit: nextCommit });\n        } else {\n            const amendingCommits = this.state.amendingCommits.concat([]); // copy the array\n\n            const direction: 'up' | 'down' = this.transitionHint === 'amend' ? 'up' : 'down';\n            switch (this.transitionHint) {\n                case 'amend':\n                    if (this.state.lastCommit) {\n                        amendingCommits.push(this.state.lastCommit);\n\n                        const serializedState = JSON.stringify({\n                            amendingHeadCommitSha: amendingCommits[0].commit.id,\n                            latestCommitSha: nextCommit ? nextCommit.commit.id : undefined\n                        });\n                        this.props.storageService.setData<string | undefined>(storageKey, serializedState);\n                    }\n                    break;\n                case 'unamend':\n                    amendingCommits.pop();\n                    if (amendingCommits.length === 0) {\n                        this.props.storageService.setData<string | undefined>(storageKey, undefined);\n                    } else {\n                        const serializedState = JSON.stringify({\n                            amendingHeadCommitSha: amendingCommits[0].commit.id,\n                            latestCommitSha: nextCommit ? nextCommit.commit.id : undefined\n                        });\n                        this.props.storageService.setData<string | undefined>(storageKey, serializedState);\n                    }\n                    break;\n            }\n\n            if (this.state.lastCommit && nextCommit) {\n                const transitionData = { direction, previousLastCommit: this.state.lastCommit };\n                this.setState({ lastCommit: nextCommit, amendingCommits, transition: { ...transitionData, state: 'start' } });\n                this.onNextFrame(() => {\n                    this.setState({ transition: { ...transitionData, state: 'transitioning' } });\n                });\n\n                setTimeout(\n                    () => {\n                        this.setState({ transition: { state: 'none' } });\n                    },\n                    TRANSITION_TIME_MS);\n            } else {\n                // No previous last commit so no transition\n                this.setState({ transition: { state: 'none' }, amendingCommits, lastCommit: nextCommit });\n            }\n        }\n\n        this.transitionHint = 'none';\n    }\n\n    private async clearAmendingCommits(): Promise<void> {\n        const storageKey = this.getStorageKey();\n        await this.props.storageService.setData<string | undefined>(storageKey, undefined);\n    }\n\n    private async buildAmendingList(lastCommit: ScmCommit | undefined): Promise<{ commit: ScmCommit, avatar: string }[]> {\n        const storageKey = this.getStorageKey();\n        const storedState = await this.props.storageService.getData<string | undefined>(storageKey, undefined);\n\n        // Restore list of commits from saved amending head commit up through parents until the\n        // current commit.  (If we don't reach the current commit, the repository has been changed in such\n        // a way then unamending commits can no longer be done).\n        if (storedState) {\n            const { amendingHeadCommitSha, latestCommitSha } = JSON.parse(storedState);\n            if (!this.commitsAreEqual(lastCommit, latestCommitSha)) {\n                // The head commit in the repository has changed.  It is not the same commit that was the\n                // head commit after the last 'amend'.\n                return [];\n            }\n            const commits = await this.props.scmAmendSupport.getInitialAmendingCommits(amendingHeadCommitSha, lastCommit ? lastCommit.id : undefined);\n\n            const amendingCommitPromises = commits.map(async commit => {\n                const avatar = await this.props.avatarService.getAvatar(commit.authorEmail);\n                return { commit, avatar };\n            });\n            return Promise.all(amendingCommitPromises);\n        } else {\n            return [];\n        }\n    }\n\n    private getStorageKey(): string {\n        return REPOSITORY_STORAGE_KEY + ':' + this.props.repository.provider.rootUri;\n    }\n\n    /**\n     * Commits are equal if the ids are equal or if both are undefined.\n     * (If a commit is undefined, it represents the initial empty state of a repository,\n     * before the initial commit).\n     */\n    private commitsAreEqual(lastCommit: ScmCommit | undefined, savedLastCommitId: string | undefined): boolean {\n        return lastCommit\n            ? lastCommit.id === savedLastCommitId\n            : savedLastCommitId === undefined;\n    }\n\n    /**\n     * This function will update the 'model' (lastCommit, amendingCommits) only\n     * when the repository sees the last commit change.\n     * 'render' can be called at any time, so be sure we don't update any 'model'\n     * fields until we actually start the transition.\n     */\n    protected amend = async (): Promise<void> => {\n        if (this.state.transition.state !== 'none' && this.transitionHint !== 'none') {\n            return;\n        }\n\n        this.transitionHint = 'amend';\n        await this.resetAndSetMessage('HEAD~', 'HEAD');\n    };\n\n    protected unamend = async (): Promise<void> => {\n        if (this.state.transition.state !== 'none' && this.transitionHint !== 'none') {\n            return;\n        }\n\n        const commitToRestore = (this.state.amendingCommits.length >= 1)\n            ? this.state.amendingCommits[this.state.amendingCommits.length - 1]\n            : undefined;\n        const oldestAmendCommit = (this.state.amendingCommits.length >= 2)\n            ? this.state.amendingCommits[this.state.amendingCommits.length - 2]\n            : undefined;\n\n        if (commitToRestore) {\n            const commitToUseForMessage = oldestAmendCommit\n                ? oldestAmendCommit.commit.id\n                : undefined;\n            this.transitionHint = 'unamend';\n            await this.resetAndSetMessage(commitToRestore.commit.id, commitToUseForMessage);\n        }\n    };\n\n    private async resetAndSetMessage(commitToRestore: string, commitToUseForMessage: string | undefined): Promise<void> {\n        const message = commitToUseForMessage\n            ? await this.props.scmAmendSupport.getMessage(commitToUseForMessage)\n            : '';\n        await this.props.scmAmendSupport.reset(commitToRestore);\n        this.props.setCommitMessage(message);\n    }\n\n    override render(): JSX.Element {\n        const neverShrink = this.state.amendingCommits.length <= 3;\n\n        const style: React.CSSProperties = neverShrink\n            ? {\n                ...this.props.style,\n                flexShrink: 0,\n            }\n            : {\n                ...this.props.style,\n                flexShrink: 1,\n                minHeight: 240   // height with three commits\n            };\n\n        return (\n            <div className={ScmAmendComponent.Styles.COMMIT_CONTAINER + ' no-select'} style={style}>\n                {\n                    this.state.amendingCommits.length > 0 || (this.state.lastCommit && this.state.transition.state !== 'none' && this.state.transition.direction === 'down')\n                        ? this.renderAmendingCommits()\n                        : ''\n                }\n                {\n                    this.state.lastCommit ?\n                        <div>\n                            <div id='lastCommit' className='theia-scm-amend'>\n                                <div className='theia-header scm-theia-header'>\n                                    {nls.localize('theia/scm/amendHeadCommit', 'HEAD Commit')}\n                                </div>\n                                {this.renderLastCommit()}\n                            </div>\n                        </div>\n                        : ''\n                }\n            </div>\n        );\n    }\n\n    protected async getLastCommit(): Promise<{ commit: ScmCommit, avatar: string } | undefined> {\n        const commit = await this.props.scmAmendSupport.getLastCommit();\n        if (commit) {\n            const avatar = await this.props.avatarService.getAvatar(commit.authorEmail);\n            return { commit, avatar };\n        }\n        return undefined;\n    }\n\n    protected renderAmendingCommits(): React.ReactNode {\n        const neverShrink = this.state.amendingCommits.length <= 3;\n\n        const style: React.CSSProperties = neverShrink\n            ? {\n                flexShrink: 0,\n            }\n            : {\n                flexShrink: 1,\n                // parent minHeight controls height, we just need any value smaller than\n                // what the height would be when the parent is at its minHeight\n                minHeight: 0\n            };\n\n        return <div id='amendedCommits' className='theia-scm-amend-outer-container' style={style}>\n            <div className='theia-header scm-theia-header'>\n                <div className='noWrapInfo'>Commits being Amended</div>\n                {this.renderAmendCommitListButtons()}\n                {this.renderCommitCount(this.state.amendingCommits.length)}\n            </div>\n            <div style={this.styleAmendedCommits()}>\n                {this.state.amendingCommits.map((commitData, index, array) =>\n                    this.renderCommitBeingAmended(commitData, index === array.length - 1)\n                )}\n                {\n                    this.state.lastCommit && this.state.transition.state !== 'none' && this.state.transition.direction === 'down'\n                        ? this.renderCommitBeingAmended(this.state.lastCommit, false)\n                        : ''\n                }\n            </div>\n        </div>;\n    }\n\n    protected renderAmendCommitListButtons(): React.ReactNode {\n        return <div className='theia-scm-inline-actions-container'>\n            <div className='theia-scm-inline-actions'>\n                <div className='theia-scm-inline-action'>\n                    <a className={codicon('dash')} title='Unamend All Commits' onClick={this.unamendAll} />\n                </div>\n                <div className='theia-scm-inline-action' >\n                    <a className={codicon('close')} title='Clear Amending Commits' onClick={this.clearAmending} />\n                </div>\n            </div>\n        </div>;\n    }\n\n    protected renderLastCommit(): React.ReactNode {\n        if (!this.state.lastCommit) {\n            return '';\n        }\n\n        const canAmend: boolean = true;\n        return <div className={ScmAmendComponent.Styles.COMMIT_AND_BUTTON} style={{ flexGrow: 0, flexShrink: 0 }} key={this.state.lastCommit.commit.id}>\n            {this.renderLastCommitNoButton(this.state.lastCommit)}\n            {\n                canAmend\n                    ? <div className={ScmAmendComponent.Styles.FLEX_CENTER}>\n                        <button className='theia-button' title={nls.localize('theia/scm/amendLastCommit', 'Amend last commit')} onClick={this.amend}>\n                            {nls.localize('theia/scm/amend', 'Amend')}\n                        </button>\n                    </div>\n                    : ''\n            }\n        </div>;\n    }\n\n    protected renderLastCommitNoButton(lastCommit: { commit: ScmCommit, avatar: string }): React.ReactNode {\n        switch (this.state.transition.state) {\n            case 'none':\n                return <div ref={this.lastCommitScrollRef} className='theia-scm-scrolling-container'>\n                    {this.renderCommitAvatarAndDetail(lastCommit)}\n                </div>;\n\n            case 'start':\n            case 'transitioning':\n                switch (this.state.transition.direction) {\n                    case 'up':\n                        return <div style={this.styleLastCommitMovingUp(this.state.transition.state)}>\n                            {this.renderCommitAvatarAndDetail(this.state.transition.previousLastCommit)}\n                            {this.renderCommitAvatarAndDetail(lastCommit)}\n                        </div>;\n                    case 'down':\n                        return <div style={this.styleLastCommitMovingDown(this.state.transition.state)}>\n                            {this.renderCommitAvatarAndDetail(lastCommit)}\n                            {this.renderCommitAvatarAndDetail(this.state.transition.previousLastCommit)}\n                        </div>;\n                }\n        }\n    }\n\n    /**\n     * See https://stackoverflow.com/questions/26556436/react-after-render-code\n     *\n     * @param callback\n     */\n    protected onNextFrame(callback: FrameRequestCallback): void {\n        setTimeout(\n            () => window.requestAnimationFrame(callback),\n            0);\n    }\n\n    protected renderCommitAvatarAndDetail(commitData: { commit: ScmCommit, avatar: string }): React.ReactNode {\n        const { commit, avatar } = commitData;\n        return <div className={ScmAmendComponent.Styles.COMMIT_AVATAR_AND_TEXT} key={commit.id}>\n            <div className={ScmAmendComponent.Styles.COMMIT_MESSAGE_AVATAR}>\n                <img src={avatar} />\n            </div>\n            <div className={ScmAmendComponent.Styles.COMMIT_DETAILS}>\n                <div className={ScmAmendComponent.Styles.COMMIT_MESSAGE_SUMMARY}>{commit.summary}</div>\n                <div className={ScmAmendComponent.Styles.LAST_COMMIT_MESSAGE_TIME}>{`${commit.authorDateRelative} by ${commit.authorName}`}</div>\n            </div>\n        </div>;\n    }\n\n    protected renderCommitCount(commits: number): React.ReactNode {\n        return <div className='notification-count-container scm-change-count'>\n            <span className='notification-count'>{commits}</span>\n        </div>;\n    }\n\n    protected renderCommitBeingAmended(commitData: { commit: ScmCommit, avatar: string }, isOldestAmendCommit: boolean): JSX.Element {\n        if (isOldestAmendCommit && this.state.transition.state !== 'none' && this.state.transition.direction === 'up') {\n            return <div className={ScmAmendComponent.Styles.COMMIT_AVATAR_AND_TEXT} style={{ flexGrow: 0, flexShrink: 0 }} key={commitData.commit.id}>\n                <div className='fixed-height-commit-container'>\n                    {this.renderCommitAvatarAndDetail(commitData)}\n                </div>\n            </div>;\n        } else {\n            return <div className={ScmAmendComponent.Styles.COMMIT_AVATAR_AND_TEXT} style={{ flexGrow: 0, flexShrink: 0 }} key={commitData.commit.id}>\n                {this.renderCommitAvatarAndDetail(commitData)}\n                {\n                    isOldestAmendCommit\n                        ? <div className={ScmAmendComponent.Styles.FLEX_CENTER}>\n                            <button className='theia-button' title={nls.localize('theia/scm/unamendCommit', 'Unamend commit')} onClick={this.unamend}>\n                                {nls.localize('theia/scm/unamend', 'Unamend')}\n                            </button>\n                        </div>\n                        : ''\n                }\n            </div>;\n        }\n    }\n\n    /*\n     * The style for the <div> containing the list of commits being amended.\n     * This div is scrollable.\n     */\n    protected styleAmendedCommits(): React.CSSProperties {\n        const base = {\n            display: 'flex',\n            whitespace: 'nowrap',\n            width: '100%',\n            minHeight: 0,\n            flexShrink: 1,\n            paddingTop: '2px',\n        };\n\n        switch (this.state.transition.state) {\n            case 'none':\n                return {\n                    ...base,\n                    flexDirection: 'column',\n                    overflowY: 'auto',\n                    marginBottom: '0',\n                };\n            case 'start':\n            case 'transitioning':\n                let startingMargin: number = 0;\n                let endingMargin: number = 0;\n                switch (this.state.transition.direction) {\n                    case 'down':\n                        startingMargin = 0;\n                        endingMargin = -32;\n                        break;\n                    case 'up':\n                        startingMargin = -32;\n                        endingMargin = 0;\n                        break;\n                }\n\n                switch (this.state.transition.state) {\n                    case 'start':\n                        return {\n                            ...base,\n                            flexDirection: 'column',\n                            overflowY: 'hidden',\n                            marginBottom: `${startingMargin}px`,\n                        };\n                    case 'transitioning':\n                        return {\n                            ...base,\n                            flexDirection: 'column',\n                            overflowY: 'hidden',\n                            marginBottom: `${endingMargin}px`,\n                            transitionProperty: 'margin-bottom',\n                            transitionDuration: `${TRANSITION_TIME_MS}ms`,\n                            transitionTimingFunction: 'linear'\n                        };\n                }\n        }\n    }\n\n    protected styleLastCommitMovingUp(transitionState: 'start' | 'transitioning'): React.CSSProperties {\n        return this.styleLastCommit(transitionState, 0, -28);\n    }\n\n    protected styleLastCommitMovingDown(transitionState: 'start' | 'transitioning'): React.CSSProperties {\n        return this.styleLastCommit(transitionState, -28, 0);\n    }\n\n    protected styleLastCommit(transitionState: 'start' | 'transitioning', startingMarginTop: number, startingMarginBottom: number): React.CSSProperties {\n        const base = {\n            display: 'flex',\n            width: '100%',\n            overflow: 'hidden',\n            paddingTop: 0,\n            paddingBottom: 0,\n            borderTop: 0,\n            borderBottom: 0,\n            height: this.lastCommitHeight * 2\n        };\n\n        // We end with top and bottom margins switched\n        const endingMarginTop = startingMarginBottom;\n        const endingMarginBottom = startingMarginTop;\n\n        switch (transitionState) {\n            case 'start':\n                return {\n                    ...base,\n                    position: 'relative',\n                    flexDirection: 'column',\n                    marginTop: startingMarginTop,\n                    marginBottom: startingMarginBottom,\n                };\n            case 'transitioning':\n                return {\n                    ...base,\n                    position: 'relative',\n                    flexDirection: 'column',\n                    marginTop: endingMarginTop,\n                    marginBottom: endingMarginBottom,\n                    transitionProperty: 'margin-top margin-bottom',\n                    transitionDuration: `${TRANSITION_TIME_MS}ms`,\n                    transitionTimingFunction: 'linear'\n                };\n        }\n    }\n\n    readonly unamendAll = () => this.doUnamendAll();\n    protected async doUnamendAll(): Promise<void> {\n        while (this.state.amendingCommits.length > 0) {\n            this.unamend();\n            await new Promise(resolve => setTimeout(resolve, TRANSITION_TIME_MS));\n        }\n    }\n\n    readonly clearAmending = () => this.doClearAmending();\n    protected async doClearAmending(): Promise<void> {\n        await this.clearAmendingCommits();\n        this.setState({ amendingCommits: [] });\n    }\n}\n\nexport namespace ScmAmendComponent {\n\n    export namespace Styles {\n        export const COMMIT_CONTAINER = 'theia-scm-commit-container';\n        export const COMMIT_AND_BUTTON = 'theia-scm-commit-and-button';\n        export const COMMIT_AVATAR_AND_TEXT = 'theia-scm-commit-avatar-and-text';\n        export const COMMIT_DETAILS = 'theia-scm-commit-details';\n        export const COMMIT_MESSAGE_AVATAR = 'theia-scm-commit-message-avatar';\n        export const COMMIT_MESSAGE_SUMMARY = 'theia-scm-commit-message-summary';\n        export const LAST_COMMIT_MESSAGE_TIME = 'theia-scm-commit-message-time';\n\n        export const FLEX_CENTER = 'theia-scm-flex-container-center';\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { SelectionService } from '@theia/core/lib/common';\nimport * as React from '@theia/core/shared/react';\nimport {\n    ContextMenuRenderer, ReactWidget, LabelProvider, KeybindingRegistry, StorageService\n} from '@theia/core/lib/browser';\nimport { ScmService } from './scm-service';\nimport { ScmAvatarService } from './scm-avatar-service';\nimport { ScmAmendComponent } from './scm-amend-component';\n\n@injectable()\nexport class ScmAmendWidget extends ReactWidget {\n\n    static ID = 'scm-amend-widget';\n\n    @inject(ScmService) protected readonly scmService: ScmService;\n    @inject(ScmAvatarService) protected readonly avatarService: ScmAvatarService;\n    @inject(StorageService) protected readonly storageService: StorageService;\n    @inject(SelectionService) protected readonly selectionService: SelectionService;\n    @inject(LabelProvider) protected readonly labelProvider: LabelProvider;\n    @inject(KeybindingRegistry) protected readonly keybindings: KeybindingRegistry;\n\n    protected shouldScrollToRow = true;\n\n    constructor(\n        @inject(ContextMenuRenderer) protected readonly contextMenuRenderer: ContextMenuRenderer,\n    ) {\n        super();\n        this.scrollOptions = {\n            suppressScrollX: true,\n            minScrollbarLength: 35\n        };\n        this.id = ScmAmendWidget.ID;\n    }\n\n    protected render(): React.ReactNode {\n        const repository = this.scmService.selectedRepository;\n        if (repository && repository.provider.amendSupport) {\n            return React.createElement(\n                ScmAmendComponent,\n                {\n                    key: `amend:${repository.provider.rootUri}`,\n                    style: { flexGrow: 0 },\n                    repository: repository,\n                    scmAmendSupport: repository.provider.amendSupport,\n                    setCommitMessage: this.setInputValue,\n                    avatarService: this.avatarService,\n                    storageService: this.storageService,\n                }\n            );\n        }\n    }\n\n    protected setInputValue = (event: React.FormEvent<HTMLTextAreaElement> | React.ChangeEvent<HTMLTextAreaElement> | string) => {\n        const repository = this.scmService.selectedRepository;\n        if (repository) {\n            repository.input.value = typeof event === 'string' ? event : event.currentTarget.value;\n        }\n    };\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { Md5 } from 'ts-md5';\n\n@injectable()\nexport class ScmAvatarService {\n\n    async getAvatar(email: string): Promise<string> {\n        const hash = Md5.hashStr(email);\n        return `https://www.gravatar.com/avatar/${hash}?d=robohash`;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport namespace ScmColors {\n    export const editorGutterModifiedBackground = 'editorGutter.modifiedBackground';\n    export const editorGutterAddedBackground = 'editorGutter.addedBackground';\n    export const editorGutterDeletedBackground = 'editorGutter.deletedBackground';\n    export const handledConflictMinimapOverviewRulerColor = 'mergeEditor.conflict.handled.minimapOverViewRuler';\n    export const unhandledConflictMinimapOverviewRulerColor = 'mergeEditor.conflict.unhandled.minimapOverViewRuler';\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { DisposableCollection } from '@theia/core';\nimport { Message } from '@theia/core/shared/@lumino/messaging';\nimport * as React from '@theia/core/shared/react';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport { ScmInput, ScmInputIssueType } from './scm-input';\nimport {\n    ContextMenuRenderer, ReactWidget, KeybindingRegistry, StatefulWidget\n} from '@theia/core/lib/browser';\nimport { ScmService } from './scm-service';\n\n@injectable()\nexport class ScmCommitWidget extends ReactWidget implements StatefulWidget {\n\n    static ID = 'scm-commit-widget';\n\n    @inject(ScmService) protected readonly scmService: ScmService;\n    @inject(KeybindingRegistry) protected readonly keybindings: KeybindingRegistry;\n\n    protected readonly toDisposeOnRepositoryChange = new DisposableCollection();\n\n    protected shouldScrollToRow = true;\n\n    /**\n     * Don't modify DOM use React! only exposed for `focusInput`\n     * Use `this.scmService.selectedRepository?.input.value` as a single source of truth!\n     */\n    protected readonly inputRef = React.createRef<HTMLTextAreaElement>();\n\n    constructor(\n        @inject(ContextMenuRenderer) protected readonly contextMenuRenderer: ContextMenuRenderer,\n    ) {\n        super();\n        this.scrollOptions = {\n            suppressScrollX: true,\n            minScrollbarLength: 35\n        };\n        this.addClass('theia-scm-commit');\n        this.id = ScmCommitWidget.ID;\n    }\n\n    protected override onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n        this.refreshOnRepositoryChange();\n        this.toDisposeOnDetach.push(this.scmService.onDidChangeSelectedRepository(() => {\n            this.refreshOnRepositoryChange();\n            this.update();\n        }));\n    }\n\n    protected refreshOnRepositoryChange(): void {\n        this.toDisposeOnRepositoryChange.dispose();\n        const repository = this.scmService.selectedRepository;\n        if (repository) {\n            this.toDisposeOnRepositoryChange.push(repository.provider.onDidChange(async () => {\n                this.update();\n            }));\n            this.toDisposeOnRepositoryChange.push(repository.provider.onDidChangeCommitTemplate(e => {\n                this.setInputValue(e);\n            }));\n        }\n    }\n\n    protected override onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        this.focus();\n    }\n\n    public focus(): void {\n        (this.inputRef.current || this.node).focus();\n    }\n\n    protected render(): React.ReactNode {\n        const repository = this.scmService.selectedRepository;\n        if (repository) {\n            return React.createElement('div', this.createContainerAttributes(), this.renderInput(repository.input));\n        }\n    }\n\n    /**\n     * Create the container attributes for the widget.\n     */\n    protected createContainerAttributes(): React.HTMLAttributes<HTMLElement> {\n        return {\n            style: { flexGrow: 0 }\n        };\n    }\n\n    protected renderInput(input: ScmInput): React.ReactNode {\n        let validationStatus = 'idle';\n        if (input.issue) {\n            switch (input.issue.type) {\n                case ScmInputIssueType.Error:\n                    validationStatus = 'error';\n                    break;\n                case ScmInputIssueType.Information:\n                    validationStatus = 'info';\n                    break;\n                case ScmInputIssueType.Warning:\n                    validationStatus = 'warning';\n                    break;\n            }\n        }\n        const validationMessage = input.issue ? input.issue.message : '';\n        const format = (value: string, ...args: string[]): string => {\n            if (args.length !== 0) {\n                return value.replace(/{(\\d+)}/g, (found, n) => {\n                    const i = parseInt(n);\n                    return isNaN(i) || i < 0 || i >= args.length ? found : args[i];\n                });\n            }\n            return value;\n        };\n\n        const keybinding = this.keybindings.acceleratorFor(this.keybindings.getKeybindingsForCommand('scm.acceptInput')[0]).join('+');\n        const message = format(input.placeholder || '', keybinding);\n        const textArea = input.visible &&\n            <TextareaAutosize\n                className={`${ScmCommitWidget.Styles.INPUT_MESSAGE} theia-input theia-scm-input-message-${validationStatus}`}\n                id={ScmCommitWidget.Styles.INPUT_MESSAGE}\n                placeholder={message}\n                spellCheck={false}\n                autoFocus={true}\n                value={input.value}\n                disabled={!input.enabled}\n                onChange={this.setInputValue}\n                ref={this.inputRef}\n                rows={1}\n                maxRows={6} /* from VS Code */\n            >\n            </TextareaAutosize>;\n        return <div className={ScmCommitWidget.Styles.INPUT_MESSAGE_CONTAINER}>\n            {textArea}\n            <div\n                className={\n                    `${ScmCommitWidget.Styles.VALIDATION_MESSAGE} ${ScmCommitWidget.Styles.NO_SELECT}\n                    theia-scm-validation-message-${validationStatus} theia-scm-input-message-${validationStatus}`\n                }\n                style={{\n                    display: !!input.issue ? 'block' : 'none'\n                }}>{validationMessage}</div>\n        </div>;\n    }\n\n    protected setInputValue = (event: React.FormEvent<HTMLTextAreaElement> | React.ChangeEvent<HTMLTextAreaElement> | string) => {\n        const repository = this.scmService.selectedRepository;\n        if (repository) {\n            repository.input.value = typeof event === 'string' ? event : event.currentTarget.value;\n        }\n    };\n\n    /**\n     * Store the tree state.\n     */\n    storeState(): ScmCommitWidget.State {\n        const message = this.scmService.selectedRepository?.input.value;\n        return { message };\n    }\n\n    /**\n     * Restore the state.\n     * @param oldState the old state object.\n     */\n    restoreState(oldState: ScmCommitWidget.State): void {\n        const value = oldState.message;\n        if (!value) {\n            return;\n        }\n        let repository = this.scmService.selectedRepository;\n        if (repository) {\n            repository.input.value = value;\n        } else {\n            const listener = this.scmService.onDidChangeSelectedRepository(() => {\n                repository = this.scmService.selectedRepository;\n                if (repository) {\n                    listener.dispose();\n                    if (!repository.input.value) {\n                        repository.input.value = value;\n                    }\n                }\n            });\n            this.toDispose.push(listener);\n        }\n    }\n\n}\n\nexport namespace ScmCommitWidget {\n\n    export namespace Styles {\n        export const INPUT_MESSAGE_CONTAINER = 'theia-scm-input-message-container';\n        export const INPUT_MESSAGE = 'theia-scm-input-message';\n        export const VALIDATION_MESSAGE = 'theia-scm-input-validation-message';\n        export const NO_SELECT = 'no-select';\n    }\n\n    export interface State {\n        message?: string\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { ContextKeyService, ContextKey } from '@theia/core/lib/browser/context-key-service';\n\n@injectable()\nexport class ScmContextKeyService {\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    protected _scmProvider: ContextKey<string | undefined>;\n    get scmProvider(): ContextKey<string | undefined> {\n        return this._scmProvider;\n    }\n\n    protected _scmResourceGroup: ContextKey<string | undefined>;\n    get scmResourceGroup(): ContextKey<string | undefined> {\n        return this._scmResourceGroup;\n    }\n\n    protected _scmResourceGroupState: ContextKey<string | undefined>;\n    get scmResourceGroupState(): ContextKey<string | undefined> {\n        return this._scmResourceGroupState;\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this._scmProvider = this.contextKeyService.createKey<string | undefined>('scmProvider', undefined);\n        this._scmResourceGroup = this.contextKeyService.createKey<string | undefined>('scmResourceGroup', undefined);\n        this._scmResourceGroupState = this.contextKeyService.createKey<string | undefined>('scmResourceGroupState', undefined);\n    }\n\n    match(expression: string | undefined): boolean {\n        return !expression || this.contextKeyService.match(expression);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { inject, injectable, postConstruct } from '@theia/core/shared/inversify';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport {\n    AbstractViewContribution,\n    FrontendApplicationContribution, LabelProvider,\n    StatusBar,\n    StatusBarAlignment,\n    StatusBarEntry,\n    KeybindingRegistry,\n    ViewContainerTitleOptions,\n    codicon,\n    StylingParticipant,\n    ColorTheme,\n    CssStyleCollector\n} from '@theia/core/lib/browser';\nimport { TabBarToolbarContribution, TabBarToolbarRegistry, TabBarToolbarAction } from '@theia/core/lib/browser/shell/tab-bar-toolbar';\nimport { CommandRegistry, Command, Disposable, DisposableCollection, CommandService, MenuModelRegistry } from '@theia/core/lib/common';\nimport { ContextKeyService, ContextKey } from '@theia/core/lib/browser/context-key-service';\nimport { ScmService } from './scm-service';\nimport { ScmWidget } from '../browser/scm-widget';\nimport URI from '@theia/core/lib/common/uri';\nimport { ScmQuickOpenService } from './scm-quick-open-service';\nimport { ColorContribution } from '@theia/core/lib/browser/color-application-contribution';\nimport { ColorRegistry } from '@theia/core/lib/browser/color-registry';\nimport { Color } from '@theia/core/lib/common/color';\nimport { ScmColors } from './scm-colors';\nimport { ScmCommand } from './scm-provider';\nimport { ScmDecorationsService } from '../browser/decorations/scm-decorations-service';\nimport { nls } from '@theia/core/lib/common/nls';\nimport { isHighContrast } from '@theia/core/lib/common/theme';\nimport { EditorMainMenu, EditorWidget } from '@theia/editor/lib/browser';\nimport { DirtyDiffNavigator } from './dirty-diff/dirty-diff-navigator';\nimport { MonacoDiffEditor } from '@theia/monaco/lib/browser/monaco-diff-editor';\n\nexport const SCM_WIDGET_FACTORY_ID = ScmWidget.ID;\nexport const SCM_VIEW_CONTAINER_ID = 'scm-view-container';\nexport const SCM_VIEW_CONTAINER_TITLE_OPTIONS: ViewContainerTitleOptions = {\n    label: nls.localizeByDefault('Source Control'),\n    iconClass: codicon('source-control'),\n    closeable: true\n};\n\nexport namespace ScmMenus {\n    export const CHANGES_GROUP = [...EditorMainMenu.GO, '6_changes_group'];\n}\n\nexport namespace SCM_COMMANDS {\n    export const CHANGE_REPOSITORY = {\n        id: 'scm.change.repository',\n        category: nls.localizeByDefault('Source Control'),\n        originalCategory: 'Source Control',\n        label: nls.localize('theia/scm/changeRepository', 'Change Repository...'),\n        originalLabel: 'Change Repository...'\n    };\n    export const ACCEPT_INPUT = {\n        id: 'scm.acceptInput'\n    };\n    export const TREE_VIEW_MODE = {\n        id: 'scm.viewmode.tree',\n        tooltip: nls.localizeByDefault('View as Tree'),\n        iconClass: codicon('list-tree'),\n        originalLabel: 'View as Tree',\n        label: nls.localizeByDefault('View as Tree')\n    };\n    export const LIST_VIEW_MODE = {\n        id: 'scm.viewmode.list',\n        tooltip: nls.localizeByDefault('View as List'),\n        iconClass: codicon('list-flat'),\n        originalLabel: 'View as List',\n        label: nls.localizeByDefault('View as List')\n    };\n    export const COLLAPSE_ALL = {\n        id: 'scm.collapseAll',\n        category: nls.localizeByDefault('Source Control'),\n        originalCategory: 'Source Control',\n        tooltip: nls.localizeByDefault('Collapse All'),\n        iconClass: codicon('collapse-all'),\n        label: nls.localizeByDefault('Collapse All'),\n        originalLabel: 'Collapse All'\n    };\n    export const GOTO_NEXT_CHANGE = Command.toDefaultLocalizedCommand({\n        id: 'workbench.action.editor.nextChange',\n        category: 'Source Control',\n        label: 'Go to Next Change',\n        iconClass: codicon('arrow-down')\n    });\n    export const GOTO_PREVIOUS_CHANGE = Command.toDefaultLocalizedCommand({\n        id: 'workbench.action.editor.previousChange',\n        category: 'Source Control',\n        label: 'Go to Previous Change',\n        iconClass: codicon('arrow-up')\n    });\n    export const SHOW_NEXT_CHANGE = Command.toDefaultLocalizedCommand({\n        id: 'editor.action.dirtydiff.next',\n        category: 'Source Control',\n        label: 'Show Next Change'\n    });\n    export const SHOW_PREVIOUS_CHANGE = Command.toDefaultLocalizedCommand({\n        id: 'editor.action.dirtydiff.previous',\n        category: 'Source Control',\n        label: 'Show Previous Change'\n    });\n    export const CLOSE_CHANGE_PEEK_VIEW = {\n        id: 'editor.action.dirtydiff.close',\n        category: nls.localizeByDefault('Source Control'),\n        originalCategory: 'Source Control',\n        label: nls.localize('theia/scm/dirtyDiff/close', 'Close Change Peek View'),\n        originalLabel: 'Close Change Peek View'\n    };\n}\n\nexport { ScmColors };\n\n@injectable()\nexport class ScmContribution extends AbstractViewContribution<ScmWidget> implements\n    FrontendApplicationContribution,\n    TabBarToolbarContribution,\n    ColorContribution,\n    StylingParticipant {\n\n    @inject(StatusBar) protected readonly statusBar: StatusBar;\n    @inject(ScmService) protected readonly scmService: ScmService;\n    @inject(ScmQuickOpenService) protected readonly scmQuickOpenService: ScmQuickOpenService;\n    @inject(LabelProvider) protected readonly labelProvider: LabelProvider;\n    @inject(CommandService) protected readonly commands: CommandService;\n    @inject(CommandRegistry) protected readonly commandRegistry: CommandRegistry;\n    @inject(ContextKeyService) protected readonly contextKeys: ContextKeyService;\n    @inject(ScmDecorationsService) protected readonly scmDecorationsService: ScmDecorationsService;\n    @inject(DirtyDiffNavigator) protected readonly dirtyDiffNavigator: DirtyDiffNavigator;\n\n    protected scmFocus: ContextKey<boolean>;\n\n    constructor() {\n        super({\n            viewContainerId: SCM_VIEW_CONTAINER_ID,\n            widgetId: SCM_WIDGET_FACTORY_ID,\n            widgetName: SCM_VIEW_CONTAINER_TITLE_OPTIONS.label,\n            defaultWidgetOptions: {\n                area: 'left',\n                rank: 300\n            },\n            toggleCommandId: 'scmView:toggle',\n            toggleKeybinding: 'ctrlcmd+shift+g'\n        });\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.scmFocus = this.contextKeys.createKey('scmFocus', false);\n    }\n\n    async initializeLayout(): Promise<void> {\n        await this.openView();\n    }\n\n    onStart(): void {\n        this.updateStatusBar();\n        this.scmService.onDidAddRepository(() => this.updateStatusBar());\n        this.scmService.onDidRemoveRepository(() => this.updateStatusBar());\n        this.scmService.onDidChangeSelectedRepository(() => this.updateStatusBar());\n        this.scmService.onDidChangeStatusBarCommands(() => this.updateStatusBar());\n        this.labelProvider.onDidChange(() => this.updateStatusBar());\n\n        this.updateContextKeys();\n        this.shell.onDidChangeCurrentWidget(() => this.updateContextKeys());\n\n        this.scmDecorationsService.onDirtyDiffUpdate(update => this.dirtyDiffNavigator.handleDirtyDiffUpdate(update));\n    }\n\n    protected updateContextKeys(): void {\n        this.scmFocus.set(this.shell.currentWidget instanceof ScmWidget);\n    }\n\n    override registerCommands(commandRegistry: CommandRegistry): void {\n        super.registerCommands(commandRegistry);\n        commandRegistry.registerCommand(SCM_COMMANDS.CHANGE_REPOSITORY, {\n            execute: () => this.scmQuickOpenService.changeRepository(),\n            isEnabled: () => this.scmService.repositories.length > 1\n        });\n        commandRegistry.registerCommand(SCM_COMMANDS.ACCEPT_INPUT, {\n            execute: () => this.acceptInput(),\n            isEnabled: () => !!this.scmFocus.get() && !!this.acceptInputCommand()\n        });\n\n        // Note that commands for dirty diff navigation need to be always available.\n        // This is consistent with behavior in VS Code, and also with other similar commands (such as `Next Problem/Previous Problem`) in Theia.\n        // See https://github.com/eclipse-theia/theia/pull/13104#discussion_r1497316614 for a detailed discussion.\n        commandRegistry.registerCommand(SCM_COMMANDS.GOTO_NEXT_CHANGE, {\n            execute: widget => {\n                if (widget instanceof EditorWidget && widget.editor instanceof MonacoDiffEditor) {\n                    widget.editor.diffNavigator.next();\n                    widget.activate();\n                } else {\n                    this.dirtyDiffNavigator.gotoNextChange();\n                }\n            },\n            isEnabled: widget => {\n                if (widget instanceof EditorWidget && widget.editor instanceof MonacoDiffEditor) {\n                    return widget.editor.diffNavigator.hasNext();\n                }\n                return true;\n            }\n        });\n        commandRegistry.registerCommand(SCM_COMMANDS.GOTO_PREVIOUS_CHANGE, {\n            execute: widget => {\n                if (widget instanceof EditorWidget && widget.editor instanceof MonacoDiffEditor) {\n                    widget.editor.diffNavigator.previous();\n                    widget.activate();\n                } else {\n                    this.dirtyDiffNavigator.gotoPreviousChange();\n                }\n            },\n            isEnabled: widget => {\n                if (widget instanceof EditorWidget && widget.editor instanceof MonacoDiffEditor) {\n                    return widget.editor.diffNavigator.hasPrevious();\n                }\n                return true;\n            }\n        });\n        commandRegistry.registerCommand(SCM_COMMANDS.SHOW_NEXT_CHANGE, {\n            execute: () => this.dirtyDiffNavigator.showNextChange()\n        });\n        commandRegistry.registerCommand(SCM_COMMANDS.SHOW_PREVIOUS_CHANGE, {\n            execute: () => this.dirtyDiffNavigator.showPreviousChange()\n        });\n        commandRegistry.registerCommand(SCM_COMMANDS.CLOSE_CHANGE_PEEK_VIEW, {\n            execute: () => this.dirtyDiffNavigator.closeChangePeekView()\n        });\n    }\n\n    override registerMenus(menus: MenuModelRegistry): void {\n        super.registerMenus(menus);\n        menus.registerMenuAction(ScmMenus.CHANGES_GROUP, {\n            commandId: SCM_COMMANDS.SHOW_NEXT_CHANGE.id,\n            label: nls.localizeByDefault('Next Change'),\n            order: '1'\n        });\n        menus.registerMenuAction(ScmMenus.CHANGES_GROUP, {\n            commandId: SCM_COMMANDS.SHOW_PREVIOUS_CHANGE.id,\n            label: nls.localizeByDefault('Previous Change'),\n            order: '2'\n        });\n    }\n\n    registerToolbarItems(registry: TabBarToolbarRegistry): void {\n        const viewModeEmitter = new Emitter<void>();\n        const registerToggleViewItem = (command: Command, mode: 'tree' | 'list') => {\n            const id = command.id;\n            const item: TabBarToolbarAction = {\n                id,\n                command: id,\n                tooltip: command.label,\n                onDidChange: viewModeEmitter.event\n            };\n            this.commandRegistry.registerCommand({ id, iconClass: command && command.iconClass }, {\n                execute: widget => {\n                    if (widget instanceof ScmWidget) {\n                        widget.viewMode = mode;\n                        viewModeEmitter.fire();\n                    }\n                },\n                isVisible: widget => {\n                    if (widget instanceof ScmWidget) {\n                        return !!this.scmService.selectedRepository\n                            && widget.viewMode !== mode;\n                    }\n                    return false;\n                },\n            });\n            registry.registerItem(item);\n        };\n        registerToggleViewItem(SCM_COMMANDS.TREE_VIEW_MODE, 'tree');\n        registerToggleViewItem(SCM_COMMANDS.LIST_VIEW_MODE, 'list');\n\n        this.commandRegistry.registerCommand(SCM_COMMANDS.COLLAPSE_ALL, {\n            execute: widget => {\n                if (widget instanceof ScmWidget && widget.viewMode === 'tree') {\n                    widget.collapseScmTree();\n                }\n            },\n            isVisible: widget => {\n                if (widget instanceof ScmWidget) {\n                    return !!this.scmService.selectedRepository && widget.viewMode === 'tree';\n                }\n                return false;\n            }\n        });\n\n        registry.registerItem({\n            id: SCM_COMMANDS.GOTO_PREVIOUS_CHANGE.id,\n            command: SCM_COMMANDS.GOTO_PREVIOUS_CHANGE.id,\n            isVisible: widget => widget instanceof EditorWidget && widget.editor instanceof MonacoDiffEditor,\n        });\n\n        registry.registerItem({\n            id: SCM_COMMANDS.GOTO_NEXT_CHANGE.id,\n            command: SCM_COMMANDS.GOTO_NEXT_CHANGE.id,\n            isVisible: widget => widget instanceof EditorWidget && widget.editor instanceof MonacoDiffEditor,\n        });\n\n        registry.registerItem({\n            ...SCM_COMMANDS.COLLAPSE_ALL,\n            command: SCM_COMMANDS.COLLAPSE_ALL.id\n        });\n    }\n\n    override registerKeybindings(keybindings: KeybindingRegistry): void {\n        super.registerKeybindings(keybindings);\n        keybindings.registerKeybinding({\n            command: SCM_COMMANDS.ACCEPT_INPUT.id,\n            keybinding: 'ctrlcmd+enter',\n            when: 'scmFocus'\n        });\n        keybindings.registerKeybinding({\n            command: SCM_COMMANDS.GOTO_NEXT_CHANGE.id,\n            keybinding: 'alt+f5',\n            when: 'editorTextFocus'\n        });\n        keybindings.registerKeybinding({\n            command: SCM_COMMANDS.GOTO_PREVIOUS_CHANGE.id,\n            keybinding: 'shift+alt+f5',\n            when: 'editorTextFocus'\n        });\n        keybindings.registerKeybinding({\n            command: SCM_COMMANDS.SHOW_NEXT_CHANGE.id,\n            keybinding: 'alt+f3',\n            when: 'editorTextFocus'\n        });\n        keybindings.registerKeybinding({\n            command: SCM_COMMANDS.SHOW_PREVIOUS_CHANGE.id,\n            keybinding: 'shift+alt+f3',\n            when: 'editorTextFocus'\n        });\n        keybindings.registerKeybinding({\n            command: SCM_COMMANDS.CLOSE_CHANGE_PEEK_VIEW.id,\n            keybinding: 'esc',\n            when: 'dirtyDiffVisible'\n        });\n    }\n\n    protected async acceptInput(): Promise<void> {\n        const command = this.acceptInputCommand();\n        if (command && command.command) {\n            await this.commands.executeCommand(command.command, ...command.arguments ? command.arguments : []);\n        }\n    }\n    protected acceptInputCommand(): ScmCommand | undefined {\n        const repository = this.scmService.selectedRepository;\n        if (!repository) {\n            return undefined;\n        }\n        return repository.provider.acceptInputCommand;\n    }\n\n    protected readonly statusBarDisposable = new DisposableCollection();\n    protected updateStatusBar(): void {\n        this.statusBarDisposable.dispose();\n        const repository = this.scmService.selectedRepository;\n        if (!repository) {\n            return;\n        }\n        const name = this.labelProvider.getName(new URI(repository.provider.rootUri));\n        if (this.scmService.repositories.length > 1) {\n            this.setStatusBarEntry(SCM_COMMANDS.CHANGE_REPOSITORY.id, {\n                text: `$(database) ${name}`,\n                tooltip: name.toString(),\n                command: SCM_COMMANDS.CHANGE_REPOSITORY.id,\n                alignment: StatusBarAlignment.LEFT,\n                priority: 100\n            });\n        }\n        const label = repository.provider.rootUri ? `${name} (${repository.provider.label})` : repository.provider.label;\n        this.scmService.statusBarCommands.forEach((value, index) => this.setStatusBarEntry(`scm.status.${index}`, {\n            text: value.title,\n            tooltip: label + (value.tooltip ? ` - ${value.tooltip}` : ''),\n            command: value.command,\n            arguments: value.arguments,\n            alignment: StatusBarAlignment.LEFT,\n            priority: 100\n        }));\n    }\n    protected setStatusBarEntry(id: string, entry: StatusBarEntry): void {\n        this.statusBar.setElement(id, entry);\n        this.statusBarDisposable.push(Disposable.create(() => this.statusBar.removeElement(id)));\n    }\n\n    /**\n     * It should be aligned with https://github.com/microsoft/vscode/blob/0dfa355b3ad185a6289ba28a99c141ab9e72d2be/src/vs/workbench/contrib/scm/browser/dirtydiffDecorator.ts#L808\n     */\n    registerColors(colors: ColorRegistry): void {\n        colors.register(\n            {\n                id: ScmColors.editorGutterModifiedBackground, defaults: {\n                    dark: '#1B81A8',\n                    light: '#2090D3',\n                    hcDark: '#1B81A8',\n                    hcLight: '#2090D3'\n                }, description: 'Editor gutter background color for lines that are modified.'\n            },\n            {\n                id: ScmColors.editorGutterAddedBackground, defaults: {\n                    dark: '#487E02',\n                    light: '#48985D',\n                    hcDark: '#487E02',\n                    hcLight: '#48985D'\n                }, description: 'Editor gutter background color for lines that are added.'\n            },\n            {\n                id: ScmColors.editorGutterDeletedBackground, defaults: {\n                    dark: 'editorError.foreground',\n                    light: 'editorError.foreground',\n                    hcDark: 'editorError.foreground',\n                    hcLight: 'editorError.foreground'\n                }, description: 'Editor gutter background color for lines that are deleted.'\n            },\n            {\n                id: 'minimapGutter.modifiedBackground', defaults: {\n                    dark: 'editorGutter.modifiedBackground',\n                    light: 'editorGutter.modifiedBackground',\n                    hcDark: 'editorGutter.modifiedBackground',\n                    hcLight: 'editorGutter.modifiedBackground'\n                }, description: 'Minimap gutter background color for lines that are modified.'\n            },\n            {\n                id: 'minimapGutter.addedBackground', defaults: {\n                    dark: 'editorGutter.addedBackground',\n                    light: 'editorGutter.addedBackground',\n                    hcDark: 'editorGutter.modifiedBackground',\n                    hcLight: 'editorGutter.modifiedBackground'\n                }, description: 'Minimap gutter background color for lines that are added.'\n            },\n            {\n                id: 'minimapGutter.deletedBackground', defaults: {\n                    dark: 'editorGutter.deletedBackground',\n                    light: 'editorGutter.deletedBackground',\n                    hcDark: 'editorGutter.deletedBackground',\n                    hcLight: 'editorGutter.deletedBackground'\n                }, description: 'Minimap gutter background color for lines that are deleted.'\n            },\n            {\n                id: 'editorOverviewRuler.modifiedForeground', defaults: {\n                    dark: Color.transparent(ScmColors.editorGutterModifiedBackground, 0.6),\n                    light: Color.transparent(ScmColors.editorGutterModifiedBackground, 0.6),\n                    hcDark: Color.transparent(ScmColors.editorGutterModifiedBackground, 0.6),\n                    hcLight: Color.transparent(ScmColors.editorGutterModifiedBackground, 0.6)\n                }, description: 'Overview ruler marker color for modified content.'\n            },\n            {\n                id: 'editorOverviewRuler.addedForeground', defaults: {\n                    dark: Color.transparent(ScmColors.editorGutterAddedBackground, 0.6),\n                    light: Color.transparent(ScmColors.editorGutterAddedBackground, 0.6),\n                    hcDark: Color.transparent(ScmColors.editorGutterAddedBackground, 0.6),\n                    hcLight: Color.transparent(ScmColors.editorGutterAddedBackground, 0.6)\n                }, description: 'Overview ruler marker color for added content.'\n            },\n            {\n                id: 'editorOverviewRuler.deletedForeground', defaults: {\n                    dark: Color.transparent(ScmColors.editorGutterDeletedBackground, 0.6),\n                    light: Color.transparent(ScmColors.editorGutterDeletedBackground, 0.6),\n                    hcDark: Color.transparent(ScmColors.editorGutterDeletedBackground, 0.6),\n                    hcLight: Color.transparent(ScmColors.editorGutterDeletedBackground, 0.6)\n                }, description: 'Overview ruler marker color for deleted content.'\n            }\n        );\n    }\n\n    registerThemeStyle(theme: ColorTheme, collector: CssStyleCollector): void {\n        const contrastBorder = theme.getColor('contrastBorder');\n        if (contrastBorder && isHighContrast(theme.type)) {\n            collector.addRule(`\n                .theia-scm-input-message-container textarea {\n                    outline: var(--theia-border-width) solid ${contrastBorder};\n                    outline-offset: -1px;\n                }\n            `);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as debounce from 'p-debounce';\nimport { Disposable, DisposableCollection, Emitter } from '@theia/core/lib/common';\nimport { JSONExt, JSONObject } from '@theia/core/shared/@lumino/coreutils';\n\nexport interface ScmInputIssue {\n    message: string;\n    type: ScmInputIssueType;\n}\n\nexport enum ScmInputIssueType {\n    Error = 0,\n    Warning = 1,\n    Information = 2\n}\n\nexport interface ScmInputValidator {\n    (value: string): Promise<ScmInputIssue | undefined>;\n}\n\nexport interface ScmInputOptions {\n    placeholder?: string;\n    validator?: ScmInputValidator;\n    visible?: boolean;\n    enabled?: boolean;\n}\n\nexport interface ScmInputData {\n    value?: string;\n    issue?: ScmInputIssue;\n}\n\nexport class ScmInput implements Disposable {\n\n    protected readonly onDidChangeEmitter = new Emitter<void>();\n    readonly onDidChange = this.onDidChangeEmitter.event;\n    protected fireDidChange(): void {\n        this.onDidChangeEmitter.fire(undefined);\n    }\n\n    protected readonly onDidFocusEmitter = new Emitter<void>();\n    readonly onDidFocus = this.onDidFocusEmitter.event;\n\n    protected readonly toDispose = new DisposableCollection(\n        this.onDidChangeEmitter,\n        this.onDidFocusEmitter\n    );\n\n    constructor(\n        protected readonly options: ScmInputOptions = {}\n    ) { }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected _placeholder = this.options.placeholder;\n    get placeholder(): string | undefined {\n        return this._placeholder;\n    }\n    set placeholder(placeholder: string | undefined) {\n        if (this._placeholder === placeholder) {\n            return;\n        }\n        this._placeholder = placeholder;\n        this.fireDidChange();\n    }\n\n    protected _value: string | undefined;\n    get value(): string {\n        return this._value || '';\n    }\n    set value(value: string) {\n        if (this.value === value) {\n            return;\n        }\n        this._value = value;\n        this.fireDidChange();\n        this.validate();\n    }\n\n    protected _visible = this.options.visible;\n    get visible(): boolean {\n        return this._visible ?? true;\n    }\n    set visible(visible: boolean) {\n        if (this.visible === visible) {\n            return;\n        }\n        this._visible = visible;\n        this.fireDidChange();\n        this.validate();\n    }\n\n    protected _enabled = this.options.enabled ?? true;\n    get enabled(): boolean {\n        return this._enabled;\n    }\n    set enabled(enabled: boolean) {\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        this.fireDidChange();\n        this.validate();\n    }\n\n    protected _issue: ScmInputIssue | undefined;\n    get issue(): ScmInputIssue | undefined {\n        return this._issue;\n    }\n    set issue(issue: ScmInputIssue | undefined) {\n        if (JSONExt.deepEqual(<JSONObject>(this._issue || {}), <JSONObject>(issue || {}))) {\n            return;\n        }\n        this._issue = issue;\n        this.fireDidChange();\n    }\n\n    validate = debounce(async (): Promise<void> => {\n        if (this.options.validator) {\n            this.issue = await this.options.validator(this.value);\n        }\n    }, 200);\n\n    focus(): void {\n        this.onDidFocusEmitter.fire(undefined);\n    }\n\n    toJSON(): ScmInputData {\n        return {\n            value: this._value,\n            issue: this._issue\n        };\n    }\n\n    fromJSON(data: ScmInputData | any): void {\n        if (this._value !== undefined) {\n            return;\n        }\n        if ('value' in data) {\n            this._value = data.value;\n            this._issue = data.issue;\n            this.fireDidChange();\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport * as React from '@theia/core/shared/react';\nimport { ReactWidget } from '@theia/core/lib/browser';\nimport { AlertMessage } from '@theia/core/lib/browser/widgets/alert-message';\nimport { nls } from '@theia/core/lib/common/nls';\n\n@injectable()\nexport class ScmNoRepositoryWidget extends ReactWidget {\n\n    static ID = 'scm-no-repository-widget';\n\n    constructor() {\n        super();\n        this.addClass('theia-scm-no-repository');\n        this.id = ScmNoRepositoryWidget.ID;\n    }\n\n    protected render(): React.ReactNode {\n        return <AlertMessage\n            type='WARNING'\n            header={nls.localize('theia/scm/noRepositoryFound', 'No repository found')}\n        />;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { interfaces } from '@theia/core/shared/inversify';\nimport {\n    createPreferenceProxy,\n    PreferenceProxy,\n    PreferenceService,\n    PreferenceSchema,\n    PreferenceContribution\n} from '@theia/core/lib/browser/preferences';\nimport { nls } from '@theia/core/lib/common/nls';\n\nexport const scmPreferenceSchema: PreferenceSchema = {\n    type: 'object',\n    properties: {\n        'scm.defaultViewMode': {\n            type: 'string',\n            enum: ['tree', 'list'],\n            enumDescriptions: [\n                nls.localizeByDefault('Show the repository changes as a tree.'),\n                nls.localizeByDefault('Show the repository changes as a list.')\n            ],\n            description: nls.localizeByDefault('Controls the default Source Control repository view mode.'),\n            default: 'list'\n        }\n    }\n};\n\nexport interface ScmConfiguration {\n    'scm.defaultViewMode': 'tree' | 'list'\n}\n\nexport const ScmPreferenceContribution = Symbol('ScmPreferenceContribution');\nexport const ScmPreferences = Symbol('ScmPreferences');\nexport type ScmPreferences = PreferenceProxy<ScmConfiguration>;\n\nexport function createScmPreferences(preferences: PreferenceService, schema: PreferenceSchema = scmPreferenceSchema): ScmPreferences {\n    return createPreferenceProxy(preferences, schema);\n}\n\nexport function bindScmPreferences(bind: interfaces.Bind): void {\n    bind(ScmPreferences).toDynamicValue((ctx: interfaces.Context) => {\n        const preferences = ctx.container.get<PreferenceService>(PreferenceService);\n        const contribution = ctx.container.get<PreferenceContribution>(ScmPreferenceContribution);\n        return createScmPreferences(preferences, contribution.schema);\n    }).inSingletonScope();\n    bind(ScmPreferenceContribution).toConstantValue({ schema: scmPreferenceSchema });\n    bind(PreferenceContribution).toService(ScmPreferenceContribution);\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, optional } from '@theia/core/shared/inversify';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport URI from '@theia/core/lib/common/uri';\nimport { ScmService } from './scm-service';\nimport { LabelProvider } from '@theia/core/lib/browser/label-provider';\nimport { QuickInputService } from '@theia/core/lib/browser';\n\n@injectable()\nexport class ScmQuickOpenService {\n\n    @inject(QuickInputService) @optional() protected readonly quickInputService: QuickInputService;\n    @inject(MessageService) protected readonly messageService: MessageService;\n    @inject(LabelProvider) protected readonly labelProvider: LabelProvider;\n    @inject(ScmService) protected readonly scmService: ScmService;\n\n    async changeRepository(): Promise<void> {\n        const repositories = this.scmService.repositories;\n        if (repositories.length > 1) {\n            const items = await Promise.all(repositories.map(async repository => {\n                const uri = new URI(repository.provider.rootUri);\n                return {\n                    label: this.labelProvider.getName(uri),\n                    description: this.labelProvider.getLongName(uri),\n                    execute: () => {\n                        this.scmService.selectedRepository = repository;\n                    }\n                };\n            }));\n            this.quickInputService?.showQuickPick(items, { placeholder: 'Select repository to work with:' });\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable, DisposableCollection, Emitter } from '@theia/core/lib/common';\nimport { ScmInput, ScmInputOptions } from './scm-input';\nimport { ScmProvider } from './scm-provider';\n\nexport interface ScmProviderOptions {\n    input?: ScmInputOptions\n}\n\nexport class ScmRepository implements Disposable {\n\n    protected readonly onDidChangeEmitter = new Emitter<void>();\n    readonly onDidChange = this.onDidChangeEmitter.event;\n    protected fireDidChange(): void {\n        this.onDidChangeEmitter.fire(undefined);\n    }\n\n    protected readonly toDispose = new DisposableCollection(this.onDidChangeEmitter);\n\n    readonly input: ScmInput;\n\n    constructor(\n        readonly provider: ScmProvider,\n        protected readonly options: ScmProviderOptions = {}\n    ) {\n        this.toDispose.pushAll([\n            this.provider,\n            this.input = new ScmInput(options.input),\n            this.input.onDidChange(() => this.fireDidChange())\n        ]);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { DisposableCollection, Emitter } from '@theia/core/lib/common';\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { ScmContextKeyService } from './scm-context-key-service';\nimport { ScmRepository, ScmProviderOptions } from './scm-repository';\nimport { ScmCommand, ScmProvider } from './scm-provider';\nimport URI from '@theia/core/lib/common/uri';\n\n@injectable()\nexport class ScmService {\n\n    @inject(ScmContextKeyService)\n    protected readonly contextKeys: ScmContextKeyService;\n\n    protected readonly _repositories = new Map<string, ScmRepository>();\n    protected _selectedRepository: ScmRepository | undefined;\n\n    protected readonly onDidChangeSelectedRepositoryEmitter = new Emitter<ScmRepository | undefined>();\n    readonly onDidChangeSelectedRepository = this.onDidChangeSelectedRepositoryEmitter.event;\n\n    protected readonly onDidAddRepositoryEmitter = new Emitter<ScmRepository>();\n    readonly onDidAddRepository = this.onDidAddRepositoryEmitter.event;\n\n    protected readonly onDidRemoveRepositoryEmitter = new Emitter<ScmRepository>();\n    readonly onDidRemoveRepository = this.onDidAddRepositoryEmitter.event;\n\n    protected readonly onDidChangeStatusBarCommandsEmitter = new Emitter<ScmCommand[]>();\n    readonly onDidChangeStatusBarCommands = this.onDidChangeStatusBarCommandsEmitter.event;\n    protected fireDidChangeStatusBarCommands(): void {\n        this.onDidChangeStatusBarCommandsEmitter.fire(this.statusBarCommands);\n    }\n    get statusBarCommands(): ScmCommand[] {\n        const repository = this.selectedRepository;\n        return repository && repository.provider.statusBarCommands || [];\n    }\n\n    get repositories(): ScmRepository[] {\n        return [...this._repositories.values()];\n    }\n\n    get selectedRepository(): ScmRepository | undefined {\n        return this._selectedRepository;\n    }\n\n    protected readonly toDisposeOnSelected = new DisposableCollection();\n    set selectedRepository(repository: ScmRepository | undefined) {\n        if (this._selectedRepository === repository) {\n            return;\n        }\n        this.toDisposeOnSelected.dispose();\n        this._selectedRepository = repository;\n        if (this._selectedRepository) {\n            if (this._selectedRepository.provider.onDidChangeStatusBarCommands) {\n                this.toDisposeOnSelected.push(this._selectedRepository.provider.onDidChangeStatusBarCommands(() => this.fireDidChangeStatusBarCommands()));\n            }\n        }\n        this.onDidChangeSelectedRepositoryEmitter.fire(this._selectedRepository);\n        this.fireDidChangeStatusBarCommands();\n    }\n\n    findRepository(uri: URI): ScmRepository | undefined {\n        const reposSorted = this.repositories.sort(\n            (ra: ScmRepository, rb: ScmRepository) => rb.provider.rootUri.length - ra.provider.rootUri.length\n        );\n        return reposSorted.find(repo => new URI(repo.provider.rootUri).isEqualOrParent(uri));\n    }\n\n    registerScmProvider(provider: ScmProvider, options: ScmProviderOptions = {}): ScmRepository {\n        const key = provider.id + ':' + provider.rootUri;\n        if (this._repositories.has(key)) {\n            throw new Error(`${provider.label} provider for '${provider.rootUri}' already exists.`);\n        }\n        const repository = new ScmRepository(provider, options);\n        const dispose = repository.dispose;\n        repository.dispose = () => {\n            this._repositories.delete(key);\n            dispose.bind(repository)();\n            this.onDidRemoveRepositoryEmitter.fire(repository);\n            if (this._selectedRepository === repository) {\n                this.selectedRepository = this._repositories.values().next().value;\n            }\n        };\n        this._repositories.set(key, repository);\n        this.onDidAddRepositoryEmitter.fire(repository);\n        if (this._repositories.size === 1) {\n            this.selectedRepository = repository;\n        }\n        return repository;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { TreeModelImpl, TreeNode, TreeProps, CompositeTreeNode, SelectableTreeNode, ExpandableTreeNode } from '@theia/core/lib/browser/tree';\nimport URI from '@theia/core/lib/common/uri';\nimport { ScmProvider, ScmResourceGroup, ScmResource, ScmResourceDecorations } from './scm-provider';\nimport { ScmContextKeyService } from './scm-context-key-service';\n\nexport const ScmTreeModelProps = Symbol('ScmTreeModelProps');\nexport interface ScmTreeModelProps {\n    defaultExpansion?: 'collapsed' | 'expanded';\n    nestingThreshold?: number;\n}\n\nexport interface ScmFileChangeRootNode extends CompositeTreeNode {\n    rootUri: string;\n    children: ScmFileChangeGroupNode[];\n}\n\nexport interface ScmFileChangeGroupNode extends ExpandableTreeNode {\n    groupId: string;\n    groupLabel: string;\n    children: (ScmFileChangeFolderNode | ScmFileChangeNode)[];\n}\n\nexport namespace ScmFileChangeGroupNode {\n    export function is(node: TreeNode): node is ScmFileChangeGroupNode {\n        return 'groupId' in node && 'children' in node\n            && !ScmFileChangeFolderNode.is(node);\n    }\n}\n\nexport interface ScmFileChangeFolderNode extends ExpandableTreeNode, SelectableTreeNode {\n    groupId: string;\n    path: string;\n    sourceUri: string;\n    children: (ScmFileChangeFolderNode | ScmFileChangeNode)[];\n}\n\nexport namespace ScmFileChangeFolderNode {\n    export function is(node: TreeNode): node is ScmFileChangeFolderNode {\n        return 'groupId' in node && 'sourceUri' in node && 'path' in node && 'children' in node;\n    }\n}\n\nexport interface ScmFileChangeNode extends SelectableTreeNode {\n    sourceUri: string;\n    decorations?: ScmResourceDecorations;\n}\n\nexport namespace ScmFileChangeNode {\n    export function is(node: TreeNode): node is ScmFileChangeNode {\n        return 'sourceUri' in node\n            && !ScmFileChangeFolderNode.is(node);\n    }\n    export function getGroupId(node: ScmFileChangeNode): string {\n        const parentNode = node.parent;\n        if (!(parentNode && (ScmFileChangeFolderNode.is(parentNode) || ScmFileChangeGroupNode.is(parentNode)))) {\n            throw new Error('bad node');\n        }\n        return parentNode.groupId;\n    }\n\n}\n\n@injectable()\nexport abstract class ScmTreeModel extends TreeModelImpl {\n\n    private _languageId: string | undefined;\n\n    protected provider: ScmProvider | undefined;\n\n    @inject(TreeProps) protected readonly props: ScmTreeModelProps;\n\n    @inject(ScmContextKeyService) protected readonly contextKeys: ScmContextKeyService;\n\n    get languageId(): string | undefined {\n        return this._languageId;\n    }\n\n    abstract canTabToWidget(): boolean;\n\n    protected _viewMode: 'tree' | 'list' = 'list';\n    set viewMode(id: 'tree' | 'list') {\n        const oldSelection = this.selectedNodes;\n        this._viewMode = id;\n        if (this.root) {\n            this.root = this.createTree();\n\n            for (const oldSelectedNode of oldSelection) {\n                const newNode = this.getNode(oldSelectedNode.id);\n                if (SelectableTreeNode.is(newNode)) {\n                    this.revealNode(newNode);  // this call can run asynchronously\n                }\n            }\n        }\n    }\n    get viewMode(): 'tree' | 'list' {\n        return this._viewMode;\n    }\n\n    abstract get rootUri(): string | undefined;\n    abstract get groups(): ScmResourceGroup[];\n\n    protected createTree(): ScmFileChangeRootNode {\n        const root = {\n            id: 'file-change-tree-root',\n            parent: undefined,\n            visible: false,\n            rootUri: this.rootUri,\n            children: []\n        } as ScmFileChangeRootNode;\n\n        const groupNodes = this.groups\n            .filter(group => !!group.resources.length || !group.hideWhenEmpty)\n            .map(group => this.toGroupNode(group, root));\n        root.children = groupNodes;\n\n        return root;\n    }\n\n    protected toGroupNode(group: ScmResourceGroup, parent: CompositeTreeNode): ScmFileChangeGroupNode {\n        const groupNode: ScmFileChangeGroupNode = {\n            id: `${group.id}`,\n            groupId: group.id,\n            groupLabel: group.label,\n            parent,\n            children: [],\n            expanded: true,\n        };\n\n        const sortedResources = group.resources.sort((r1, r2) =>\n            r1.sourceUri.toString().localeCompare(r2.sourceUri.toString())\n        );\n\n        switch (this._viewMode) {\n            case 'list':\n                groupNode.children = sortedResources.map(resource => this.toFileChangeNode(resource, groupNode));\n                break;\n            case 'tree':\n                const rootUri = group.provider.rootUri;\n                if (rootUri) {\n                    const resourcePaths = sortedResources.map(resource => {\n                        const relativePath = new URI(rootUri).relative(resource.sourceUri);\n                        const pathParts = relativePath ? relativePath.toString().split('/') : [];\n                        return { resource, pathParts };\n                    });\n                    groupNode.children = this.buildFileChangeTree(resourcePaths, 0, sortedResources.length, 0, groupNode);\n                }\n                break;\n        }\n\n        return groupNode;\n    }\n\n    protected buildFileChangeTree(\n        sortedResources: { resource: ScmResource, pathParts: string[] }[],\n        start: number,\n        end: number,\n        level: number,\n        parent: (ScmFileChangeGroupNode | ScmFileChangeFolderNode)\n    ): (ScmFileChangeFolderNode | ScmFileChangeNode)[] {\n        const result: (ScmFileChangeFolderNode | ScmFileChangeNode)[] = [];\n\n        let folderStart = start;\n        while (folderStart < end) {\n            const firstFileChange = sortedResources[folderStart];\n            if (level === firstFileChange.pathParts.length - 1) {\n                result.push(this.toFileChangeNode(firstFileChange.resource, parent));\n                folderStart++;\n            } else {\n                let index = folderStart + 1;\n                while (index < end) {\n                    if (sortedResources[index].pathParts[level] !== firstFileChange.pathParts[level]) {\n                        break;\n                    }\n                    index++;\n                }\n                const folderEnd = index;\n\n                const nestingThreshold = this.props.nestingThreshold || 1;\n                if (folderEnd - folderStart < nestingThreshold) {\n                    // Inline these (i.e. do not create another level in the tree)\n                    for (let i = folderStart; i < folderEnd; i++) {\n                        result.push(this.toFileChangeNode(sortedResources[i].resource, parent));\n                    }\n                } else {\n                    const firstFileParts = firstFileChange.pathParts;\n                    const lastFileParts = sortedResources[folderEnd - 1].pathParts;\n                    // Multiple files with first folder.\n                    // See if more folder levels match and include those if so.\n                    let thisLevel = level + 1;\n                    while (thisLevel < firstFileParts.length - 1 && thisLevel < lastFileParts.length - 1 && firstFileParts[thisLevel] === lastFileParts[thisLevel]) {\n                        thisLevel++;\n                    }\n                    const nodeRelativePath = firstFileParts.slice(level, thisLevel).join('/');\n                    result.push(this.toFileChangeFolderNode(sortedResources, folderStart, folderEnd, thisLevel, nodeRelativePath, parent));\n                }\n                folderStart = folderEnd;\n            }\n        };\n        return result.sort(this.compareNodes);\n    }\n\n    protected compareNodes = (a: ScmFileChangeFolderNode | ScmFileChangeNode, b: ScmFileChangeFolderNode | ScmFileChangeNode) => this.doCompareNodes(a, b);\n    protected doCompareNodes(a: ScmFileChangeFolderNode | ScmFileChangeNode, b: ScmFileChangeFolderNode | ScmFileChangeNode): number {\n        const isFolderA = ScmFileChangeFolderNode.is(a);\n        const isFolderB = ScmFileChangeFolderNode.is(b);\n        if (isFolderA && !isFolderB) {\n            return -1;\n        }\n        if (isFolderB && !isFolderA) {\n            return 1;\n        }\n        return a.sourceUri.localeCompare(b.sourceUri);\n    }\n\n    protected toFileChangeFolderNode(\n        resources: { resource: ScmResource, pathParts: string[] }[],\n        start: number,\n        end: number,\n        level: number,\n        nodeRelativePath: string,\n        parent: (ScmFileChangeGroupNode | ScmFileChangeFolderNode)\n    ): ScmFileChangeFolderNode {\n        const rootUri = this.getRoot(parent).rootUri;\n        let parentPath: string = rootUri;\n        if (ScmFileChangeFolderNode.is(parent)) {\n            parentPath = parent.sourceUri;\n        }\n        const sourceUri = new URI(parentPath).resolve(nodeRelativePath);\n\n        const defaultExpansion = this.props.defaultExpansion ? (this.props.defaultExpansion === 'expanded') : true;\n        const id = `${parent.groupId}:${String(sourceUri)}`;\n        const oldNode = this.getNode(id);\n        const folderNode: ScmFileChangeFolderNode = {\n            id,\n            groupId: parent.groupId,\n            path: nodeRelativePath,\n            sourceUri: String(sourceUri),\n            children: [],\n            parent,\n            expanded: ExpandableTreeNode.is(oldNode) ? oldNode.expanded : defaultExpansion,\n            selected: SelectableTreeNode.is(oldNode) && oldNode.selected,\n        };\n        folderNode.children = this.buildFileChangeTree(resources, start, end, level, folderNode);\n        return folderNode;\n    }\n\n    protected getRoot(node: ScmFileChangeGroupNode | ScmFileChangeFolderNode): ScmFileChangeRootNode {\n        let parent = node.parent!;\n        while (ScmFileChangeGroupNode.is(parent) && ScmFileChangeFolderNode.is(parent)) {\n            parent = parent.parent!;\n        }\n        return parent as ScmFileChangeRootNode;\n    }\n\n    protected toFileChangeNode(resource: ScmResource, parent: CompositeTreeNode): ScmFileChangeNode {\n        const id = `${resource.group.id}:${String(resource.sourceUri)}`;\n        const oldNode = this.getNode(id);\n        const node = {\n            id,\n            sourceUri: String(resource.sourceUri),\n            decorations: resource.decorations,\n            parent,\n            selected: SelectableTreeNode.is(oldNode) && oldNode.selected,\n        };\n        if (node.selected) {\n            this.selectionService.addSelection(node);\n        }\n        return node;\n    }\n\n    protected async revealNode(node: TreeNode): Promise<void> {\n        if (ScmFileChangeFolderNode.is(node) || ScmFileChangeNode.is(node)) {\n            const parentNode = node.parent;\n            if (ExpandableTreeNode.is(parentNode)) {\n                await this.revealNode(parentNode);\n                if (!parentNode.expanded) {\n                    await this.expandNode(parentNode);\n                }\n            }\n        }\n    }\n\n    getResourceFromNode(node: ScmFileChangeNode): ScmResource | undefined {\n        const groupId = ScmFileChangeNode.getGroupId(node);\n        const group = this.findGroup(groupId);\n        if (group) {\n            return group.resources.find(r => String(r.sourceUri) === node.sourceUri)!;\n        }\n    }\n\n    getResourceGroupFromNode(node: ScmFileChangeGroupNode): ScmResourceGroup | undefined {\n        return this.findGroup(node.groupId);\n    }\n\n    getResourcesFromFolderNode(node: ScmFileChangeFolderNode): ScmResource[] {\n        const resources: ScmResource[] = [];\n        const group = this.findGroup(node.groupId);\n        if (group) {\n            this.collectResources(resources, node, group);\n        }\n        return resources;\n\n    }\n    getSelectionArgs(selectedNodes: Readonly<SelectableTreeNode[]>): ScmResource[] {\n        const resources: ScmResource[] = [];\n        for (const node of selectedNodes) {\n            if (ScmFileChangeNode.is(node)) {\n                const groupId = ScmFileChangeNode.getGroupId(node);\n                const group = this.findGroup(groupId);\n                if (group) {\n                    const selectedResource = group.resources.find(r => String(r.sourceUri) === node.sourceUri);\n                    if (selectedResource) {\n                        resources.push(selectedResource);\n                    }\n                }\n            }\n            if (ScmFileChangeFolderNode.is(node)) {\n                const group = this.findGroup(node.groupId);\n                if (group) {\n                    this.collectResources(resources, node, group);\n                }\n            }\n        }\n        // Remove duplicates which may occur if user selected folder and nested folder\n        return resources.filter((item1, index) => resources.findIndex(item2 => item1.sourceUri === item2.sourceUri) === index);\n    }\n\n    protected collectResources(resources: ScmResource[], node: TreeNode, group: ScmResourceGroup): void {\n        if (ScmFileChangeFolderNode.is(node)) {\n            for (const child of node.children) {\n                this.collectResources(resources, child, group);\n            }\n        } else if (ScmFileChangeNode.is(node)) {\n            const resource = group.resources.find(r => String(r.sourceUri) === node.sourceUri)!;\n            resources.push(resource);\n        }\n    }\n\n    execInNodeContext(node: TreeNode, callback: () => void): void {\n        if (!this.provider) {\n            return;\n        }\n\n        let groupId: string;\n        if (ScmFileChangeGroupNode.is(node) || ScmFileChangeFolderNode.is(node)) {\n            groupId = node.groupId;\n        } else if (ScmFileChangeNode.is(node)) {\n            groupId = ScmFileChangeNode.getGroupId(node);\n        } else {\n            return;\n        }\n\n        this.contextKeys.scmProvider.set(this.provider.id);\n        this.contextKeys.scmResourceGroup.set(groupId);\n        this.contextKeys.scmResourceGroupState.set(this.findGroup(groupId)?.contextValue);\n        try {\n            callback();\n        } finally {\n        }\n    }\n\n    /*\n     * Normally the group would always be expected to be found.  However if the tree is restored\n     * in restoreState then the tree may be rendered before the groups have been created\n     * in the provider.  The provider's groups property will be empty in such a situation.\n     * We want to render the tree (as that is the point of restoreState, we can render\n     * the tree in the saved state before the provider has provided status).  We therefore must\n     * be prepared to render the tree without having the ScmResourceGroup or ScmResource\n     * objects.\n     */\n    findGroup(groupId: string): ScmResourceGroup | undefined {\n        return this.groups.find(g => g.id === groupId);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    override storeState(): any {\n        return {\n            ...super.storeState(),\n            mode: this.viewMode,\n        };\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    override restoreState(oldState: any): void {\n        super.restoreState(oldState);\n        this.viewMode = oldState.mode === 'tree' ? 'tree' : 'list';\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable no-null/no-null, @typescript-eslint/no-explicit-any */\n\nimport * as React from '@theia/core/shared/react';\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { isOSX } from '@theia/core/lib/common/os';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport { TreeWidget, TreeNode, SelectableTreeNode, TreeModel, TreeProps, NodeProps, TREE_NODE_SEGMENT_CLASS, TREE_NODE_SEGMENT_GROW_CLASS } from '@theia/core/lib/browser/tree';\nimport { ScmTreeModel, ScmFileChangeRootNode, ScmFileChangeGroupNode, ScmFileChangeFolderNode, ScmFileChangeNode } from './scm-tree-model';\nimport { MenuModelRegistry, CompoundMenuNode, MenuPath, CommandMenu } from '@theia/core/lib/common/menu';\nimport { ScmResource } from './scm-provider';\nimport { ContextMenuRenderer, LabelProvider, CorePreferences, DiffUris, ACTION_ITEM } from '@theia/core/lib/browser';\nimport { ScmContextKeyService } from './scm-context-key-service';\nimport { EditorWidget, EditorManager, DiffNavigatorProvider } from '@theia/editor/lib/browser';\nimport { IconThemeService } from '@theia/core/lib/browser/icon-theme-service';\nimport { ColorRegistry } from '@theia/core/lib/browser/color-registry';\nimport { Decoration, DecorationsService } from '@theia/core/lib/browser/decorations-service';\nimport { FileStat } from '@theia/filesystem/lib/common/files';\nimport { ThemeService } from '@theia/core/lib/browser/theming';\n\n@injectable()\nexport class ScmTreeWidget extends TreeWidget {\n\n    static ID = 'scm-resource-widget';\n\n    static RESOURCE_GROUP_CONTEXT_MENU = ['RESOURCE_GROUP_CONTEXT_MENU'];\n    static RESOURCE_GROUP_INLINE_MENU = ['RESOURCE_GROUP_CONTEXT_MENU', 'inline'];\n\n    static RESOURCE_FOLDER_CONTEXT_MENU = ['RESOURCE_FOLDER_CONTEXT_MENU'];\n    static RESOURCE_FOLDER_INLINE_MENU = ['RESOURCE_FOLDER_CONTEXT_MENU', 'inline'];\n\n    static RESOURCE_CONTEXT_MENU = ['RESOURCE_CONTEXT_MENU'];\n    static RESOURCE_INLINE_MENU = ['RESOURCE_CONTEXT_MENU', 'inline'];\n\n    @inject(MenuModelRegistry) protected readonly menus: MenuModelRegistry;\n    @inject(ScmContextKeyService) protected readonly contextKeys: ScmContextKeyService;\n    @inject(EditorManager) protected readonly editorManager: EditorManager;\n    @inject(DiffNavigatorProvider) protected readonly diffNavigatorProvider: DiffNavigatorProvider;\n    @inject(IconThemeService) protected readonly iconThemeService: IconThemeService;\n    @inject(DecorationsService) protected readonly decorationsService: DecorationsService;\n    @inject(ColorRegistry) protected readonly colors: ColorRegistry;\n    @inject(ThemeService) protected readonly themeService: ThemeService;\n\n    // TODO: Make TreeWidget generic to better type those fields.\n    override readonly model: ScmTreeModel;\n\n    constructor(\n        @inject(TreeProps) props: TreeProps,\n        @inject(TreeModel) treeModel: ScmTreeModel,\n        @inject(ContextMenuRenderer) contextMenuRenderer: ContextMenuRenderer,\n    ) {\n        super(props, treeModel, contextMenuRenderer);\n        this.id = ScmTreeWidget.ID;\n        this.addClass('groups-outer-container');\n    }\n\n    @postConstruct()\n    protected override init(): void {\n        super.init();\n        this.toDispose.push(this.themeService.onDidColorThemeChange(() => this.update()));\n    }\n\n    set viewMode(id: 'tree' | 'list') {\n        // Close the search box because the structure of the tree will change dramatically\n        // and the search results will be out of date.\n        this.searchBox.hide();\n        this.model.viewMode = id;\n    }\n    get viewMode(): 'tree' | 'list' {\n        return this.model.viewMode;\n    }\n\n    /**\n     * Render the node given the tree node and node properties.\n     * @param node the tree node.\n     * @param props the node properties.\n     */\n    protected override renderNode(node: TreeNode, props: NodeProps): React.ReactNode {\n        if (!TreeNode.isVisible(node)) {\n            return undefined;\n        }\n\n        const attributes = this.createNodeAttributes(node, props);\n        const label = this.labelProvider.getName(node);\n        const searchHighlights = this.searchHighlights?.get(node.id);\n        // The group nodes should not be subject to highlighting.\n        const caption = (searchHighlights && !ScmFileChangeGroupNode.is(node)) ? this.toReactNode(label, searchHighlights) : label;\n\n        if (ScmFileChangeGroupNode.is(node)) {\n            const content = <ScmResourceGroupElement\n                key={`${node.groupId}`}\n                model={this.model}\n                treeNode={node}\n                renderExpansionToggle={() => this.renderExpansionToggle(node, props)}\n                contextMenuRenderer={this.contextMenuRenderer}\n                menus={this.menus}\n                contextKeys={this.contextKeys}\n                labelProvider={this.labelProvider}\n                corePreferences={this.corePreferences}\n                caption={caption}\n            />;\n\n            return React.createElement('div', attributes, content);\n\n        }\n        if (ScmFileChangeFolderNode.is(node)) {\n            const content = <ScmResourceFolderElement\n                key={String(node.sourceUri)}\n                model={this.model}\n                treeNode={node}\n                sourceUri={node.sourceUri}\n                renderExpansionToggle={() => this.renderExpansionToggle(node, props)}\n                contextMenuRenderer={this.contextMenuRenderer}\n                menus={this.menus}\n                contextKeys={this.contextKeys}\n                labelProvider={this.labelProvider}\n                corePreferences={this.corePreferences}\n                caption={caption}\n            />;\n\n            return React.createElement('div', attributes, content);\n        }\n        if (ScmFileChangeNode.is(node)) {\n            const parentPath =\n                (node.parent && ScmFileChangeFolderNode.is(node.parent))\n                    ? new URI(node.parent.sourceUri) : new URI(this.model.rootUri);\n\n            const content = <ScmResourceComponent\n                key={node.sourceUri}\n                model={this.model}\n                treeNode={node}\n                contextMenuRenderer={this.contextMenuRenderer}\n                menus={this.menus}\n                contextKeys={this.contextKeys}\n                labelProvider={this.labelProvider}\n                corePreferences={this.corePreferences}\n                caption={caption}\n                {...{\n                    ...this.props,\n                    parentPath,\n                    sourceUri: node.sourceUri,\n                    decoration: this.decorationsService.getDecoration(new URI(node.sourceUri), true)[0],\n                    colors: this.colors,\n                    isLightTheme: this.isCurrentThemeLight(),\n                    renderExpansionToggle: () => this.renderExpansionToggle(node, props),\n                }}\n            />;\n            return React.createElement('div', attributes, content);\n        }\n        return super.renderNode(node, props);\n    }\n\n    protected override createContainerAttributes(): React.HTMLAttributes<HTMLElement> {\n        if (this.model.canTabToWidget()) {\n            return {\n                ...super.createContainerAttributes(),\n                tabIndex: 0\n            };\n        }\n        return super.createContainerAttributes();\n    }\n\n    /**\n     * The ARROW_LEFT key controls both the movement around the file tree and also\n     * the movement through the change chunks within a file.\n     *\n     * If the selected tree node is a folder then the ARROW_LEFT key behaves exactly\n     * as it does in explorer.  It collapses the tree node if the folder is expanded and\n     * it moves the selection up to the parent folder if the folder is collapsed (no-op if no parent folder, as\n     * group headers are not selectable).  This behavior is the default behavior implemented\n     * in the TreeWidget super class.\n     *\n     * If the selected tree node is a file then the ARROW_LEFT key moves up through the\n     * change chunks within each file.  If the selected chunk is the first chunk in the file\n     * then the file selection is moved to the previous file (no-op if no previous file).\n     *\n     * Note that when cursoring through change chunks, the ARROW_LEFT key cannot be used to\n     * move up through the parent folders of the file tree.  If users want to do this, using\n     * keys only, then they must press ARROW_UP repeatedly until the selected node is the folder\n     * node and then press ARROW_LEFT.\n     */\n    protected override async handleLeft(event: KeyboardEvent): Promise<void> {\n        if (this.model.selectedNodes.length === 1) {\n            const selectedNode = this.model.selectedNodes[0];\n            if (ScmFileChangeNode.is(selectedNode)) {\n                const selectedResource = this.model.getResourceFromNode(selectedNode);\n                if (!selectedResource) {\n                    return super.handleLeft(event);\n                }\n                const widget = await this.openResource(selectedResource);\n\n                if (widget) {\n                    const diffNavigator = this.diffNavigatorProvider(widget.editor);\n                    if (diffNavigator.hasPrevious()) {\n                        diffNavigator.previous();\n                    } else {\n                        const previousNode = this.moveToPreviousFileNode();\n                        if (previousNode) {\n                            const previousResource = this.model.getResourceFromNode(previousNode);\n                            if (previousResource) {\n                                this.openResource(previousResource);\n                            }\n                        }\n                    }\n                    return;\n                }\n            }\n        }\n        return super.handleLeft(event);\n    }\n\n    /**\n     * The ARROW_RIGHT key controls both the movement around the file tree and also\n     * the movement through the change chunks within a file.\n     *\n     * If the selected tree node is a folder then the ARROW_RIGHT key behaves exactly\n     * as it does in explorer.  It expands the tree node if the folder is collapsed and\n     * it moves the selection to the first child node if the folder is expanded.\n     * This behavior is the default behavior implemented\n     * in the TreeWidget super class.\n     *\n     * If the selected tree node is a file then the ARROW_RIGHT key moves down through the\n     * change chunks within each file.  If the selected chunk is the last chunk in the file\n     * then the file selection is moved to the next file (no-op if no next file).\n     */\n    protected override async handleRight(event: KeyboardEvent): Promise<void> {\n        if (this.model.selectedNodes.length === 0) {\n            const firstNode = this.getFirstSelectableNode();\n            // Selects the first visible resource as none are selected.\n            if (!firstNode) {\n                return;\n            }\n            this.model.selectNode(firstNode);\n            return;\n        }\n        if (this.model.selectedNodes.length === 1) {\n            const selectedNode = this.model.selectedNodes[0];\n            if (ScmFileChangeNode.is(selectedNode)) {\n                const selectedResource = this.model.getResourceFromNode(selectedNode);\n                if (!selectedResource) {\n                    return super.handleRight(event);\n                }\n                const widget = await this.openResource(selectedResource);\n\n                if (widget) {\n                    const diffNavigator = this.diffNavigatorProvider(widget.editor);\n                    if (diffNavigator.hasNext()) {\n                        diffNavigator.next();\n                    } else {\n                        const nextNode = this.moveToNextFileNode();\n                        if (nextNode) {\n                            const nextResource = this.model.getResourceFromNode(nextNode);\n                            if (nextResource) {\n                                this.openResource(nextResource);\n                            }\n                        }\n                    }\n                }\n                return;\n            }\n        }\n        return super.handleRight(event);\n    }\n\n    protected override handleEnter(event: KeyboardEvent): void {\n        if (this.model.selectedNodes.length === 1) {\n            const selectedNode = this.model.selectedNodes[0];\n            if (ScmFileChangeNode.is(selectedNode)) {\n                const selectedResource = this.model.getResourceFromNode(selectedNode);\n                if (selectedResource) {\n                    this.openResource(selectedResource);\n                }\n                return;\n            }\n        }\n        super.handleEnter(event);\n    }\n\n    async goToPreviousChange(): Promise<void> {\n        if (this.model.selectedNodes.length === 1) {\n            const selectedNode = this.model.selectedNodes[0];\n            if (ScmFileChangeNode.is(selectedNode)) {\n                if (ScmFileChangeNode.is(selectedNode)) {\n                    const selectedResource = this.model.getResourceFromNode(selectedNode);\n                    if (!selectedResource) {\n                        return;\n                    }\n                    const widget = await this.openResource(selectedResource);\n\n                    if (widget) {\n                        const diffNavigator = this.diffNavigatorProvider(widget.editor);\n                        if (diffNavigator.hasPrevious()) {\n                            diffNavigator.previous();\n                        } else {\n                            const previousNode = this.moveToPreviousFileNode();\n                            if (previousNode) {\n                                const previousResource = this.model.getResourceFromNode(previousNode);\n                                if (previousResource) {\n                                    this.openResource(previousResource);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    async goToNextChange(): Promise<void> {\n        if (this.model.selectedNodes.length === 0) {\n            const firstNode = this.getFirstSelectableNode();\n            // Selects the first visible resource as none are selected.\n            if (!firstNode) {\n                return;\n            }\n            this.model.selectNode(firstNode);\n            return;\n        }\n        if (this.model.selectedNodes.length === 1) {\n            const selectedNode = this.model.selectedNodes[0];\n            if (ScmFileChangeNode.is(selectedNode)) {\n                const selectedResource = this.model.getResourceFromNode(selectedNode);\n                if (!selectedResource) {\n                    return;\n                }\n                const widget = await this.openResource(selectedResource);\n\n                if (widget) {\n                    const diffNavigator = this.diffNavigatorProvider(widget.editor);\n                    if (diffNavigator.hasNext()) {\n                        diffNavigator.next();\n                    } else {\n                        const nextNode = this.moveToNextFileNode();\n                        if (nextNode) {\n                            const nextResource = this.model.getResourceFromNode(nextNode);\n                            if (nextResource) {\n                                this.openResource(nextResource);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    selectNodeByUri(uri: URI): void {\n        for (const group of this.model.groups) {\n            const sourceUri = new URI(uri.path.toString());\n            const id = `${group.id}:${sourceUri.toString()}`;\n            const node = this.model.getNode(id);\n            if (SelectableTreeNode.is(node)) {\n                this.model.selectNode(node);\n                return;\n            }\n        }\n    }\n\n    protected getFirstSelectableNode(): SelectableTreeNode | undefined {\n        if (this.model.root) {\n            const root = this.model.root as ScmFileChangeRootNode;\n            const groupNode = root.children[0];\n            return groupNode.children[0];\n        }\n    }\n\n    protected moveToPreviousFileNode(): ScmFileChangeNode | undefined {\n        let previousNode = this.model.getPrevSelectableNode();\n        while (previousNode) {\n            if (ScmFileChangeNode.is(previousNode)) {\n                this.model.selectNode(previousNode);\n                return previousNode;\n            }\n            previousNode = this.model.getPrevSelectableNode(previousNode);\n        };\n    }\n\n    protected moveToNextFileNode(): ScmFileChangeNode | undefined {\n        let nextNode = this.model.getNextSelectableNode();\n        while (nextNode) {\n            if (ScmFileChangeNode.is(nextNode)) {\n                this.model.selectNode(nextNode);\n                return nextNode;\n            }\n            nextNode = this.model.getNextSelectableNode(nextNode);\n        };\n    }\n\n    protected async openResource(resource: ScmResource): Promise<EditorWidget | undefined> {\n        try {\n            await resource.open();\n        } catch (e) {\n            console.error('Failed to open a SCM resource', e);\n            return undefined;\n        }\n\n        let standaloneEditor: EditorWidget | undefined;\n        const resourcePath = resource.sourceUri.path.toString();\n\n        for (const widget of this.editorManager.all) {\n            const resourceUri = widget.editor.document.uri;\n            const editorResourcePath = new URI(resourceUri).path.toString();\n            if (resourcePath === editorResourcePath) {\n                if (widget.editor.uri.scheme === DiffUris.DIFF_SCHEME) {\n                    // prefer diff editor\n                    return widget;\n                } else {\n                    standaloneEditor = widget;\n                }\n            }\n            if (widget.editor.uri.scheme === DiffUris.DIFF_SCHEME\n                && resourceUri === resource.sourceUri.toString()) {\n                return widget;\n            }\n        }\n        // fallback to standalone editor\n        return standaloneEditor;\n    }\n\n    protected override getPaddingLeft(node: TreeNode, props: NodeProps): number {\n        if (this.viewMode === 'list') {\n            if (props.depth === 1) {\n                return this.props.expansionTogglePadding;\n            }\n        }\n        return super.getPaddingLeft(node, props);\n    }\n\n    protected override getDepthPadding(depth: number): number {\n        return super.getDepthPadding(depth) + 5;\n    }\n\n    protected isCurrentThemeLight(): boolean {\n        const type = this.themeService.getCurrentTheme().type;\n        return type.toLocaleLowerCase().includes('light');\n    }\n\n    protected override needsExpansionTogglePadding(node: TreeNode): boolean {\n        const theme = this.iconThemeService.getDefinition(this.iconThemeService.current);\n        if (theme && (theme.hidesExplorerArrows || (theme.hasFileIcons && !theme.hasFolderIcons))) {\n            return false;\n        }\n        return super.needsExpansionTogglePadding(node);\n    }\n\n}\n\nexport namespace ScmTreeWidget {\n    export namespace Styles {\n        export const NO_SELECT = 'no-select';\n    }\n    // This is an 'abstract' base interface for all the element component props.\n    export interface Props {\n        treeNode: TreeNode;\n        model: ScmTreeModel;\n        menus: MenuModelRegistry;\n        contextKeys: ScmContextKeyService;\n        labelProvider: LabelProvider;\n        contextMenuRenderer: ContextMenuRenderer;\n        corePreferences?: CorePreferences;\n        caption: React.ReactNode;\n    }\n}\n\nexport abstract class ScmElement<P extends ScmElement.Props = ScmElement.Props> extends React.Component<P, ScmElement.State> {\n\n    constructor(props: P) {\n        super(props);\n        this.state = {\n            hover: false\n        };\n\n        const setState = this.setState.bind(this);\n        this.setState = newState => {\n            if (!this.toDisposeOnUnmount.disposed) {\n                setState(newState);\n            }\n        };\n    }\n\n    protected readonly toDisposeOnUnmount = new DisposableCollection();\n    override componentDidMount(): void {\n        this.toDisposeOnUnmount.push(Disposable.create(() => { /* mark as mounted */ }));\n    }\n    override componentWillUnmount(): void {\n        this.toDisposeOnUnmount.dispose();\n    }\n\n    protected detectHover = (element: HTMLElement | null) => {\n        if (element) {\n            window.requestAnimationFrame(() => {\n                const hover = element.matches(':hover');\n                this.setState({ hover });\n            });\n        }\n    };\n    protected showHover = () => this.setState({ hover: true });\n    protected hideHover = () => this.setState({ hover: false });\n\n    protected renderContextMenu = (event: React.MouseEvent<HTMLElement>) => {\n        event.preventDefault();\n        const { treeNode: node, contextMenuRenderer } = this.props;\n        this.props.model.execInNodeContext(node, () => {\n            contextMenuRenderer.render({\n                menuPath: this.contextMenuPath,\n                anchor: event.nativeEvent,\n                args: this.contextMenuArgs,\n                context: event.currentTarget\n            });\n        });\n    };\n\n    protected abstract get contextMenuPath(): MenuPath;\n    protected abstract get contextMenuArgs(): any[];\n\n}\nexport namespace ScmElement {\n    export interface Props extends ScmTreeWidget.Props {\n        renderExpansionToggle: () => React.ReactNode;\n    }\n    export interface State {\n        hover: boolean\n    }\n}\n\nexport class ScmResourceComponent extends ScmElement<ScmResourceComponent.Props> {\n\n    override render(): JSX.Element | undefined {\n        const { hover } = this.state;\n        const { model, treeNode, colors, parentPath, sourceUri, decoration, labelProvider, menus, contextKeys, caption, isLightTheme } = this.props;\n        const resourceUri = new URI(sourceUri);\n\n        const decorationIcon = treeNode.decorations;\n        const themedIcon = isLightTheme ? decorationIcon?.icon : decorationIcon?.iconDark;\n        const classNames: string[] = themedIcon ? ['decoration-icon', themedIcon] : ['decoration-icon', 'status'];\n\n        const icon = labelProvider.getIcon(resourceUri);\n        const color = decoration && decoration.colorId && !themedIcon ? `var(${colors.toCssVariableName(decoration.colorId)})` : '';\n        const letter = decoration && decoration.letter && !themedIcon ? decoration.letter : '';\n        const tooltip = decoration && decoration.tooltip || '';\n        const textDecoration = treeNode.decorations?.strikeThrough === true ? 'line-through' : 'normal';\n        const relativePath = parentPath.relative(resourceUri.parent);\n        const path = relativePath ? relativePath.fsPath() : labelProvider.getLongName(resourceUri.parent);\n        const title = tooltip.length !== 0\n            ? `${resourceUri.path.fsPath()}  ${tooltip}`\n            : resourceUri.path.fsPath();\n\n        return <div key={sourceUri}\n            className={`scmItem ${TREE_NODE_SEGMENT_CLASS} ${TREE_NODE_SEGMENT_GROW_CLASS}`}\n            onContextMenu={this.renderContextMenu}\n            onMouseEnter={this.showHover}\n            onMouseLeave={this.hideHover}\n            ref={this.detectHover}\n            title={title}\n            onClick={this.handleClick}\n            onDoubleClick={this.handleDoubleClick} >\n            <span className={icon + ' file-icon'} />\n            {this.props.renderExpansionToggle()}\n            <div className={`noWrapInfo ${TREE_NODE_SEGMENT_GROW_CLASS}`} >\n                <span className='name' style={{ textDecoration }}>{caption}</span>\n                <span className='path' style={{ textDecoration }}>{path}</span>\n            </div>\n            <ScmInlineActions {...{\n                hover,\n                menu: menus.getMenu(ScmTreeWidget.RESOURCE_INLINE_MENU),\n                menuPath: ScmTreeWidget.RESOURCE_INLINE_MENU,\n                args: this.contextMenuArgs,\n                contextKeys,\n                model,\n                treeNode\n            }}>\n                <div title={tooltip} className={classNames.join(' ')} style={{ color }}>\n                    {letter}\n                </div>\n            </ScmInlineActions>\n        </div >;\n    }\n\n    protected open = () => {\n        const resource = this.props.model.getResourceFromNode(this.props.treeNode);\n        if (resource) {\n            resource.open();\n        }\n    };\n\n    protected readonly contextMenuPath = ScmTreeWidget.RESOURCE_CONTEXT_MENU;\n    protected get contextMenuArgs(): any[] {\n        if (!this.props.model.selectedNodes.some(node => ScmFileChangeNode.is(node) && node === this.props.treeNode)) {\n            // Clicked node is not in selection, so ignore selection and action on just clicked node\n            return this.singleNodeArgs;\n        } else {\n            return this.props.model.getSelectionArgs(this.props.model.selectedNodes);\n        }\n    }\n    protected get singleNodeArgs(): any[] {\n        const selectedResource = this.props.model.getResourceFromNode(this.props.treeNode);\n        if (selectedResource) {\n            return [selectedResource];\n        } else {\n            // Repository status not yet available. Empty args disables the action.\n            return [];\n        }\n    }\n\n    protected hasCtrlCmdOrShiftMask(event: TreeWidget.ModifierAwareEvent): boolean {\n        const { metaKey, ctrlKey, shiftKey } = event;\n        return (isOSX && metaKey) || ctrlKey || shiftKey;\n    }\n\n    /**\n     * Handle the single clicking of nodes present in the widget.\n     */\n    protected handleClick = (event: React.MouseEvent) => {\n        if (!this.hasCtrlCmdOrShiftMask(event)) {\n            // Determine the behavior based on the preference value.\n            const isSingle = this.props.corePreferences && this.props.corePreferences['workbench.list.openMode'] === 'singleClick';\n            if (isSingle) {\n                this.open();\n            }\n        }\n    };\n\n    /**\n     * Handle the double clicking of nodes present in the widget.\n     */\n    protected handleDoubleClick = () => {\n        // Determine the behavior based on the preference value.\n        const isDouble = this.props.corePreferences && this.props.corePreferences['workbench.list.openMode'] === 'doubleClick';\n        // Nodes should only be opened through double clicking if the correct preference is set.\n        if (isDouble) {\n            this.open();\n        }\n    };\n}\n\nexport namespace ScmResourceComponent {\n    export interface Props extends ScmElement.Props {\n        treeNode: ScmFileChangeNode;\n        parentPath: URI;\n        sourceUri: string;\n        decoration: Decoration | undefined;\n        colors: ColorRegistry;\n        isLightTheme: boolean\n    }\n}\n\nexport class ScmResourceGroupElement extends ScmElement<ScmResourceGroupComponent.Props> {\n\n    override render(): JSX.Element {\n        const { hover } = this.state;\n        const { model, treeNode, menus, contextKeys, caption } = this.props;\n        return <div className={`theia-header scm-theia-header ${TREE_NODE_SEGMENT_GROW_CLASS}`}\n            onContextMenu={this.renderContextMenu}\n            onMouseEnter={this.showHover}\n            onMouseLeave={this.hideHover}\n            ref={this.detectHover}>\n            {this.props.renderExpansionToggle()}\n            <div className={`noWrapInfo ${TREE_NODE_SEGMENT_GROW_CLASS}`}>{caption}</div>\n            <ScmInlineActions {...{\n                hover,\n                args: this.contextMenuArgs,\n                menu: menus.getMenu(ScmTreeWidget.RESOURCE_GROUP_INLINE_MENU),\n                menuPath: ScmTreeWidget.RESOURCE_GROUP_INLINE_MENU,\n                contextKeys,\n                model,\n                treeNode\n            }}>\n                {this.renderChangeCount()}\n            </ScmInlineActions>\n        </div>;\n    }\n\n    protected renderChangeCount(): React.ReactNode {\n        const group = this.props.model.getResourceGroupFromNode(this.props.treeNode);\n        return <div className='notification-count-container scm-change-count'>\n            <span className='notification-count'>{group ? group.resources.length : 0}</span>\n        </div>;\n    }\n\n    protected readonly contextMenuPath = ScmTreeWidget.RESOURCE_GROUP_CONTEXT_MENU;\n    protected get contextMenuArgs(): any[] {\n        const group = this.props.model.getResourceGroupFromNode(this.props.treeNode);\n        if (group) {\n            return [group];\n        } else {\n            // Repository status not yet available. Empty args disables the action.\n            return [];\n        }\n    }\n}\nexport namespace ScmResourceGroupComponent {\n    export interface Props extends ScmElement.Props {\n        treeNode: ScmFileChangeGroupNode;\n    }\n}\n\nexport class ScmResourceFolderElement extends ScmElement<ScmResourceFolderElement.Props> {\n\n    override render(): JSX.Element {\n        const { hover } = this.state;\n        const { model, treeNode, sourceUri, labelProvider, menus, contextKeys, caption } = this.props;\n        const sourceFileStat = FileStat.dir(sourceUri);\n        const icon = labelProvider.getIcon(sourceFileStat);\n        const title = new URI(sourceUri).path.fsPath();\n\n        return <div key={sourceUri}\n            className={`scmItem  ${TREE_NODE_SEGMENT_CLASS} ${TREE_NODE_SEGMENT_GROW_CLASS} ${ScmTreeWidget.Styles.NO_SELECT}`}\n            title={title}\n            onContextMenu={this.renderContextMenu}\n            onMouseEnter={this.showHover}\n            onMouseLeave={this.hideHover}\n            ref={this.detectHover}\n        >\n            {this.props.renderExpansionToggle()}\n            <span className={icon + ' file-icon'} />\n            <div className={`noWrapInfo ${TREE_NODE_SEGMENT_GROW_CLASS}`} >\n                <span className='name'>{caption}</span>\n            </div>\n            <ScmInlineActions {...{\n                hover,\n                menu: menus.getMenu(ScmTreeWidget.RESOURCE_FOLDER_INLINE_MENU),\n                menuPath: ScmTreeWidget.RESOURCE_FOLDER_INLINE_MENU,\n                args: this.contextMenuArgs,\n                contextKeys,\n                model,\n                treeNode\n            }}>\n            </ScmInlineActions>\n        </div >;\n\n    }\n\n    protected readonly contextMenuPath = ScmTreeWidget.RESOURCE_FOLDER_CONTEXT_MENU;\n    protected get contextMenuArgs(): any[] {\n        if (!this.props.model.selectedNodes.some(node => ScmFileChangeFolderNode.is(node) && node.sourceUri === this.props.sourceUri)) {\n            // Clicked node is not in selection, so ignore selection and action on just clicked node\n            return this.singleNodeArgs;\n        } else {\n            return this.props.model.getSelectionArgs(this.props.model.selectedNodes);\n        }\n    }\n    protected get singleNodeArgs(): any[] {\n        return this.props.model.getResourcesFromFolderNode(this.props.treeNode);\n    }\n\n}\n\nexport namespace ScmResourceFolderElement {\n    export interface Props extends ScmElement.Props {\n        treeNode: ScmFileChangeFolderNode;\n        sourceUri: string;\n    }\n}\n\nexport class ScmInlineActions extends React.Component<ScmInlineActions.Props> {\n    override render(): React.ReactNode {\n        const { hover, menu, menuPath, args, model, treeNode, contextKeys, children } = this.props;\n        return <div className='theia-scm-inline-actions-container'>\n            <div className='theia-scm-inline-actions'>\n                {hover && menu?.children\n                    .map((node, index) => CommandMenu.is(node) &&\n                        <ScmInlineAction key={index} {...{ node, menuPath, args, model, treeNode, contextKeys }} />)}\n            </div>\n            {children}\n        </div>;\n    }\n}\nexport namespace ScmInlineActions {\n    export interface Props {\n        hover: boolean;\n        menu: CompoundMenuNode | undefined;\n        menuPath: MenuPath;\n        model: ScmTreeModel;\n        treeNode: TreeNode;\n        contextKeys: ScmContextKeyService;\n        args: any[];\n        children?: React.ReactNode;\n    }\n}\n\nexport class ScmInlineAction extends React.Component<ScmInlineAction.Props> {\n    override render(): React.ReactNode {\n        const { node, menuPath, model, treeNode, args, contextKeys } = this.props;\n\n        let isActive: boolean = false;\n        model.execInNodeContext(treeNode, () => {\n            isActive = node.isVisible(menuPath, contextKeys, undefined, ...args);\n        });\n\n        if (!isActive) {\n            return false;\n        }\n        return <div className='theia-scm-inline-action'>\n            <a className={`${node.icon} ${ACTION_ITEM}`} title={node.label} onClick={this.execute} />\n        </div>;\n    }\n\n    protected execute = (event: React.MouseEvent) => {\n        event.stopPropagation();\n\n        const { node, menuPath, args } = this.props;\n        node.run(menuPath, ...args);\n    };\n}\nexport namespace ScmInlineAction {\n    export interface Props {\n        node: CommandMenu;\n        menuPath: MenuPath;\n        model: ScmTreeModel;\n        treeNode: TreeNode;\n        contextKeys: ScmContextKeyService;\n        args: any[];\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable no-null/no-null, @typescript-eslint/no-explicit-any */\n\nimport { Message } from '@theia/core/shared/@lumino/messaging';\nimport { injectable, inject, postConstruct } from '@theia/core/shared/inversify';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport {\n    BaseWidget, Widget, StatefulWidget, Panel, PanelLayout, MessageLoop, CompositeTreeNode, SelectableTreeNode, ApplicationShell, NavigatableWidget,\n} from '@theia/core/lib/browser';\nimport { ScmCommitWidget } from './scm-commit-widget';\nimport { ScmAmendWidget } from './scm-amend-widget';\nimport { ScmNoRepositoryWidget } from './scm-no-repository-widget';\nimport { ScmService } from './scm-service';\nimport { ScmTreeWidget } from './scm-tree-widget';\nimport { ScmPreferences } from './scm-preferences';\nimport { nls } from '@theia/core/lib/common/nls';\n\n@injectable()\nexport class ScmWidget extends BaseWidget implements StatefulWidget {\n\n    protected panel: Panel;\n\n    static ID = 'scm-view';\n\n    @inject(ApplicationShell) protected readonly shell: ApplicationShell;\n    @inject(ScmService) protected readonly scmService: ScmService;\n    @inject(ScmCommitWidget) protected readonly commitWidget: ScmCommitWidget;\n    @inject(ScmTreeWidget) readonly resourceWidget: ScmTreeWidget;\n    @inject(ScmAmendWidget) protected readonly amendWidget: ScmAmendWidget;\n    @inject(ScmNoRepositoryWidget) readonly noRepositoryWidget: ScmNoRepositoryWidget;\n    @inject(ScmPreferences) protected readonly scmPreferences: ScmPreferences;\n\n    set viewMode(mode: 'tree' | 'list') {\n        this.resourceWidget.viewMode = mode;\n    }\n    get viewMode(): 'tree' | 'list' {\n        return this.resourceWidget.viewMode;\n    }\n\n    constructor() {\n        super();\n        this.node.tabIndex = 0;\n        this.id = ScmWidget.ID;\n        this.addClass('theia-scm');\n        this.addClass('theia-scm-main-container');\n    }\n\n    @postConstruct()\n    protected init(): void {\n        const layout = new PanelLayout();\n        this.layout = layout;\n        this.panel = new Panel({\n            layout: new PanelLayout({\n            })\n        });\n        this.panel.node.tabIndex = -1;\n        this.panel.node.setAttribute('class', 'theia-scm-panel');\n        layout.addWidget(this.panel);\n\n        this.containerLayout.addWidget(this.commitWidget);\n        this.containerLayout.addWidget(this.resourceWidget);\n        this.containerLayout.addWidget(this.amendWidget);\n        this.containerLayout.addWidget(this.noRepositoryWidget);\n\n        this.refresh();\n        this.toDispose.push(this.scmService.onDidChangeSelectedRepository(() => this.refresh()));\n        this.updateViewMode(this.scmPreferences.get('scm.defaultViewMode'));\n        this.toDispose.push(this.scmPreferences.onPreferenceChanged(e => {\n            if (e.preferenceName === 'scm.defaultViewMode') {\n                this.updateViewMode(e.newValue);\n            }\n        }));\n        this.toDispose.push(this.shell.onDidChangeCurrentWidget(({ newValue }) => {\n            const uri = NavigatableWidget.getUri(newValue || undefined);\n            if (uri) {\n                this.resourceWidget.selectNodeByUri(uri);\n            }\n        }));\n\n    }\n\n    get containerLayout(): PanelLayout {\n        return this.panel.layout as PanelLayout;\n    }\n\n    /**\n     * Updates the view mode based on the preference value.\n     * @param preference the view mode preference.\n     */\n    protected updateViewMode(preference: 'tree' | 'list'): void {\n        this.viewMode = preference;\n    }\n\n    protected readonly toDisposeOnRefresh = new DisposableCollection();\n    protected refresh(): void {\n        this.toDisposeOnRefresh.dispose();\n        this.toDispose.push(this.toDisposeOnRefresh);\n        const repository = this.scmService.selectedRepository;\n        this.title.label = repository ? repository.provider.label : nls.localize('theia/scm/noRepositoryFound', 'No repository found');\n        this.title.caption = this.title.label;\n        this.update();\n        if (repository) {\n            this.toDisposeOnRefresh.push(repository.onDidChange(() => this.update()));\n            // render synchronously to avoid cursor jumping\n            // see https://stackoverflow.com/questions/28922275/in-reactjs-why-does-setstate-behave-differently-when-called-synchronously/28922465#28922465\n            this.toDisposeOnRefresh.push(repository.input.onDidChange(() => this.updateImmediately()));\n            this.toDisposeOnRefresh.push(repository.input.onDidFocus(() => this.focusInput()));\n\n            this.commitWidget.show();\n            this.resourceWidget.show();\n            this.amendWidget.show();\n            this.noRepositoryWidget.hide();\n        } else {\n            this.commitWidget.hide();\n            this.resourceWidget.hide();\n            this.amendWidget.hide();\n            this.noRepositoryWidget.show();\n        }\n    }\n\n    protected updateImmediately(): void {\n        this.onUpdateRequest(Widget.Msg.UpdateRequest);\n    }\n\n    protected override onUpdateRequest(msg: Message): void {\n        MessageLoop.sendMessage(this.commitWidget, msg);\n        MessageLoop.sendMessage(this.resourceWidget, msg);\n        MessageLoop.sendMessage(this.amendWidget, msg);\n        MessageLoop.sendMessage(this.noRepositoryWidget, msg);\n        super.onUpdateRequest(msg);\n    }\n\n    protected override onAfterAttach(msg: Message): void {\n        this.node.appendChild(this.commitWidget.node);\n        this.node.appendChild(this.resourceWidget.node);\n        this.node.appendChild(this.amendWidget.node);\n        this.node.appendChild(this.noRepositoryWidget.node);\n\n        super.onAfterAttach(msg);\n        this.update();\n    }\n\n    protected override onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        this.refresh();\n        if (this.commitWidget.isVisible) {\n            this.commitWidget.focus();\n        } else {\n            this.node.focus();\n        }\n    }\n\n    protected focusInput(): void {\n        this.commitWidget.focus();\n    }\n\n    storeState(): any {\n        const state: object = {\n            commitState: this.commitWidget.storeState(),\n            changesTreeState: this.resourceWidget.storeState(),\n        };\n        return state;\n    }\n\n    restoreState(oldState: any): void {\n        const { commitState, changesTreeState } = oldState;\n        this.commitWidget.restoreState(commitState);\n        this.resourceWidget.restoreState(changesTreeState);\n    }\n\n    collapseScmTree(): void {\n        const { model } = this.resourceWidget;\n        const root = model.root;\n        if (CompositeTreeNode.is(root)) {\n            root.children.map(group => {\n                if (CompositeTreeNode.is(group)) {\n                    group.children.map(folderNode => {\n                        if (CompositeTreeNode.is(folderNode)) {\n                            model.collapseAll(folderNode);\n                        }\n                        if (SelectableTreeNode.isSelected(folderNode)) {\n                            model.toggleNode(folderNode);\n                        }\n                    });\n                }\n            });\n        }\n    }\n}\n","import api from \"!../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../css-loader/dist/cjs.js!./scm-amend-component.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n ********************************************************************************/\n\n.theia-scm-commit-container {\n  display: flex;\n  flex-direction: column;\n  border-top: 1px solid var(--theia-sideBarSectionHeader-border);\n  width: 100%;\n  padding-top: 6px;\n}\n\n.theia-scm-amend-outer-container {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  overflow: auto;\n}\n\n.theia-scm-commit-and-button {\n  display: flex;\n  white-space: nowrap;\n  overflow: hidden;\n  width: 100%;\n}\n\n.theia-scm-commit-avatar-and-text {\n  display: flex;\n  white-space: nowrap;\n  overflow: hidden;\n  width: 100%;\n  padding-top: 2px;\n}\n\n.theia-scm-commit-avatar-and-text img {\n  width: 27px;\n}\n\n.theia-scm-commit-details {\n  display: flex;\n  flex-direction: column;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  width: 100%;\n}\n\n.theia-scm-commit-message-avatar {\n  margin-right: 5px;\n}\n\n.theia-scm-commit-message-summary {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.theia-scm-commit-message-time {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: var(--theia-descriptionForeground);\n  font-size: smaller;\n}\n\n.theia-scm-flex-container-center {\n  display: flex;\n  align-items: center;\n}\n\n.theia-scm-scrolling-container {\n  position: relative;\n  width: 100%;\n  overflow: hidden;\n\n  margin-top: 0;\n  margin-bottom: 0;\n  padding-top: 0;\n  padding-bottom: 0;\n  border-top: 0;\n  border-bottom: 0;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/@theia/scm/src/browser/style/scm-amend-component.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;iFAciF;;AAEjF;EACE,aAAa;EACb,sBAAsB;EACtB,8DAA8D;EAC9D,WAAW;EACX,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,WAAW;EACX,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,gBAAgB;EAChB,WAAW;AACb;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,gBAAgB;EAChB,WAAW;EACX,gBAAgB;AAClB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;EACvB,WAAW;AACb;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;AACzB;;AAEA;EACE,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;EACvB,yCAAyC;EACzC,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,gBAAgB;;EAEhB,aAAa;EACb,gBAAgB;EAChB,cAAc;EACd,iBAAiB;EACjB,aAAa;EACb,gBAAgB;AAClB\",\"sourcesContent\":[\"/********************************************************************************\\n * Copyright (C) 2018 TypeFox and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.theia-scm-commit-container {\\n  display: flex;\\n  flex-direction: column;\\n  border-top: 1px solid var(--theia-sideBarSectionHeader-border);\\n  width: 100%;\\n  padding-top: 6px;\\n}\\n\\n.theia-scm-amend-outer-container {\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%;\\n  overflow: auto;\\n}\\n\\n.theia-scm-commit-and-button {\\n  display: flex;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  width: 100%;\\n}\\n\\n.theia-scm-commit-avatar-and-text {\\n  display: flex;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  width: 100%;\\n  padding-top: 2px;\\n}\\n\\n.theia-scm-commit-avatar-and-text img {\\n  width: 27px;\\n}\\n\\n.theia-scm-commit-details {\\n  display: flex;\\n  flex-direction: column;\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  width: 100%;\\n}\\n\\n.theia-scm-commit-message-avatar {\\n  margin-right: 5px;\\n}\\n\\n.theia-scm-commit-message-summary {\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n}\\n\\n.theia-scm-commit-message-time {\\n  white-space: nowrap;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  color: var(--theia-descriptionForeground);\\n  font-size: smaller;\\n}\\n\\n.theia-scm-flex-container-center {\\n  display: flex;\\n  align-items: center;\\n}\\n\\n.theia-scm-scrolling-container {\\n  position: relative;\\n  width: 100%;\\n  overflow: hidden;\\n\\n  margin-top: 0;\\n  margin-bottom: 0;\\n  padding-top: 0;\\n  padding-bottom: 0;\\n  border-top: 0;\\n  border-bottom: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// See: http://code.google.com/p/google-diff-match-patch/wiki/API\nexport function convertChangesToDMP(changes) {\n  let ret = [],\n      change,\n      operation;\n  for (let i = 0; i < changes.length; i++) {\n    change = changes[i];\n    if (change.added) {\n      operation = 1;\n    } else if (change.removed) {\n      operation = -1;\n    } else {\n      operation = 0;\n    }\n\n    ret.push([operation, change.value]);\n  }\n  return ret;\n}\n","export function convertChangesToXML(changes) {\n  let ret = [];\n  for (let i = 0; i < changes.length; i++) {\n    let change = changes[i];\n    if (change.added) {\n      ret.push('<ins>');\n    } else if (change.removed) {\n      ret.push('<del>');\n    }\n\n    ret.push(escapeHTML(change.value));\n\n    if (change.added) {\n      ret.push('</ins>');\n    } else if (change.removed) {\n      ret.push('</del>');\n    }\n  }\n  return ret.join('');\n}\n\nfunction escapeHTML(s) {\n  let n = s;\n  n = n.replace(/&/g, '&amp;');\n  n = n.replace(/</g, '&lt;');\n  n = n.replace(/>/g, '&gt;');\n  n = n.replace(/\"/g, '&quot;');\n\n  return n;\n}\n","import Diff from './base';\n\nexport const arrayDiff = new Diff();\narrayDiff.tokenize = function(value) {\n  return value.slice();\n};\narrayDiff.join = arrayDiff.removeEmpty = function(value) {\n  return value;\n};\n\nexport function diffArrays(oldArr, newArr, callback) { return arrayDiff.diff(oldArr, newArr, callback); }\n","export default function Diff() {}\n\nDiff.prototype = {\n  diff(oldString, newString, options = {}) {\n    let callback = options.callback;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    this.options = options;\n\n    let self = this;\n\n    function done(value) {\n      if (callback) {\n        setTimeout(function() { callback(undefined, value); }, 0);\n        return true;\n      } else {\n        return value;\n      }\n    }\n\n    // Allow subclasses to massage the input prior to running\n    oldString = this.castInput(oldString);\n    newString = this.castInput(newString);\n\n    oldString = this.removeEmpty(this.tokenize(oldString));\n    newString = this.removeEmpty(this.tokenize(newString));\n\n    let newLen = newString.length, oldLen = oldString.length;\n    let editLength = 1;\n    let maxEditLength = newLen + oldLen;\n    if(options.maxEditLength) {\n      maxEditLength = Math.min(maxEditLength, options.maxEditLength);\n    }\n    const maxExecutionTime = options.timeout ?? Infinity;\n    const abortAfterTimestamp = Date.now() + maxExecutionTime;\n\n    let bestPath = [{ oldPos: -1, lastComponent: undefined }];\n\n    // Seed editLength = 0, i.e. the content starts with the same values\n    let newPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n    if (bestPath[0].oldPos + 1 >= oldLen && newPos + 1 >= newLen) {\n      // Identity per the equality and tokenizer\n      return done([{value: this.join(newString), count: newString.length}]);\n    }\n\n    // Once we hit the right edge of the edit graph on some diagonal k, we can\n    // definitely reach the end of the edit graph in no more than k edits, so\n    // there's no point in considering any moves to diagonal k+1 any more (from\n    // which we're guaranteed to need at least k+1 more edits).\n    // Similarly, once we've reached the bottom of the edit graph, there's no\n    // point considering moves to lower diagonals.\n    // We record this fact by setting minDiagonalToConsider and\n    // maxDiagonalToConsider to some finite value once we've hit the edge of\n    // the edit graph.\n    // This optimization is not faithful to the original algorithm presented in\n    // Myers's paper, which instead pointlessly extends D-paths off the end of\n    // the edit graph - see page 7 of Myers's paper which notes this point\n    // explicitly and illustrates it with a diagram. This has major performance\n    // implications for some common scenarios. For instance, to compute a diff\n    // where the new text simply appends d characters on the end of the\n    // original text of length n, the true Myers algorithm will take O(n+d^2)\n    // time while this optimization needs only O(n+d) time.\n    let minDiagonalToConsider = -Infinity, maxDiagonalToConsider = Infinity;\n\n    // Main worker method. checks all permutations of a given edit length for acceptance.\n    function execEditLength() {\n      for (\n        let diagonalPath = Math.max(minDiagonalToConsider, -editLength);\n        diagonalPath <= Math.min(maxDiagonalToConsider, editLength);\n        diagonalPath += 2\n      ) {\n        let basePath;\n        let removePath = bestPath[diagonalPath - 1],\n            addPath = bestPath[diagonalPath + 1];\n        if (removePath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n\n        let canAdd = false;\n        if (addPath) {\n          // what newPos will be after we do an insertion:\n          const addPathNewPos = addPath.oldPos - diagonalPath;\n          canAdd = addPath && 0 <= addPathNewPos && addPathNewPos < newLen;\n        }\n\n        let canRemove = removePath && removePath.oldPos + 1 < oldLen;\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        }\n\n        // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the old string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n        // TODO: Remove the `+ 1` here to make behavior match Myers algorithm\n        //       and prefer to order removals before insertions.\n        if (!canRemove || (canAdd && removePath.oldPos + 1 < addPath.oldPos)) {\n          basePath = self.addToPath(addPath, true, undefined, 0);\n        } else {\n          basePath = self.addToPath(removePath, undefined, true, 1);\n        }\n\n        newPos = self.extractCommon(basePath, newString, oldString, diagonalPath);\n\n        if (basePath.oldPos + 1 >= oldLen && newPos + 1 >= newLen) {\n          // If we have hit the end of both strings, then we are done\n          return done(buildValues(self, basePath.lastComponent, newString, oldString, self.useLongestToken));\n        } else {\n          bestPath[diagonalPath] = basePath;\n          if (basePath.oldPos + 1 >= oldLen) {\n            maxDiagonalToConsider = Math.min(maxDiagonalToConsider, diagonalPath - 1);\n          }\n          if (newPos + 1 >= newLen) {\n            minDiagonalToConsider = Math.max(minDiagonalToConsider, diagonalPath + 1);\n          }\n        }\n      }\n\n      editLength++;\n    }\n\n    // Performs the length of edit iteration. Is a bit fugly as this has to support the\n    // sync and async mode which is never fun. Loops over execEditLength until a value\n    // is produced, or until the edit length exceeds options.maxEditLength (if given),\n    // in which case it will return undefined.\n    if (callback) {\n      (function exec() {\n        setTimeout(function() {\n          if (editLength > maxEditLength || Date.now() > abortAfterTimestamp) {\n            return callback();\n          }\n\n          if (!execEditLength()) {\n            exec();\n          }\n        }, 0);\n      }());\n    } else {\n      while (editLength <= maxEditLength && Date.now() <= abortAfterTimestamp) {\n        let ret = execEditLength();\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n\n  addToPath(path, added, removed, oldPosInc) {\n    let last = path.lastComponent;\n    if (last && last.added === added && last.removed === removed) {\n      return {\n        oldPos: path.oldPos + oldPosInc,\n        lastComponent: {count: last.count + 1, added: added, removed: removed, previousComponent: last.previousComponent }\n      };\n    } else {\n      return {\n        oldPos: path.oldPos + oldPosInc,\n        lastComponent: {count: 1, added: added, removed: removed, previousComponent: last }\n      };\n    }\n  },\n  extractCommon(basePath, newString, oldString, diagonalPath) {\n    let newLen = newString.length,\n        oldLen = oldString.length,\n        oldPos = basePath.oldPos,\n        newPos = oldPos - diagonalPath,\n\n        commonCount = 0;\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n    }\n\n    if (commonCount) {\n      basePath.lastComponent = {count: commonCount, previousComponent: basePath.lastComponent};\n    }\n\n    basePath.oldPos = oldPos;\n    return newPos;\n  },\n\n  equals(left, right) {\n    if (this.options.comparator) {\n      return this.options.comparator(left, right);\n    } else {\n      return left === right\n        || (this.options.ignoreCase && left.toLowerCase() === right.toLowerCase());\n    }\n  },\n  removeEmpty(array) {\n    let ret = [];\n    for (let i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n    return ret;\n  },\n  castInput(value) {\n    return value;\n  },\n  tokenize(value) {\n    return value.split('');\n  },\n  join(chars) {\n    return chars.join('');\n  }\n};\n\nfunction buildValues(diff, lastComponent, newString, oldString, useLongestToken) {\n  // First we convert our linked list of components in reverse order to an\n  // array in the right order:\n  const components = [];\n  let nextComponent;\n  while (lastComponent) {\n    components.push(lastComponent);\n    nextComponent = lastComponent.previousComponent;\n    delete lastComponent.previousComponent;\n    lastComponent = nextComponent;\n  }\n  components.reverse();\n\n  let componentPos = 0,\n      componentLen = components.length,\n      newPos = 0,\n      oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    let component = components[componentPos];\n    if (!component.removed) {\n      if (!component.added && useLongestToken) {\n        let value = newString.slice(newPos, newPos + component.count);\n        value = value.map(function(value, i) {\n          let oldValue = oldString[oldPos + i];\n          return oldValue.length > value.length ? oldValue : value;\n        });\n\n        component.value = diff.join(value);\n      } else {\n        component.value = diff.join(newString.slice(newPos, newPos + component.count));\n      }\n      newPos += component.count;\n\n      // Common case\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n      oldPos += component.count;\n\n      // Reverse add and remove so removes are output first to match common convention\n      // The diffing algorithm is tied to add then remove output and this is the simplest\n      // route to get the desired output with minimal overhead.\n      if (componentPos && components[componentPos - 1].added) {\n        let tmp = components[componentPos - 1];\n        components[componentPos - 1] = components[componentPos];\n        components[componentPos] = tmp;\n      }\n    }\n  }\n\n  // Special case handle for when one terminal is ignored (i.e. whitespace).\n  // For this case we merge the terminal into the prior string and drop the change.\n  // This is only available for string mode.\n  let finalComponent = components[componentLen - 1];\n  if (componentLen > 1\n      && typeof finalComponent.value === 'string'\n      && (finalComponent.added || finalComponent.removed)\n      && diff.equals('', finalComponent.value)) {\n    components[componentLen - 2].value += finalComponent.value;\n    components.pop();\n  }\n\n  return components;\n}\n","import Diff from './base';\n\nexport const characterDiff = new Diff();\nexport function diffChars(oldStr, newStr, options) { return characterDiff.diff(oldStr, newStr, options); }\n","import Diff from './base';\n\nexport const cssDiff = new Diff();\ncssDiff.tokenize = function(value) {\n  return value.split(/([{}:;,]|\\s+)/);\n};\n\nexport function diffCss(oldStr, newStr, callback) { return cssDiff.diff(oldStr, newStr, callback); }\n","import Diff from './base';\nimport {lineDiff} from './line';\n\nconst objectPrototypeToString = Object.prototype.toString;\n\n\nexport const jsonDiff = new Diff();\n// Discriminate between two lines of pretty-printed, serialized JSON where one of them has a\n// dangling comma and the other doesn't. Turns out including the dangling comma yields the nicest output:\njsonDiff.useLongestToken = true;\n\njsonDiff.tokenize = lineDiff.tokenize;\njsonDiff.castInput = function(value) {\n  const {undefinedReplacement, stringifyReplacer = (k, v) => typeof v === 'undefined' ? undefinedReplacement : v} = this.options;\n\n  return typeof value === 'string' ? value : JSON.stringify(canonicalize(value, null, null, stringifyReplacer), stringifyReplacer, '  ');\n};\njsonDiff.equals = function(left, right) {\n  return Diff.prototype.equals.call(jsonDiff, left.replace(/,([\\r\\n])/g, '$1'), right.replace(/,([\\r\\n])/g, '$1'));\n};\n\nexport function diffJson(oldObj, newObj, options) { return jsonDiff.diff(oldObj, newObj, options); }\n\n// This function handles the presence of circular references by bailing out when encountering an\n// object that is already on the \"stack\" of items being processed. Accepts an optional replacer\nexport function canonicalize(obj, stack, replacementStack, replacer, key) {\n  stack = stack || [];\n  replacementStack = replacementStack || [];\n\n  if (replacer) {\n    obj = replacer(key, obj);\n  }\n\n  let i;\n\n  for (i = 0; i < stack.length; i += 1) {\n    if (stack[i] === obj) {\n      return replacementStack[i];\n    }\n  }\n\n  let canonicalizedObj;\n\n  if ('[object Array]' === objectPrototypeToString.call(obj)) {\n    stack.push(obj);\n    canonicalizedObj = new Array(obj.length);\n    replacementStack.push(canonicalizedObj);\n    for (i = 0; i < obj.length; i += 1) {\n      canonicalizedObj[i] = canonicalize(obj[i], stack, replacementStack, replacer, key);\n    }\n    stack.pop();\n    replacementStack.pop();\n    return canonicalizedObj;\n  }\n\n  if (obj && obj.toJSON) {\n    obj = obj.toJSON();\n  }\n\n  if (typeof obj === 'object' && obj !== null) {\n    stack.push(obj);\n    canonicalizedObj = {};\n    replacementStack.push(canonicalizedObj);\n    let sortedKeys = [],\n        key;\n    for (key in obj) {\n      /* istanbul ignore else */\n      if (obj.hasOwnProperty(key)) {\n        sortedKeys.push(key);\n      }\n    }\n    sortedKeys.sort();\n    for (i = 0; i < sortedKeys.length; i += 1) {\n      key = sortedKeys[i];\n      canonicalizedObj[key] = canonicalize(obj[key], stack, replacementStack, replacer, key);\n    }\n    stack.pop();\n    replacementStack.pop();\n  } else {\n    canonicalizedObj = obj;\n  }\n  return canonicalizedObj;\n}\n","import Diff from './base';\nimport {generateOptions} from '../util/params';\n\nexport const lineDiff = new Diff();\nlineDiff.tokenize = function(value) {\n  if(this.options.stripTrailingCr) {\n    // remove one \\r before \\n to match GNU diff's --strip-trailing-cr behavior\n    value = value.replace(/\\r\\n/g, '\\n');\n  }\n\n  let retLines = [],\n      linesAndNewlines = value.split(/(\\n|\\r\\n)/);\n\n  // Ignore the final empty token that occurs if the string ends with a new line\n  if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n    linesAndNewlines.pop();\n  }\n\n  // Merge the content and line separators into single tokens\n  for (let i = 0; i < linesAndNewlines.length; i++) {\n    let line = linesAndNewlines[i];\n\n    if (i % 2 && !this.options.newlineIsToken) {\n      retLines[retLines.length - 1] += line;\n    } else {\n      if (this.options.ignoreWhitespace) {\n        line = line.trim();\n      }\n      retLines.push(line);\n    }\n  }\n\n  return retLines;\n};\n\nexport function diffLines(oldStr, newStr, callback) { return lineDiff.diff(oldStr, newStr, callback); }\nexport function diffTrimmedLines(oldStr, newStr, callback) {\n  let options = generateOptions(callback, {ignoreWhitespace: true});\n  return lineDiff.diff(oldStr, newStr, options);\n}\n","import Diff from './base';\n\n\nexport const sentenceDiff = new Diff();\nsentenceDiff.tokenize = function(value) {\n  return value.split(/(\\S.+?[.!?])(?=\\s+|$)/);\n};\n\nexport function diffSentences(oldStr, newStr, callback) { return sentenceDiff.diff(oldStr, newStr, callback); }\n","import Diff from './base';\nimport {generateOptions} from '../util/params';\n\n// Based on https://en.wikipedia.org/wiki/Latin_script_in_Unicode\n//\n// Ranges and exceptions:\n// Latin-1 Supplement, 008000FF\n//  - U+00D7   Multiplication sign\n//  - U+00F7   Division sign\n// Latin Extended-A, 0100017F\n// Latin Extended-B, 0180024F\n// IPA Extensions, 025002AF\n// Spacing Modifier Letters, 02B002FF\n//  - U+02C7   &#711;  Caron\n//  - U+02D8   &#728;  Breve\n//  - U+02D9   &#729;  Dot Above\n//  - U+02DA   &#730;  Ring Above\n//  - U+02DB   &#731;  Ogonek\n//  - U+02DC   &#732;  Small Tilde\n//  - U+02DD   &#733;  Double Acute Accent\n// Latin Extended Additional, 1E001EFF\nconst extendedWordChars = /^[a-zA-Z\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}]+$/u;\n\nconst reWhitespace = /\\S/;\n\nexport const wordDiff = new Diff();\nwordDiff.equals = function(left, right) {\n  if (this.options.ignoreCase) {\n    left = left.toLowerCase();\n    right = right.toLowerCase();\n  }\n  return left === right || (this.options.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right));\n};\nwordDiff.tokenize = function(value) {\n  // All whitespace symbols except newline group into one token, each newline - in separate token\n  let tokens = value.split(/([^\\S\\r\\n]+|[()[\\]{}'\"\\r\\n]|\\b)/);\n\n  // Join the boundary splits that we do not consider to be boundaries. This is primarily the extended Latin character set.\n  for (let i = 0; i < tokens.length - 1; i++) {\n    // If we have an empty string in the next field and we have only word chars before and after, merge\n    if (!tokens[i + 1] && tokens[i + 2]\n          && extendedWordChars.test(tokens[i])\n          && extendedWordChars.test(tokens[i + 2])) {\n      tokens[i] += tokens[i + 2];\n      tokens.splice(i + 1, 2);\n      i--;\n    }\n  }\n\n  return tokens;\n};\n\nexport function diffWords(oldStr, newStr, options) {\n  options = generateOptions(options, {ignoreWhitespace: true});\n  return wordDiff.diff(oldStr, newStr, options);\n}\n\nexport function diffWordsWithSpace(oldStr, newStr, options) {\n  return wordDiff.diff(oldStr, newStr, options);\n}\n","/* See LICENSE file for terms of use */\n\n/*\n * Text diff implementation.\n *\n * This library supports the following APIs:\n * Diff.diffChars: Character by character diff\n * Diff.diffWords: Word (as defined by \\b regex) diff which ignores whitespace\n * Diff.diffLines: Line based diff\n *\n * Diff.diffCss: Diff targeted at CSS content\n *\n * These methods are based on the implementation proposed in\n * \"An O(ND) Difference Algorithm and its Variations\" (Myers, 1986).\n * http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.4.6927\n */\nimport Diff from './diff/base';\nimport {diffChars} from './diff/character';\nimport {diffWords, diffWordsWithSpace} from './diff/word';\nimport {diffLines, diffTrimmedLines} from './diff/line';\nimport {diffSentences} from './diff/sentence';\n\nimport {diffCss} from './diff/css';\nimport {diffJson, canonicalize} from './diff/json';\n\nimport {diffArrays} from './diff/array';\n\nimport {applyPatch, applyPatches} from './patch/apply';\nimport {parsePatch} from './patch/parse';\nimport {merge} from './patch/merge';\nimport {reversePatch} from './patch/reverse';\nimport {structuredPatch, createTwoFilesPatch, createPatch, formatPatch} from './patch/create';\n\nimport {convertChangesToDMP} from './convert/dmp';\nimport {convertChangesToXML} from './convert/xml';\n\nexport {\n  Diff,\n\n  diffChars,\n  diffWords,\n  diffWordsWithSpace,\n  diffLines,\n  diffTrimmedLines,\n  diffSentences,\n\n  diffCss,\n  diffJson,\n\n  diffArrays,\n\n  structuredPatch,\n  createTwoFilesPatch,\n  createPatch,\n  formatPatch,\n  applyPatch,\n  applyPatches,\n  parsePatch,\n  merge,\n  reversePatch,\n  convertChangesToDMP,\n  convertChangesToXML,\n  canonicalize\n};\n","import {parsePatch} from './parse';\nimport distanceIterator from '../util/distance-iterator';\n\nexport function applyPatch(source, uniDiff, options = {}) {\n  if (typeof uniDiff === 'string') {\n    uniDiff = parsePatch(uniDiff);\n  }\n\n  if (Array.isArray(uniDiff)) {\n    if (uniDiff.length > 1) {\n      throw new Error('applyPatch only works with a single input.');\n    }\n\n    uniDiff = uniDiff[0];\n  }\n\n  // Apply the diff to the input\n  let lines = source.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n      delimiters = source.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n      hunks = uniDiff.hunks,\n\n      compareLine = options.compareLine || ((lineNumber, line, operation, patchContent) => line === patchContent),\n      errorCount = 0,\n      fuzzFactor = options.fuzzFactor || 0,\n      minLine = 0,\n      offset = 0,\n\n      removeEOFNL,\n      addEOFNL;\n\n  /**\n   * Checks if the hunk exactly fits on the provided location\n   */\n  function hunkFits(hunk, toPos) {\n    for (let j = 0; j < hunk.lines.length; j++) {\n      let line = hunk.lines[j],\n          operation = (line.length > 0 ? line[0] : ' '),\n          content = (line.length > 0 ? line.substr(1) : line);\n\n      if (operation === ' ' || operation === '-') {\n        // Context sanity check\n        if (!compareLine(toPos + 1, lines[toPos], operation, content)) {\n          errorCount++;\n\n          if (errorCount > fuzzFactor) {\n            return false;\n          }\n        }\n        toPos++;\n      }\n    }\n\n    return true;\n  }\n\n  // Search best fit offsets for each hunk based on the previous ones\n  for (let i = 0; i < hunks.length; i++) {\n    let hunk = hunks[i],\n        maxLine = lines.length - hunk.oldLines,\n        localOffset = 0,\n        toPos = offset + hunk.oldStart - 1;\n\n    let iterator = distanceIterator(toPos, minLine, maxLine);\n\n    for (; localOffset !== undefined; localOffset = iterator()) {\n      if (hunkFits(hunk, toPos + localOffset)) {\n        hunk.offset = offset += localOffset;\n        break;\n      }\n    }\n\n    if (localOffset === undefined) {\n      return false;\n    }\n\n    // Set lower text limit to end of the current hunk, so next ones don't try\n    // to fit over already patched text\n    minLine = hunk.offset + hunk.oldStart + hunk.oldLines;\n  }\n\n  // Apply patch hunks\n  let diffOffset = 0;\n  for (let i = 0; i < hunks.length; i++) {\n    let hunk = hunks[i],\n        toPos = hunk.oldStart + hunk.offset + diffOffset - 1;\n    diffOffset += hunk.newLines - hunk.oldLines;\n\n    for (let j = 0; j < hunk.lines.length; j++) {\n      let line = hunk.lines[j],\n          operation = (line.length > 0 ? line[0] : ' '),\n          content = (line.length > 0 ? line.substr(1) : line),\n          delimiter = hunk.linedelimiters && hunk.linedelimiters[j] || '\\n';\n\n      if (operation === ' ') {\n        toPos++;\n      } else if (operation === '-') {\n        lines.splice(toPos, 1);\n        delimiters.splice(toPos, 1);\n      /* istanbul ignore else */\n      } else if (operation === '+') {\n        lines.splice(toPos, 0, content);\n        delimiters.splice(toPos, 0, delimiter);\n        toPos++;\n      } else if (operation === '\\\\') {\n        let previousOperation = hunk.lines[j - 1] ? hunk.lines[j - 1][0] : null;\n        if (previousOperation === '+') {\n          removeEOFNL = true;\n        } else if (previousOperation === '-') {\n          addEOFNL = true;\n        }\n      }\n    }\n  }\n\n  // Handle EOFNL insertion/removal\n  if (removeEOFNL) {\n    while (!lines[lines.length - 1]) {\n      lines.pop();\n      delimiters.pop();\n    }\n  } else if (addEOFNL) {\n    lines.push('');\n    delimiters.push('\\n');\n  }\n  for (let _k = 0; _k < lines.length - 1; _k++) {\n    lines[_k] = lines[_k] + delimiters[_k];\n  }\n  return lines.join('');\n}\n\n// Wrapper that supports multiple file patches via callbacks.\nexport function applyPatches(uniDiff, options) {\n  if (typeof uniDiff === 'string') {\n    uniDiff = parsePatch(uniDiff);\n  }\n\n  let currentIndex = 0;\n  function processIndex() {\n    let index = uniDiff[currentIndex++];\n    if (!index) {\n      return options.complete();\n    }\n\n    options.loadFile(index, function(err, data) {\n      if (err) {\n        return options.complete(err);\n      }\n\n      let updatedContent = applyPatch(data, index, options);\n      options.patched(index, updatedContent, function(err) {\n        if (err) {\n          return options.complete(err);\n        }\n\n        processIndex();\n      });\n    });\n  }\n  processIndex();\n}\n","import {diffLines} from '../diff/line';\n\nexport function structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  if (!options) {\n    options = {};\n  }\n  if (typeof options.context === 'undefined') {\n    options.context = 4;\n  }\n\n  const diff = diffLines(oldStr, newStr, options);\n  if(!diff) {\n    return;\n  }\n\n  diff.push({value: '', lines: []}); // Append an empty value to make cleanup easier\n\n  function contextLines(lines) {\n    return lines.map(function(entry) { return ' ' + entry; });\n  }\n\n  let hunks = [];\n  let oldRangeStart = 0, newRangeStart = 0, curRange = [],\n      oldLine = 1, newLine = 1;\n  for (let i = 0; i < diff.length; i++) {\n    const current = diff[i],\n          lines = current.lines || current.value.replace(/\\n$/, '').split('\\n');\n    current.lines = lines;\n\n    if (current.added || current.removed) {\n      // If we have previous context, start with that\n      if (!oldRangeStart) {\n        const prev = diff[i - 1];\n        oldRangeStart = oldLine;\n        newRangeStart = newLine;\n\n        if (prev) {\n          curRange = options.context > 0 ? contextLines(prev.lines.slice(-options.context)) : [];\n          oldRangeStart -= curRange.length;\n          newRangeStart -= curRange.length;\n        }\n      }\n\n      // Output our changes\n      curRange.push(... lines.map(function(entry) {\n        return (current.added ? '+' : '-') + entry;\n      }));\n\n      // Track the updated file position\n      if (current.added) {\n        newLine += lines.length;\n      } else {\n        oldLine += lines.length;\n      }\n    } else {\n      // Identical context lines. Track line changes\n      if (oldRangeStart) {\n        // Close out any changes that have been output (or join overlapping)\n        if (lines.length <= options.context * 2 && i < diff.length - 2) {\n          // Overlapping\n          curRange.push(... contextLines(lines));\n        } else {\n          // end the range and output\n          let contextSize = Math.min(lines.length, options.context);\n          curRange.push(... contextLines(lines.slice(0, contextSize)));\n\n          let hunk = {\n            oldStart: oldRangeStart,\n            oldLines: (oldLine - oldRangeStart + contextSize),\n            newStart: newRangeStart,\n            newLines: (newLine - newRangeStart + contextSize),\n            lines: curRange\n          };\n          if (i >= diff.length - 2 && lines.length <= options.context) {\n            // EOF is inside this hunk\n            let oldEOFNewline = ((/\\n$/).test(oldStr));\n            let newEOFNewline = ((/\\n$/).test(newStr));\n            let noNlBeforeAdds = lines.length == 0 && curRange.length > hunk.oldLines;\n            if (!oldEOFNewline && noNlBeforeAdds && oldStr.length > 0) {\n              // special case: old has no eol and no trailing context; no-nl can end up before adds\n              // however, if the old file is empty, do not output the no-nl line\n              curRange.splice(hunk.oldLines, 0, '\\\\ No newline at end of file');\n            }\n            if ((!oldEOFNewline && !noNlBeforeAdds) || !newEOFNewline) {\n              curRange.push('\\\\ No newline at end of file');\n            }\n          }\n          hunks.push(hunk);\n\n          oldRangeStart = 0;\n          newRangeStart = 0;\n          curRange = [];\n        }\n      }\n      oldLine += lines.length;\n      newLine += lines.length;\n    }\n  }\n\n  return {\n    oldFileName: oldFileName, newFileName: newFileName,\n    oldHeader: oldHeader, newHeader: newHeader,\n    hunks: hunks\n  };\n}\n\nexport function formatPatch(diff) {\n  if (Array.isArray(diff)) {\n    return diff.map(formatPatch).join('\\n');\n  }\n\n  const ret = [];\n  if (diff.oldFileName == diff.newFileName) {\n    ret.push('Index: ' + diff.oldFileName);\n  }\n  ret.push('===================================================================');\n  ret.push('--- ' + diff.oldFileName + (typeof diff.oldHeader === 'undefined' ? '' : '\\t' + diff.oldHeader));\n  ret.push('+++ ' + diff.newFileName + (typeof diff.newHeader === 'undefined' ? '' : '\\t' + diff.newHeader));\n\n  for (let i = 0; i < diff.hunks.length; i++) {\n    const hunk = diff.hunks[i];\n    // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n    if (hunk.oldLines === 0) {\n      hunk.oldStart -= 1;\n    }\n    if (hunk.newLines === 0) {\n      hunk.newStart -= 1;\n    }\n    ret.push(\n      '@@ -' + hunk.oldStart + ',' + hunk.oldLines\n      + ' +' + hunk.newStart + ',' + hunk.newLines\n      + ' @@'\n    );\n    ret.push.apply(ret, hunk.lines);\n  }\n\n  return ret.join('\\n') + '\\n';\n}\n\nexport function createTwoFilesPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options) {\n  return formatPatch(structuredPatch(oldFileName, newFileName, oldStr, newStr, oldHeader, newHeader, options));\n}\n\nexport function createPatch(fileName, oldStr, newStr, oldHeader, newHeader, options) {\n  return createTwoFilesPatch(fileName, fileName, oldStr, newStr, oldHeader, newHeader, options);\n}\n","import {structuredPatch} from './create';\nimport {parsePatch} from './parse';\n\nimport {arrayEqual, arrayStartsWith} from '../util/array';\n\nexport function calcLineCount(hunk) {\n  const {oldLines, newLines} = calcOldNewLineCount(hunk.lines);\n\n  if (oldLines !== undefined) {\n    hunk.oldLines = oldLines;\n  } else {\n    delete hunk.oldLines;\n  }\n\n  if (newLines !== undefined) {\n    hunk.newLines = newLines;\n  } else {\n    delete hunk.newLines;\n  }\n}\n\nexport function merge(mine, theirs, base) {\n  mine = loadPatch(mine, base);\n  theirs = loadPatch(theirs, base);\n\n  let ret = {};\n\n  // For index we just let it pass through as it doesn't have any necessary meaning.\n  // Leaving sanity checks on this to the API consumer that may know more about the\n  // meaning in their own context.\n  if (mine.index || theirs.index) {\n    ret.index = mine.index || theirs.index;\n  }\n\n  if (mine.newFileName || theirs.newFileName) {\n    if (!fileNameChanged(mine)) {\n      // No header or no change in ours, use theirs (and ours if theirs does not exist)\n      ret.oldFileName = theirs.oldFileName || mine.oldFileName;\n      ret.newFileName = theirs.newFileName || mine.newFileName;\n      ret.oldHeader = theirs.oldHeader || mine.oldHeader;\n      ret.newHeader = theirs.newHeader || mine.newHeader;\n    } else if (!fileNameChanged(theirs)) {\n      // No header or no change in theirs, use ours\n      ret.oldFileName = mine.oldFileName;\n      ret.newFileName = mine.newFileName;\n      ret.oldHeader = mine.oldHeader;\n      ret.newHeader = mine.newHeader;\n    } else {\n      // Both changed... figure it out\n      ret.oldFileName = selectField(ret, mine.oldFileName, theirs.oldFileName);\n      ret.newFileName = selectField(ret, mine.newFileName, theirs.newFileName);\n      ret.oldHeader = selectField(ret, mine.oldHeader, theirs.oldHeader);\n      ret.newHeader = selectField(ret, mine.newHeader, theirs.newHeader);\n    }\n  }\n\n  ret.hunks = [];\n\n  let mineIndex = 0,\n      theirsIndex = 0,\n      mineOffset = 0,\n      theirsOffset = 0;\n\n  while (mineIndex < mine.hunks.length || theirsIndex < theirs.hunks.length) {\n    let mineCurrent = mine.hunks[mineIndex] || {oldStart: Infinity},\n        theirsCurrent = theirs.hunks[theirsIndex] || {oldStart: Infinity};\n\n    if (hunkBefore(mineCurrent, theirsCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(mineCurrent, mineOffset));\n      mineIndex++;\n      theirsOffset += mineCurrent.newLines - mineCurrent.oldLines;\n    } else if (hunkBefore(theirsCurrent, mineCurrent)) {\n      // This patch does not overlap with any of the others, yay.\n      ret.hunks.push(cloneHunk(theirsCurrent, theirsOffset));\n      theirsIndex++;\n      mineOffset += theirsCurrent.newLines - theirsCurrent.oldLines;\n    } else {\n      // Overlap, merge as best we can\n      let mergedHunk = {\n        oldStart: Math.min(mineCurrent.oldStart, theirsCurrent.oldStart),\n        oldLines: 0,\n        newStart: Math.min(mineCurrent.newStart + mineOffset, theirsCurrent.oldStart + theirsOffset),\n        newLines: 0,\n        lines: []\n      };\n      mergeLines(mergedHunk, mineCurrent.oldStart, mineCurrent.lines, theirsCurrent.oldStart, theirsCurrent.lines);\n      theirsIndex++;\n      mineIndex++;\n\n      ret.hunks.push(mergedHunk);\n    }\n  }\n\n  return ret;\n}\n\nfunction loadPatch(param, base) {\n  if (typeof param === 'string') {\n    if ((/^@@/m).test(param) || ((/^Index:/m).test(param))) {\n      return parsePatch(param)[0];\n    }\n\n    if (!base) {\n      throw new Error('Must provide a base reference or pass in a patch');\n    }\n    return structuredPatch(undefined, undefined, base, param);\n  }\n\n  return param;\n}\n\nfunction fileNameChanged(patch) {\n  return patch.newFileName && patch.newFileName !== patch.oldFileName;\n}\n\nfunction selectField(index, mine, theirs) {\n  if (mine === theirs) {\n    return mine;\n  } else {\n    index.conflict = true;\n    return {mine, theirs};\n  }\n}\n\nfunction hunkBefore(test, check) {\n  return test.oldStart < check.oldStart\n    && (test.oldStart + test.oldLines) < check.oldStart;\n}\n\nfunction cloneHunk(hunk, offset) {\n  return {\n    oldStart: hunk.oldStart, oldLines: hunk.oldLines,\n    newStart: hunk.newStart + offset, newLines: hunk.newLines,\n    lines: hunk.lines\n  };\n}\n\nfunction mergeLines(hunk, mineOffset, mineLines, theirOffset, theirLines) {\n  // This will generally result in a conflicted hunk, but there are cases where the context\n  // is the only overlap where we can successfully merge the content here.\n  let mine = {offset: mineOffset, lines: mineLines, index: 0},\n      their = {offset: theirOffset, lines: theirLines, index: 0};\n\n  // Handle any leading content\n  insertLeading(hunk, mine, their);\n  insertLeading(hunk, their, mine);\n\n  // Now in the overlap content. Scan through and select the best changes from each.\n  while (mine.index < mine.lines.length && their.index < their.lines.length) {\n    let mineCurrent = mine.lines[mine.index],\n        theirCurrent = their.lines[their.index];\n\n    if ((mineCurrent[0] === '-' || mineCurrent[0] === '+')\n        && (theirCurrent[0] === '-' || theirCurrent[0] === '+')) {\n      // Both modified ...\n      mutualChange(hunk, mine, their);\n    } else if (mineCurrent[0] === '+' && theirCurrent[0] === ' ') {\n      // Mine inserted\n      hunk.lines.push(... collectChange(mine));\n    } else if (theirCurrent[0] === '+' && mineCurrent[0] === ' ') {\n      // Theirs inserted\n      hunk.lines.push(... collectChange(their));\n    } else if (mineCurrent[0] === '-' && theirCurrent[0] === ' ') {\n      // Mine removed or edited\n      removal(hunk, mine, their);\n    } else if (theirCurrent[0] === '-' && mineCurrent[0] === ' ') {\n      // Their removed or edited\n      removal(hunk, their, mine, true);\n    } else if (mineCurrent === theirCurrent) {\n      // Context identity\n      hunk.lines.push(mineCurrent);\n      mine.index++;\n      their.index++;\n    } else {\n      // Context mismatch\n      conflict(hunk, collectChange(mine), collectChange(their));\n    }\n  }\n\n  // Now push anything that may be remaining\n  insertTrailing(hunk, mine);\n  insertTrailing(hunk, their);\n\n  calcLineCount(hunk);\n}\n\nfunction mutualChange(hunk, mine, their) {\n  let myChanges = collectChange(mine),\n      theirChanges = collectChange(their);\n\n  if (allRemoves(myChanges) && allRemoves(theirChanges)) {\n    // Special case for remove changes that are supersets of one another\n    if (arrayStartsWith(myChanges, theirChanges)\n        && skipRemoveSuperset(their, myChanges, myChanges.length - theirChanges.length)) {\n      hunk.lines.push(... myChanges);\n      return;\n    } else if (arrayStartsWith(theirChanges, myChanges)\n        && skipRemoveSuperset(mine, theirChanges, theirChanges.length - myChanges.length)) {\n      hunk.lines.push(... theirChanges);\n      return;\n    }\n  } else if (arrayEqual(myChanges, theirChanges)) {\n    hunk.lines.push(... myChanges);\n    return;\n  }\n\n  conflict(hunk, myChanges, theirChanges);\n}\n\nfunction removal(hunk, mine, their, swap) {\n  let myChanges = collectChange(mine),\n      theirChanges = collectContext(their, myChanges);\n  if (theirChanges.merged) {\n    hunk.lines.push(... theirChanges.merged);\n  } else {\n    conflict(hunk, swap ? theirChanges : myChanges, swap ? myChanges : theirChanges);\n  }\n}\n\nfunction conflict(hunk, mine, their) {\n  hunk.conflict = true;\n  hunk.lines.push({\n    conflict: true,\n    mine: mine,\n    theirs: their\n  });\n}\n\nfunction insertLeading(hunk, insert, their) {\n  while (insert.offset < their.offset && insert.index < insert.lines.length) {\n    let line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n    insert.offset++;\n  }\n}\nfunction insertTrailing(hunk, insert) {\n  while (insert.index < insert.lines.length) {\n    let line = insert.lines[insert.index++];\n    hunk.lines.push(line);\n  }\n}\n\nfunction collectChange(state) {\n  let ret = [],\n      operation = state.lines[state.index][0];\n  while (state.index < state.lines.length) {\n    let line = state.lines[state.index];\n\n    // Group additions that are immediately after subtractions and treat them as one \"atomic\" modify change.\n    if (operation === '-' && line[0] === '+') {\n      operation = '+';\n    }\n\n    if (operation === line[0]) {\n      ret.push(line);\n      state.index++;\n    } else {\n      break;\n    }\n  }\n\n  return ret;\n}\nfunction collectContext(state, matchChanges) {\n  let changes = [],\n      merged = [],\n      matchIndex = 0,\n      contextChanges = false,\n      conflicted = false;\n  while (matchIndex < matchChanges.length\n        && state.index < state.lines.length) {\n    let change = state.lines[state.index],\n        match = matchChanges[matchIndex];\n\n    // Once we've hit our add, then we are done\n    if (match[0] === '+') {\n      break;\n    }\n\n    contextChanges = contextChanges || change[0] !== ' ';\n\n    merged.push(match);\n    matchIndex++;\n\n    // Consume any additions in the other block as a conflict to attempt\n    // to pull in the remaining context after this\n    if (change[0] === '+') {\n      conflicted = true;\n\n      while (change[0] === '+') {\n        changes.push(change);\n        change = state.lines[++state.index];\n      }\n    }\n\n    if (match.substr(1) === change.substr(1)) {\n      changes.push(change);\n      state.index++;\n    } else {\n      conflicted = true;\n    }\n  }\n\n  if ((matchChanges[matchIndex] || '')[0] === '+'\n      && contextChanges) {\n    conflicted = true;\n  }\n\n  if (conflicted) {\n    return changes;\n  }\n\n  while (matchIndex < matchChanges.length) {\n    merged.push(matchChanges[matchIndex++]);\n  }\n\n  return {\n    merged,\n    changes\n  };\n}\n\nfunction allRemoves(changes) {\n  return changes.reduce(function(prev, change) {\n    return prev && change[0] === '-';\n  }, true);\n}\nfunction skipRemoveSuperset(state, removeChanges, delta) {\n  for (let i = 0; i < delta; i++) {\n    let changeContent = removeChanges[removeChanges.length - delta + i].substr(1);\n    if (state.lines[state.index + i] !== ' ' + changeContent) {\n      return false;\n    }\n  }\n\n  state.index += delta;\n  return true;\n}\n\nfunction calcOldNewLineCount(lines) {\n  let oldLines = 0;\n  let newLines = 0;\n\n  lines.forEach(function(line) {\n    if (typeof line !== 'string') {\n      let myCount = calcOldNewLineCount(line.mine);\n      let theirCount = calcOldNewLineCount(line.theirs);\n\n      if (oldLines !== undefined) {\n        if (myCount.oldLines === theirCount.oldLines) {\n          oldLines += myCount.oldLines;\n        } else {\n          oldLines = undefined;\n        }\n      }\n\n      if (newLines !== undefined) {\n        if (myCount.newLines === theirCount.newLines) {\n          newLines += myCount.newLines;\n        } else {\n          newLines = undefined;\n        }\n      }\n    } else {\n      if (newLines !== undefined && (line[0] === '+' || line[0] === ' ')) {\n        newLines++;\n      }\n      if (oldLines !== undefined && (line[0] === '-' || line[0] === ' ')) {\n        oldLines++;\n      }\n    }\n  });\n\n  return {oldLines, newLines};\n}\n","export function parsePatch(uniDiff, options = {}) {\n  let diffstr = uniDiff.split(/\\r\\n|[\\n\\v\\f\\r\\x85]/),\n      delimiters = uniDiff.match(/\\r\\n|[\\n\\v\\f\\r\\x85]/g) || [],\n      list = [],\n      i = 0;\n\n  function parseIndex() {\n    let index = {};\n    list.push(index);\n\n    // Parse diff metadata\n    while (i < diffstr.length) {\n      let line = diffstr[i];\n\n      // File header found, end parsing diff metadata\n      if ((/^(\\-\\-\\-|\\+\\+\\+|@@)\\s/).test(line)) {\n        break;\n      }\n\n      // Diff index\n      let header = (/^(?:Index:|diff(?: -r \\w+)+)\\s+(.+?)\\s*$/).exec(line);\n      if (header) {\n        index.index = header[1];\n      }\n\n      i++;\n    }\n\n    // Parse file headers if they are defined. Unified diff requires them, but\n    // there's no technical issues to have an isolated hunk without file header\n    parseFileHeader(index);\n    parseFileHeader(index);\n\n    // Parse hunks\n    index.hunks = [];\n\n    while (i < diffstr.length) {\n      let line = diffstr[i];\n\n      if ((/^(Index:|diff|\\-\\-\\-|\\+\\+\\+)\\s/).test(line)) {\n        break;\n      } else if ((/^@@/).test(line)) {\n        index.hunks.push(parseHunk());\n      } else if (line && options.strict) {\n        // Ignore unexpected content unless in strict mode\n        throw new Error('Unknown line ' + (i + 1) + ' ' + JSON.stringify(line));\n      } else {\n        i++;\n      }\n    }\n  }\n\n  // Parses the --- and +++ headers, if none are found, no lines\n  // are consumed.\n  function parseFileHeader(index) {\n    const fileHeader = (/^(---|\\+\\+\\+)\\s+(.*)$/).exec(diffstr[i]);\n    if (fileHeader) {\n      let keyPrefix = fileHeader[1] === '---' ? 'old' : 'new';\n      const data = fileHeader[2].split('\\t', 2);\n      let fileName = data[0].replace(/\\\\\\\\/g, '\\\\');\n      if ((/^\".*\"$/).test(fileName)) {\n        fileName = fileName.substr(1, fileName.length - 2);\n      }\n      index[keyPrefix + 'FileName'] = fileName;\n      index[keyPrefix + 'Header'] = (data[1] || '').trim();\n\n      i++;\n    }\n  }\n\n  // Parses a hunk\n  // This assumes that we are at the start of a hunk.\n  function parseHunk() {\n    let chunkHeaderIndex = i,\n        chunkHeaderLine = diffstr[i++],\n        chunkHeader = chunkHeaderLine.split(/@@ -(\\d+)(?:,(\\d+))? \\+(\\d+)(?:,(\\d+))? @@/);\n\n    let hunk = {\n      oldStart: +chunkHeader[1],\n      oldLines: typeof chunkHeader[2] === 'undefined' ? 1 : +chunkHeader[2],\n      newStart: +chunkHeader[3],\n      newLines: typeof chunkHeader[4] === 'undefined' ? 1 : +chunkHeader[4],\n      lines: [],\n      linedelimiters: []\n    };\n\n    // Unified Diff Format quirk: If the chunk size is 0,\n    // the first number is one lower than one would expect.\n    // https://www.artima.com/weblogs/viewpost.jsp?thread=164293\n    if (hunk.oldLines === 0) {\n      hunk.oldStart += 1;\n    }\n    if (hunk.newLines === 0) {\n      hunk.newStart += 1;\n    }\n\n    let addCount = 0,\n        removeCount = 0;\n    for (; i < diffstr.length; i++) {\n      // Lines starting with '---' could be mistaken for the \"remove line\" operation\n      // But they could be the header for the next file. Therefore prune such cases out.\n      if (diffstr[i].indexOf('--- ') === 0\n            && (i + 2 < diffstr.length)\n            && diffstr[i + 1].indexOf('+++ ') === 0\n            && diffstr[i + 2].indexOf('@@') === 0) {\n          break;\n      }\n      let operation = (diffstr[i].length == 0 && i != (diffstr.length - 1)) ? ' ' : diffstr[i][0];\n\n      if (operation === '+' || operation === '-' || operation === ' ' || operation === '\\\\') {\n        hunk.lines.push(diffstr[i]);\n        hunk.linedelimiters.push(delimiters[i] || '\\n');\n\n        if (operation === '+') {\n          addCount++;\n        } else if (operation === '-') {\n          removeCount++;\n        } else if (operation === ' ') {\n          addCount++;\n          removeCount++;\n        }\n      } else {\n        break;\n      }\n    }\n\n    // Handle the empty block count case\n    if (!addCount && hunk.newLines === 1) {\n      hunk.newLines = 0;\n    }\n    if (!removeCount && hunk.oldLines === 1) {\n      hunk.oldLines = 0;\n    }\n\n    // Perform optional sanity checking\n    if (options.strict) {\n      if (addCount !== hunk.newLines) {\n        throw new Error('Added line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n      }\n      if (removeCount !== hunk.oldLines) {\n        throw new Error('Removed line count did not match for hunk at line ' + (chunkHeaderIndex + 1));\n      }\n    }\n\n    return hunk;\n  }\n\n  while (i < diffstr.length) {\n    parseIndex();\n  }\n\n  return list;\n}\n","export function reversePatch(structuredPatch) {\n  if (Array.isArray(structuredPatch)) {\n    return structuredPatch.map(reversePatch).reverse();\n  }\n\n  return {\n    ...structuredPatch,\n    oldFileName: structuredPatch.newFileName,\n    oldHeader: structuredPatch.newHeader,\n    newFileName: structuredPatch.oldFileName,\n    newHeader: structuredPatch.oldHeader,\n    hunks: structuredPatch.hunks.map(hunk => {\n      return {\n        oldLines: hunk.newLines,\n        oldStart: hunk.newStart,\n        newLines: hunk.oldLines,\n        newStart: hunk.oldStart,\n        linedelimiters: hunk.linedelimiters,\n        lines: hunk.lines.map(l => {\n          if (l.startsWith('-')) { return `+${l.slice(1)}`; }\n          if (l.startsWith('+')) { return `-${l.slice(1)}`; }\n          return l;\n        })\n      };\n    })\n  };\n}\n","export function arrayEqual(a, b) {\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  return arrayStartsWith(a, b);\n}\n\nexport function arrayStartsWith(array, start) {\n  if (start.length > array.length) {\n    return false;\n  }\n\n  for (let i = 0; i < start.length; i++) {\n    if (start[i] !== array[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","// Iterator that traverses in the range of [min, max], stepping\n// by distance from a given start position. I.e. for [0, 4], with\n// start of 2, this will iterate 2, 3, 1, 4, 0.\nexport default function(start, minLine, maxLine) {\n  let wantForward = true,\n      backwardExhausted = false,\n      forwardExhausted = false,\n      localOffset = 1;\n\n  return function iterator() {\n    if (wantForward && !forwardExhausted) {\n      if (backwardExhausted) {\n        localOffset++;\n      } else {\n        wantForward = false;\n      }\n\n      // Check if trying to fit beyond text length, and if not, check it fits\n      // after offset location (or desired location on first iteration)\n      if (start + localOffset <= maxLine) {\n        return localOffset;\n      }\n\n      forwardExhausted = true;\n    }\n\n    if (!backwardExhausted) {\n      if (!forwardExhausted) {\n        wantForward = true;\n      }\n\n      // Check if trying to fit before text beginning, and if not, check it fits\n      // before offset location\n      if (minLine <= start - localOffset) {\n        return -localOffset++;\n      }\n\n      backwardExhausted = true;\n      return iterator();\n    }\n\n    // We tried to fit hunk before text beginning and beyond text length, then\n    // hunk can't fit on the text. Return undefined\n  };\n}\n","export function generateOptions(options, defaults) {\n  if (typeof options === 'function') {\n    defaults.callback = options;\n  } else if (options) {\n    for (let name in options) {\n      /* istanbul ignore else */\n      if (options.hasOwnProperty(name)) {\n        defaults[name] = options[name];\n      }\n    }\n  }\n  return defaults;\n}\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\nimport * as React from 'react';\nimport useLatest from 'use-latest';\nimport useComposedRef from 'use-composed-ref';\n\nvar HIDDEN_TEXTAREA_STYLE = {\n  'min-height': '0',\n  'max-height': 'none',\n  height: '0',\n  visibility: 'hidden',\n  overflow: 'hidden',\n  position: 'absolute',\n  'z-index': '-1000',\n  top: '0',\n  right: '0',\n  display: 'block'\n};\nvar forceHiddenStyles = function forceHiddenStyles(node) {\n  Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function (key) {\n    node.style.setProperty(key, HIDDEN_TEXTAREA_STYLE[key], 'important');\n  });\n};\nvar forceHiddenStyles$1 = forceHiddenStyles;\n\nvar hiddenTextarea = null;\nvar getHeight = function getHeight(node, sizingData) {\n  var height = node.scrollHeight;\n  if (sizingData.sizingStyle.boxSizing === 'border-box') {\n    // border-box: add border, since height = content + padding + border\n    return height + sizingData.borderSize;\n  }\n\n  // remove padding, since height = content\n  return height - sizingData.paddingSize;\n};\nfunction calculateNodeHeight(sizingData, value, minRows, maxRows) {\n  if (minRows === void 0) {\n    minRows = 1;\n  }\n  if (maxRows === void 0) {\n    maxRows = Infinity;\n  }\n  if (!hiddenTextarea) {\n    hiddenTextarea = document.createElement('textarea');\n    hiddenTextarea.setAttribute('tabindex', '-1');\n    hiddenTextarea.setAttribute('aria-hidden', 'true');\n    forceHiddenStyles$1(hiddenTextarea);\n  }\n  if (hiddenTextarea.parentNode === null) {\n    document.body.appendChild(hiddenTextarea);\n  }\n  var paddingSize = sizingData.paddingSize,\n    borderSize = sizingData.borderSize,\n    sizingStyle = sizingData.sizingStyle;\n  var boxSizing = sizingStyle.boxSizing;\n  Object.keys(sizingStyle).forEach(function (_key) {\n    var key = _key;\n    hiddenTextarea.style[key] = sizingStyle[key];\n  });\n  forceHiddenStyles$1(hiddenTextarea);\n  hiddenTextarea.value = value;\n  var height = getHeight(hiddenTextarea, sizingData);\n  // Double set and calc due to Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1795904\n  hiddenTextarea.value = value;\n  height = getHeight(hiddenTextarea, sizingData);\n\n  // measure height of a textarea with a single row\n  hiddenTextarea.value = 'x';\n  var rowHeight = hiddenTextarea.scrollHeight - paddingSize;\n  var minHeight = rowHeight * minRows;\n  if (boxSizing === 'border-box') {\n    minHeight = minHeight + paddingSize + borderSize;\n  }\n  height = Math.max(minHeight, height);\n  var maxHeight = rowHeight * maxRows;\n  if (boxSizing === 'border-box') {\n    maxHeight = maxHeight + paddingSize + borderSize;\n  }\n  height = Math.min(maxHeight, height);\n  return [height, rowHeight];\n}\n\nvar noop = function noop() {};\nvar pick = function pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n};\n\nvar SIZING_STYLE = ['borderBottomWidth', 'borderLeftWidth', 'borderRightWidth', 'borderTopWidth', 'boxSizing', 'fontFamily', 'fontSize', 'fontStyle', 'fontWeight', 'letterSpacing', 'lineHeight', 'paddingBottom', 'paddingLeft', 'paddingRight', 'paddingTop',\n// non-standard\n'tabSize', 'textIndent',\n// non-standard\n'textRendering', 'textTransform', 'width', 'wordBreak', 'wordSpacing', 'scrollbarGutter'];\nvar isIE = !!document.documentElement.currentStyle ;\nvar getSizingData = function getSizingData(node) {\n  var style = window.getComputedStyle(node);\n  if (style === null) {\n    return null;\n  }\n  var sizingStyle = pick(SIZING_STYLE, style);\n  var boxSizing = sizingStyle.boxSizing;\n\n  // probably node is detached from DOM, can't read computed dimensions\n  if (boxSizing === '') {\n    return null;\n  }\n\n  // IE (Edge has already correct behaviour) returns content width as computed width\n  // so we need to add manually padding and border widths\n  if (isIE && boxSizing === 'border-box') {\n    sizingStyle.width = parseFloat(sizingStyle.width) + parseFloat(sizingStyle.borderRightWidth) + parseFloat(sizingStyle.borderLeftWidth) + parseFloat(sizingStyle.paddingRight) + parseFloat(sizingStyle.paddingLeft) + 'px';\n  }\n  var paddingSize = parseFloat(sizingStyle.paddingBottom) + parseFloat(sizingStyle.paddingTop);\n  var borderSize = parseFloat(sizingStyle.borderBottomWidth) + parseFloat(sizingStyle.borderTopWidth);\n  return {\n    sizingStyle: sizingStyle,\n    paddingSize: paddingSize,\n    borderSize: borderSize\n  };\n};\nvar getSizingData$1 = getSizingData;\n\nfunction useListener(target, type, listener) {\n  var latestListener = useLatest(listener);\n  React.useLayoutEffect(function () {\n    var handler = function handler(ev) {\n      return latestListener.current(ev);\n    };\n    // might happen if document.fonts is not defined, for instance\n    if (!target) {\n      return;\n    }\n    target.addEventListener(type, handler);\n    return function () {\n      return target.removeEventListener(type, handler);\n    };\n  }, []);\n}\nvar useFormResetListener = function useFormResetListener(libRef, listener) {\n  useListener(document.body, 'reset', function (ev) {\n    if (libRef.current.form === ev.target) {\n      listener(ev);\n    }\n  });\n};\nvar useWindowResizeListener = function useWindowResizeListener(listener) {\n  useListener(window, 'resize', listener);\n};\nvar useFontsLoadedListener = function useFontsLoadedListener(listener) {\n  useListener(document.fonts, 'loadingdone', listener);\n};\n\nvar _excluded = [\"cacheMeasurements\", \"maxRows\", \"minRows\", \"onChange\", \"onHeightChange\"];\nvar TextareaAutosize = function TextareaAutosize(_ref, userRef) {\n  var cacheMeasurements = _ref.cacheMeasurements,\n    maxRows = _ref.maxRows,\n    minRows = _ref.minRows,\n    _ref$onChange = _ref.onChange,\n    onChange = _ref$onChange === void 0 ? noop : _ref$onChange,\n    _ref$onHeightChange = _ref.onHeightChange,\n    onHeightChange = _ref$onHeightChange === void 0 ? noop : _ref$onHeightChange,\n    props = _objectWithoutPropertiesLoose(_ref, _excluded);\n  if (props.style) {\n    if ('maxHeight' in props.style) {\n      throw new Error('Using `style.maxHeight` for <TextareaAutosize/> is not supported. Please use `maxRows`.');\n    }\n    if ('minHeight' in props.style) {\n      throw new Error('Using `style.minHeight` for <TextareaAutosize/> is not supported. Please use `minRows`.');\n    }\n  }\n  var isControlled = props.value !== undefined;\n  var libRef = React.useRef(null);\n  var ref = useComposedRef(libRef, userRef);\n  var heightRef = React.useRef(0);\n  var measurementsCacheRef = React.useRef();\n  var resizeTextarea = function resizeTextarea() {\n    var node = libRef.current;\n    var nodeSizingData = cacheMeasurements && measurementsCacheRef.current ? measurementsCacheRef.current : getSizingData$1(node);\n    if (!nodeSizingData) {\n      return;\n    }\n    measurementsCacheRef.current = nodeSizingData;\n    var _calculateNodeHeight = calculateNodeHeight(nodeSizingData, node.value || node.placeholder || 'x', minRows, maxRows),\n      height = _calculateNodeHeight[0],\n      rowHeight = _calculateNodeHeight[1];\n    if (heightRef.current !== height) {\n      heightRef.current = height;\n      node.style.setProperty('height', height + \"px\", 'important');\n      onHeightChange(height, {\n        rowHeight: rowHeight\n      });\n    }\n  };\n  var handleChange = function handleChange(event) {\n    if (!isControlled) {\n      resizeTextarea();\n    }\n    onChange(event);\n  };\n  {\n    React.useLayoutEffect(resizeTextarea);\n    useFormResetListener(libRef, function () {\n      if (!isControlled) {\n        var currentValue = libRef.current.value;\n        requestAnimationFrame(function () {\n          var node = libRef.current;\n          if (node && currentValue !== node.value) {\n            resizeTextarea();\n          }\n        });\n      }\n    });\n    useWindowResizeListener(resizeTextarea);\n    useFontsLoadedListener(resizeTextarea);\n    return /*#__PURE__*/React.createElement(\"textarea\", _extends({}, props, {\n      onChange: handleChange,\n      ref: ref\n    }));\n  }\n};\nvar index = /* #__PURE__ */React.forwardRef(TextareaAutosize);\n\nexport { index as default };\n","import React from 'react';\n\n// basically Exclude<React.ClassAttributes<T>[\"ref\"], string>\n\nvar updateRef = function updateRef(ref, value) {\n  if (typeof ref === 'function') {\n    ref(value);\n    return;\n  }\n  ref.current = value;\n};\nvar useComposedRef = function useComposedRef(libRef, userRef) {\n  var prevUserRef = React.useRef();\n  return React.useCallback(function (instance) {\n    libRef.current = instance;\n    if (prevUserRef.current) {\n      updateRef(prevUserRef.current, null);\n    }\n    prevUserRef.current = userRef;\n    if (!userRef) {\n      return;\n    }\n    updateRef(userRef, instance);\n  }, [userRef]);\n};\n\nexport { useComposedRef as default };\n","import { useLayoutEffect } from 'react';\n\nvar index = useLayoutEffect ;\n\nexport { index as default };\n","import React from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\n\nvar useLatest = function useLatest(value) {\n  var ref = React.useRef(value);\n  useIsomorphicLayoutEffect(function () {\n    ref.current = value;\n  });\n  return ref;\n};\n\nexport { useLatest as default };\n"],"names":["convertChangesToDMP","changes","ret","change","operation","i","length","added","removed","push","value","convertChangesToXML","escapeHTML","join","s","n","replace","arrayDiff","Diff","tokenize","slice","removeEmpty","diffArrays","oldArr","newArr","callback","diff","prototype","oldString","newString","options","self","done","setTimeout","undefined","castInput","newLen","oldLen","editLength","maxEditLength","Math","min","maxExecutionTime","timeout","Infinity","abortAfterTimestamp","Date","now","bestPath","oldPos","lastComponent","newPos","extractCommon","count","minDiagonalToConsider","maxDiagonalToConsider","execEditLength","diagonalPath","max","basePath","removePath","addPath","canAdd","addPathNewPos","canRemove","addToPath","buildValues","useLongestToken","exec","path","oldPosInc","last","previousComponent","commonCount","equals","left","right","comparator","ignoreCase","toLowerCase","array","split","chars","components","nextComponent","reverse","componentPos","componentLen","component","map","oldValue","tmp","finalComponent","pop","characterDiff","diffChars","oldStr","newStr","cssDiff","diffCss","objectPrototypeToString","Object","toString","jsonDiff","lineDiff","undefinedReplacement","stringifyReplacer","k","v","JSON","stringify","canonicalize","call","diffJson","oldObj","newObj","obj","stack","replacementStack","replacer","key","canonicalizedObj","Array","toJSON","sortedKeys","hasOwnProperty","sort","stripTrailingCr","retLines","linesAndNewlines","line","newlineIsToken","ignoreWhitespace","trim","diffLines","diffTrimmedLines","generateOptions","sentenceDiff","diffSentences","extendedWordChars","reWhitespace","wordDiff","test","tokens","splice","diffWords","diffWordsWithSpace","applyPatch","source","uniDiff","parsePatch","isArray","Error","lines","delimiters","match","hunks","compareLine","lineNumber","patchContent","errorCount","fuzzFactor","minLine","offset","removeEOFNL","addEOFNL","hunkFits","hunk","toPos","j","content","substr","maxLine","oldLines","localOffset","oldStart","iterator","distanceIterator","diffOffset","newLines","delimiter","linedelimiters","previousOperation","_k","applyPatches","currentIndex","processIndex","index","complete","loadFile","err","data","updatedContent","patched","structuredPatch","oldFileName","newFileName","oldHeader","newHeader","context","contextLines","entry","oldRangeStart","newRangeStart","curRange","oldLine","newLine","current","prev","contextSize","newStart","oldEOFNewline","newEOFNewline","noNlBeforeAdds","formatPatch","apply","createTwoFilesPatch","createPatch","fileName","calcLineCount","calcOldNewLineCount","merge","mine","theirs","base","loadPatch","fileNameChanged","selectField","mineIndex","theirsIndex","mineOffset","theirsOffset","mineCurrent","theirsCurrent","hunkBefore","cloneHunk","mergedHunk","mergeLines","param","patch","conflict","check","mineLines","theirOffset","theirLines","their","insertLeading","theirCurrent","mutualChange","collectChange","removal","insertTrailing","myChanges","theirChanges","allRemoves","arrayStartsWith","skipRemoveSuperset","arrayEqual","swap","collectContext","merged","insert","state","matchChanges","matchIndex","contextChanges","conflicted","reduce","removeChanges","delta","changeContent","forEach","myCount","theirCount","diffstr","list","parseIndex","header","parseFileHeader","parseHunk","strict","fileHeader","keyPrefix","chunkHeaderIndex","chunkHeaderLine","chunkHeader","addCount","removeCount","indexOf","reversePatch","l","startsWith","a","b","start","wantForward","backwardExhausted","forwardExhausted","defaults","name"],"sourceRoot":""}